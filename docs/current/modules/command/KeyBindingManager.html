<!DOCTYPE html>
<html lang="en">
  <head>
    <title>KeyBindingManager - Brackets API</title>
    <link rel="stylesheet" href="../../assets/css/bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/typeahead.js-bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/font-awesome.css">
    <link rel="stylesheet" href="../../assets/css/prism.css">
    <link rel="stylesheet" href="../../assets/css/main.css">
    <!--[if IE 7]>
    <link rel="stylesheet" href="../assets/css/font-awesome-ie7.css">
    <![endif]-->
    <script type="text/javascript" src="../../assets/js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../../assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="../../assets/js/typeahead.js"></script>
    <script type="text/javascript" src="../../assets/js/main.js"></script>
    <script src="http://use.edgefonts.net/source-sans-pro:n3,i3,n4,i4;source-code-pro.js"></script>

    <!-- Control the Flash of Unstyled Text (or FOUT) -->
    <style type="text/css">
        .wf-loading h1, .wf-loading h2, .wf-loading h3, .wf-loading h4,
        .wf-loading h5, .wf-loading h6, .wf-loading p, .wf-loading a {
            visibility: hidden;
        }
    </style>
    
    <script>
      window.moduleLevel = "../..";
    </script>
  </head>
  
  <body>
    <div class="row-fluid">
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="../../index.html">Brackets API</a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li><a href="#dependencies">Dependencies</a></li>
                <li><a href="#variables">Variables</a></li>
                <li><a href="#functions">Functions</a></li>
                <li><a href="#classes">Classes</a></li>
              </ul>
            </div>
            <input class="typeahead" placeholder="Search..." type="text" >
          </div>
        </div>
      </div>    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="left-section">
            <h2 class="number-of-modules">Modules (207)</h2>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_"><i class="icon-folder-open"></i>[root]</a>
              </li>
            </ul>
            <ul id="package_" class="nav nav-list">
              <li><a href="../../modules/brackets.html">brackets</a></li>
              <li><a href="../../modules/dependencies.html">dependencies</a></li>
              <li><a href="../../modules/main.html">main</a></li>
              <li><a href="../../modules/strings.html">strings</a></li>
              <li><a href="../../modules/xorigin.html">xorigin</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_command"><i class="icon-folder-open"></i>command</a>
              </li>
            </ul>
            <ul id="package_command" class="nav nav-list">
              <li><a href="../../modules/command/CommandManager.html">CommandManager</a></li>
              <li><a href="../../modules/command/Commands.html">Commands</a></li>
              <li><a href="../../modules/command/DefaultMenus.html">DefaultMenus</a></li>
              <li><a href="../../modules/command/KeyBindingManager.html">KeyBindingManager</a></li>
              <li><a href="../../modules/command/Menus.html">Menus</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_document"><i class="icon-folder-open"></i>document</a>
              </li>
            </ul>
            <ul id="package_document" class="nav nav-list">
              <li><a href="../../modules/document/ChangedDocumentTracker.html">ChangedDocumentTracker</a></li>
              <li><a href="../../modules/document/Document.html">Document</a></li>
              <li><a href="../../modules/document/DocumentCommandHandlers.html">DocumentCommandHandlers</a></li>
              <li><a href="../../modules/document/DocumentManager.html">DocumentManager</a></li>
              <li><a href="../../modules/document/InMemoryFile.html">InMemoryFile</a></li>
              <li><a href="../../modules/document/TextRange.html">TextRange</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_editor"><i class="icon-folder-open"></i>editor</a>
              </li>
            </ul>
            <ul id="package_editor" class="nav nav-list">
              <li><a href="../../modules/editor/CodeHintList.html">CodeHintList</a></li>
              <li><a href="../../modules/editor/CodeHintManager.html">CodeHintManager</a></li>
              <li><a href="../../modules/editor/CSSInlineEditor.html">CSSInlineEditor</a></li>
              <li><a href="../../modules/editor/Editor.html">Editor</a></li>
              <li><a href="../../modules/editor/EditorCommandHandlers.html">EditorCommandHandlers</a></li>
              <li><a href="../../modules/editor/EditorManager.html">EditorManager</a></li>
              <li><a href="../../modules/editor/EditorOptionHandlers.html">EditorOptionHandlers</a></li>
              <li><a href="../../modules/editor/EditorStatusBar.html">EditorStatusBar</a></li>
              <li><a href="../../modules/editor/ImageViewer.html">ImageViewer</a></li>
              <li><a href="../../modules/editor/InlineTextEditor.html">InlineTextEditor</a></li>
              <li><a href="../../modules/editor/InlineWidget.html">InlineWidget</a></li>
              <li><a href="../../modules/editor/MultiRangeInlineEditor.html">MultiRangeInlineEditor</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_extensibility"><i class="icon-folder-open"></i>extensibility</a>
              </li>
            </ul>
            <ul id="package_extensibility" class="nav nav-list">
              <li><a href="../../modules/extensibility/ExtensionManager.html">ExtensionManager</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerDialog.html">ExtensionManagerDialog</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerView.html">ExtensionManagerView</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerViewModel.html">ExtensionManagerViewModel</a></li>
              <li><a href="../../modules/extensibility/InstallExtensionDialog.html">InstallExtensionDialog</a></li>
              <li><a href="../../modules/extensibility/Package.html">Package</a></li>
              <li><a href="../../modules/extensibility/registry_utils.html">registry_utils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_features"><i class="icon-folder-open"></i>features</a>
              </li>
            </ul>
            <ul id="package_features" class="nav nav-list">
              <li><a href="../../modules/features/FindReferencesManager.html">FindReferencesManager</a></li>
              <li><a href="../../modules/features/JumpToDefManager.html">JumpToDefManager</a></li>
              <li><a href="../../modules/features/ParameterHintsManager.html">ParameterHintsManager</a></li>
              <li><a href="../../modules/features/PriorityBasedRegistration.html">PriorityBasedRegistration</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_file"><i class="icon-folder-open"></i>file</a>
              </li>
            </ul>
            <ul id="package_file" class="nav nav-list">
              <li><a href="../../modules/file/FileUtils.html">FileUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem"><i class="icon-folder-open"></i>filesystem</a>
              </li>
            </ul>
            <ul id="package_filesystem" class="nav nav-list">
              <li><a href="../../modules/filesystem/Directory.html">Directory</a></li>
              <li><a href="../../modules/filesystem/File.html">File</a></li>
              <li><a href="../../modules/filesystem/FileIndex.html">FileIndex</a></li>
              <li><a href="../../modules/filesystem/FileSystem.html">FileSystem</a></li>
              <li><a href="../../modules/filesystem/FileSystemEntry.html">FileSystemEntry</a></li>
              <li><a href="../../modules/filesystem/FileSystemError.html">FileSystemError</a></li>
              <li><a href="../../modules/filesystem/FileSystemStats.html">FileSystemStats</a></li>
              <li><a href="../../modules/filesystem/WatchedRoot.html">WatchedRoot</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell"><i class="icon-folder-open"></i>filesystem&#x2F;impls&#x2F;appshell</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/AppshellFileSystem.html">AppshellFileSystem</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell_node"><i class="icon-folder-open"></i>filesystem&#x2F;impls&#x2F;appshell&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell_node" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/node/ChokidarWatcher.html">ChokidarWatcher</a></li>
              <li><a href="../../modules/filesystem/impls/appshell/node/CSharpWatcher.html">CSharpWatcher</a></li>
              <li><a href="../../modules/filesystem/impls/appshell/node/FileWatcherDomain.html">FileWatcherDomain</a></li>
              <li><a href="../../modules/filesystem/impls/appshell/node/FileWatcherManager.html">FileWatcherManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_help"><i class="icon-folder-open"></i>help</a>
              </li>
            </ul>
            <ul id="package_help" class="nav nav-list">
              <li><a href="../../modules/help/HelpCommandHandlers.html">HelpCommandHandlers</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_JSUtils"><i class="icon-folder-open"></i>JSUtils</a>
              </li>
            </ul>
            <ul id="package_JSUtils" class="nav nav-list">
              <li><a href="../../modules/JSUtils/HintUtils.html">HintUtils</a></li>
              <li><a href="../../modules/JSUtils/MessageIds.html">MessageIds</a></li>
              <li><a href="../../modules/JSUtils/Preferences.html">Preferences</a></li>
              <li><a href="../../modules/JSUtils/ScopeManager.html">ScopeManager</a></li>
              <li><a href="../../modules/JSUtils/Session.html">Session</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_JSUtils_node"><i class="icon-folder-open"></i>JSUtils&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_JSUtils_node" class="nav nav-list">
              <li><a href="../../modules/JSUtils/node/ExtractFileContent.html">ExtractFileContent</a></li>
              <li><a href="../../modules/JSUtils/node/TernNodeDomain.html">TernNodeDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_language"><i class="icon-folder-open"></i>language</a>
              </li>
            </ul>
            <ul id="package_language" class="nav nav-list">
              <li><a href="../../modules/language/CodeInspection.html">CodeInspection</a></li>
              <li><a href="../../modules/language/CSSUtils.html">CSSUtils</a></li>
              <li><a href="../../modules/language/HTMLDOMDiff.html">HTMLDOMDiff</a></li>
              <li><a href="../../modules/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../modules/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
              <li><a href="../../modules/language/HTMLTokenizer.html">HTMLTokenizer</a></li>
              <li><a href="../../modules/language/HTMLUtils.html">HTMLUtils</a></li>
              <li><a href="../../modules/language/JSONUtils.html">JSONUtils</a></li>
              <li><a href="../../modules/language/JSUtils.html">JSUtils</a></li>
              <li><a href="../../modules/language/LanguageManager.html">LanguageManager</a></li>
              <li><a href="../../modules/language/XMLUtils.html">XMLUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_languageTools"><i class="icon-folder-open"></i>languageTools</a>
              </li>
            </ul>
            <ul id="package_languageTools" class="nav nav-list">
              <li><a href="../../modules/languageTools/BracketsToNodeInterface.html">BracketsToNodeInterface</a></li>
              <li><a href="../../modules/languageTools/ClientLoader.html">ClientLoader</a></li>
              <li><a href="../../modules/languageTools/DefaultEventHandlers.html">DefaultEventHandlers</a></li>
              <li><a href="../../modules/languageTools/DefaultProviders.html">DefaultProviders</a></li>
              <li><a href="../../modules/languageTools/LanguageClientWrapper.html">LanguageClientWrapper</a></li>
              <li><a href="../../modules/languageTools/LanguageTools.html">LanguageTools</a></li>
              <li><a href="../../modules/languageTools/PathConverters.html">PathConverters</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_languageTools_LanguageClient"><i class="icon-folder-open"></i>languageTools&#x2F;LanguageClient</a>
              </li>
            </ul>
            <ul id="package_languageTools_LanguageClient" class="nav nav-list">
              <li><a href="../../modules/languageTools/LanguageClient/Connection.html">Connection</a></li>
              <li><a href="../../modules/languageTools/LanguageClient/LanguageClient.html">LanguageClient</a></li>
              <li><a href="../../modules/languageTools/LanguageClient/NodeToBracketsInterface.html">NodeToBracketsInterface</a></li>
              <li><a href="../../modules/languageTools/LanguageClient/ProtocolAdapter.html">ProtocolAdapter</a></li>
              <li><a href="../../modules/languageTools/LanguageClient/ServerUtils.html">ServerUtils</a></li>
              <li><a href="../../modules/languageTools/LanguageClient/Utils.html">Utils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_languageTools_node"><i class="icon-folder-open"></i>languageTools&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_languageTools_node" class="nav nav-list">
              <li><a href="../../modules/languageTools/node/RegisterLanguageClientInfo.html">RegisterLanguageClientInfo</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Agents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Agents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Agents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Agents/ConsoleAgent.html">ConsoleAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/CSSAgent.html">CSSAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMAgent.html">DOMAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMHelpers.html">DOMHelpers</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMNode.html">DOMNode</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/EditAgent.html">EditAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/GotoAgent.html">GotoAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/HighlightAgent.html">HighlightAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/NetworkAgent.html">NetworkAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteAgent.html">RemoteAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteFunctions.html">RemoteFunctions</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/ScriptAgent.html">ScriptAgent</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Documents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Documents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Documents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Documents/CSSDocument.html">CSSDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/CSSPreprocessorDocument.html">CSSPreprocessorDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/HTMLDocument.html">HTMLDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/JSDocument.html">JSDocument</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Inspector"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Inspector</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Inspector" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Inspector/Inspector.html">Inspector</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment"><i class="icon-folder-open"></i>LiveDevelopment</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/LiveDevelopment.html">LiveDevelopment</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevelopmentUtils.html">LiveDevelopmentUtils</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevMultiBrowser.html">LiveDevMultiBrowser</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevServerManager.html">LiveDevServerManager</a></li>
              <li><a href="../../modules/LiveDevelopment/main.html">main</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_documents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;documents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_documents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/documents/LiveCSSDocument.html">LiveCSSDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/documents/LiveDocument.html">LiveDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/documents/LiveHTMLDocument.html">LiveHTMLDocument</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_language"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;language</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_language" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_launchers"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;launchers</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_launchers" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/launchers/Launcher.html">Launcher</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_launchers_node"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;launchers&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_launchers_node" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/launchers/node/LauncherDomain.html">LauncherDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_protocol"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;protocol</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_protocol" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/protocol/LiveDevProtocol.html">LiveDevProtocol</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_protocol_remote"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;protocol&#x2F;remote</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_protocol_remote" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/protocol/remote/DocumentObserver.html">DocumentObserver</a></li>
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/protocol/remote/LiveDevProtocolRemote.html">LiveDevProtocolRemote</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_transports_node"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;transports&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_transports_node" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/transports/node/NodeSocketTransportDomain.html">NodeSocketTransportDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_transports"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;transports</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_transports" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/transports/NodeSocketTransport.html">NodeSocketTransport</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_transports_remote"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;transports&#x2F;remote</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_transports_remote" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/transports/remote/NodeSocketTransportRemote.html">NodeSocketTransportRemote</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Servers"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Servers</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Servers" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Servers/BaseServer.html">BaseServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/FileServer.html">FileServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/UserServer.html">UserServer</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_transports_node"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;transports&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_transports_node" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/transports/node/WebSocketTransportDomain.html">WebSocketTransportDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_transports"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;transports</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_transports" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/transports/WebSocketTransport.html">WebSocketTransport</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_preferences"><i class="icon-folder-open"></i>preferences</a>
              </li>
            </ul>
            <ul id="package_preferences" class="nav nav-list">
              <li><a href="../../modules/preferences/PreferencesBase.html">PreferencesBase</a></li>
              <li><a href="../../modules/preferences/PreferencesDialogs.html">PreferencesDialogs</a></li>
              <li><a href="../../modules/preferences/PreferencesImpl.html">PreferencesImpl</a></li>
              <li><a href="../../modules/preferences/PreferencesManager.html">PreferencesManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_project"><i class="icon-folder-open"></i>project</a>
              </li>
            </ul>
            <ul id="package_project" class="nav nav-list">
              <li><a href="../../modules/project/FileSyncManager.html">FileSyncManager</a></li>
              <li><a href="../../modules/project/FileTreeView.html">FileTreeView</a></li>
              <li><a href="../../modules/project/FileTreeViewModel.html">FileTreeViewModel</a></li>
              <li><a href="../../modules/project/FileViewController.html">FileViewController</a></li>
              <li><a href="../../modules/project/ProjectManager.html">ProjectManager</a></li>
              <li><a href="../../modules/project/ProjectModel.html">ProjectModel</a></li>
              <li><a href="../../modules/project/SidebarView.html">SidebarView</a></li>
              <li><a href="../../modules/project/WorkingSetSort.html">WorkingSetSort</a></li>
              <li><a href="../../modules/project/WorkingSetView.html">WorkingSetView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_search"><i class="icon-folder-open"></i>search</a>
              </li>
            </ul>
            <ul id="package_search" class="nav nav-list">
              <li><a href="../../modules/search/FileFilters.html">FileFilters</a></li>
              <li><a href="../../modules/search/FindBar.html">FindBar</a></li>
              <li><a href="../../modules/search/FindInFiles.html">FindInFiles</a></li>
              <li><a href="../../modules/search/FindInFilesUI.html">FindInFilesUI</a></li>
              <li><a href="../../modules/search/FindReplace.html">FindReplace</a></li>
              <li><a href="../../modules/search/FindUtils.html">FindUtils</a></li>
              <li><a href="../../modules/search/QuickOpen.html">QuickOpen</a></li>
              <li><a href="../../modules/search/QuickOpenHelper.html">QuickOpenHelper</a></li>
              <li><a href="../../modules/search/QuickSearchField.html">QuickSearchField</a></li>
              <li><a href="../../modules/search/ScrollTrackMarkers.html">ScrollTrackMarkers</a></li>
              <li><a href="../../modules/search/SearchModel.html">SearchModel</a></li>
              <li><a href="../../modules/search/SearchResultsView.html">SearchResultsView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_search_node"><i class="icon-folder-open"></i>search&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_search_node" class="nav nav-list">
              <li><a href="../../modules/search/node/FindInFilesDomain.html">FindInFilesDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_utils"><i class="icon-folder-open"></i>utils</a>
              </li>
            </ul>
            <ul id="package_utils" class="nav nav-list">
              <li><a href="../../modules/utils/AnimationUtils.html">AnimationUtils</a></li>
              <li><a href="../../modules/utils/AppInit.html">AppInit</a></li>
              <li><a href="../../modules/utils/Async.html">Async</a></li>
              <li><a href="../../modules/utils/BuildInfoUtils.html">BuildInfoUtils</a></li>
              <li><a href="../../modules/utils/ColorUtils.html">ColorUtils</a></li>
              <li><a href="../../modules/utils/Compatibility.html">Compatibility</a></li>
              <li><a href="../../modules/utils/DeprecationWarning.html">DeprecationWarning</a></li>
              <li><a href="../../modules/utils/DragAndDrop.html">DragAndDrop</a></li>
              <li><a href="../../modules/utils/DropdownEventHandler.html">DropdownEventHandler</a></li>
              <li><a href="../../modules/utils/EventDispatcher.html">EventDispatcher</a></li>
              <li><a href="../../modules/utils/ExtensionLoader.html">ExtensionLoader</a></li>
              <li><a href="../../modules/utils/ExtensionUtils.html">ExtensionUtils</a></li>
              <li><a href="../../modules/utils/Global.html">Global</a></li>
              <li><a href="../../modules/utils/HealthLogger.html">HealthLogger</a></li>
              <li><a href="../../modules/utils/KeyEvent.html">KeyEvent</a></li>
              <li><a href="../../modules/utils/LocalizationUtils.html">LocalizationUtils</a></li>
              <li><a href="../../modules/utils/NativeApp.html">NativeApp</a></li>
              <li><a href="../../modules/utils/NodeConnection.html">NodeConnection</a></li>
              <li><a href="../../modules/utils/NodeDomain.html">NodeDomain</a></li>
              <li><a href="../../modules/utils/PerfUtils.html">PerfUtils</a></li>
              <li><a href="../../modules/utils/Resizer.html">Resizer</a></li>
              <li><a href="../../modules/utils/ShellAPI.html">ShellAPI</a></li>
              <li><a href="../../modules/utils/StringMatch.html">StringMatch</a></li>
              <li><a href="../../modules/utils/StringUtils.html">StringUtils</a></li>
              <li><a href="../../modules/utils/TokenUtils.html">TokenUtils</a></li>
              <li><a href="../../modules/utils/UpdateNotification.html">UpdateNotification</a></li>
              <li><a href="../../modules/utils/UrlParams.html">UrlParams</a></li>
              <li><a href="../../modules/utils/ValidationUtils.html">ValidationUtils</a></li>
              <li><a href="../../modules/utils/ViewUtils.html">ViewUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_view"><i class="icon-folder-open"></i>view</a>
              </li>
            </ul>
            <ul id="package_view" class="nav nav-list">
              <li><a href="../../modules/view/MainViewFactory.html">MainViewFactory</a></li>
              <li><a href="../../modules/view/MainViewManager.html">MainViewManager</a></li>
              <li><a href="../../modules/view/Pane.html">Pane</a></li>
              <li><a href="../../modules/view/ThemeManager.html">ThemeManager</a></li>
              <li><a href="../../modules/view/ThemeSettings.html">ThemeSettings</a></li>
              <li><a href="../../modules/view/ThemeView.html">ThemeView</a></li>
              <li><a href="../../modules/view/ViewCommandHandlers.html">ViewCommandHandlers</a></li>
              <li><a href="../../modules/view/ViewStateManager.html">ViewStateManager</a></li>
              <li><a href="../../modules/view/WorkspaceManager.html">WorkspaceManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_widgets"><i class="icon-folder-open"></i>widgets</a>
              </li>
            </ul>
            <ul id="package_widgets" class="nav nav-list">
              <li><a href="../../modules/widgets/bootstrap-alerts.html">bootstrap-alerts</a></li>
              <li><a href="../../modules/widgets/bootstrap-button.html">bootstrap-button</a></li>
              <li><a href="../../modules/widgets/bootstrap-dropdown.html">bootstrap-dropdown</a></li>
              <li><a href="../../modules/widgets/bootstrap-modal.html">bootstrap-modal</a></li>
              <li><a href="../../modules/widgets/bootstrap-popover.html">bootstrap-popover</a></li>
              <li><a href="../../modules/widgets/bootstrap-scrollspy.html">bootstrap-scrollspy</a></li>
              <li><a href="../../modules/widgets/bootstrap-tab.html">bootstrap-tab</a></li>
              <li><a href="../../modules/widgets/bootstrap-tooltip.html">bootstrap-tooltip</a></li>
              <li><a href="../../modules/widgets/bootstrap-twipsy-mod.html">bootstrap-twipsy-mod</a></li>
              <li><a href="../../modules/widgets/DefaultDialogs.html">DefaultDialogs</a></li>
              <li><a href="../../modules/widgets/Dialogs.html">Dialogs</a></li>
              <li><a href="../../modules/widgets/DropdownButton.html">DropdownButton</a></li>
              <li><a href="../../modules/widgets/infobar.html">infobar</a></li>
              <li><a href="../../modules/widgets/InlineMenu.html">InlineMenu</a></li>
              <li><a href="../../modules/widgets/ModalBar.html">ModalBar</a></li>
              <li><a href="../../modules/widgets/PopUpManager.html">PopUpManager</a></li>
              <li><a href="../../modules/widgets/StatusBar.html">StatusBar</a></li>
            </ul>
          </div>
        </div>
        <div class="module span9">
<h1>KeyBindingManager</h1>


<section class="description">
    <h3>Description</h3>
    
    <div><p>Manages the mapping of keyboard inputs to commands.</p>
</div>
    
</section>

<section id="dependencies">
    <h3>Dependencies</h3>

    <ul class="nav nav-list">
        <li><a href="..&#x2F;../modules/utils/AppInit.html">AppInit</a></li>
        <li><a href="..&#x2F;../modules/command/CommandManager.html">CommandManager</a></li>
        <li><a href="..&#x2F;../modules/command/Commands.html">Commands</a></li>
        <li><a href="..&#x2F;../modules/widgets/DefaultDialogs.html">DefaultDialogs</a></li>
        <li><a href="..&#x2F;../modules/utils/EventDispatcher.html">EventDispatcher</a></li>
        <li><a href="..&#x2F;../modules/filesystem/FileSystem.html">FileSystem</a></li>
        <li><a href="..&#x2F;../modules/filesystem/FileSystemError.html">FileSystemError</a></li>
        <li><a href="..&#x2F;../modules/file/FileUtils.html">FileUtils</a></li>
        <li><a href="..&#x2F;../modules/utils/Global.html">Global</a></li>
        <li><a href="..&#x2F;../modules/text!base-config/keyboard.json.html">keyboard.json</a></li>
        <li><a href="..&#x2F;../modules/utils/KeyEvent.html">KeyEvent</a></li>
        <li><a href="..&#x2F;../modules/thirdparty/lodash.html">lodash</a></li>
        <li><a href="..&#x2F;../modules/strings.html">strings</a></li>
        <li><a href="..&#x2F;../modules/utils/StringUtils.html">StringUtils</a></li>
        <li><a href="..&#x2F;../modules/utils/UrlParams.html">UrlParams</a></li>
    </ul>

</section>
<section id="variables">
    
    <h3>Variables 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>    </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        CtrlDownStates     <span class="label label-info">Enumeration</span>

        <a class="anchor" href="#-CtrlDownStates" id="-CtrlDownStates"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>number</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var CtrlDownStates = {
        &quot;NOT_YET_DETECTED&quot;    : 0,
        &quot;DETECTED&quot;            : 1,
        &quot;DETECTED_AND_IGNORED&quot;: 2   &#x2F;&#x2F; For consecutive ctrl keydown events while a Ctrl key is being hold down
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        MAX_INTERVAL_FOR_CTRL_ALT_KEYS 
        <a class="anchor" href="#-MAX_INTERVAL_FOR_CTRL_ALT_KEYS" id="-MAX_INTERVAL_FOR_CTRL_ALT_KEYS"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>number</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var MAX_INTERVAL_FOR_CTRL_ALT_KEYS = 30;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _allCommands 
        <a class="anchor" href="#-_allCommands" id="-_allCommands"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>Array.&lt;string&gt;</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _allCommands = [];</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _commandMap 
        <a class="anchor" href="#-_commandMap" id="-_commandMap"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>!Object.&lt;string, Array.&lt;{key: string, displayKey: string}&gt;&gt;</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _commandMap  = {};</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _ctrlDown 
        <a class="anchor" href="#-_ctrlDown" id="-_ctrlDown"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>CtrlDownStates, boolean</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _ctrlDown = CtrlDownStates.NOT_YET_DETECTED,
        _altGrDown = false;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _customKeyMap 
        <a class="anchor" href="#-_customKeyMap" id="-_customKeyMap"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>UserKeyBinding</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _customKeyMap      = {},
        _customKeyMapCache = {};</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _displayKeyMap 
        <a class="anchor" href="#-_displayKeyMap" id="-_displayKeyMap"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>{key: string, displayKey: string}</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _displayKeyMap        = { &quot;up&quot;:    &quot;\u2191&quot;,
                                  &quot;down&quot;:  &quot;\u2193&quot;,
                                  &quot;left&quot;:  &quot;\u2190&quot;,
                                  &quot;right&quot;: &quot;\u2192&quot;,
                                  &quot;-&quot;:     &quot;\u2212&quot; };

    var _specialCommands      = [Commands.EDIT_UNDO, Commands.EDIT_REDO, Commands.EDIT_SELECT_ALL,
                                 Commands.EDIT_CUT, Commands.EDIT_COPY, Commands.EDIT_PASTE],
        _reservedShortcuts    = [&quot;Ctrl-Z&quot;, &quot;Ctrl-Y&quot;, &quot;Ctrl-A&quot;, &quot;Ctrl-X&quot;, &quot;Ctrl-C&quot;, &quot;Ctrl-V&quot;],
        _macReservedShortcuts = [&quot;Cmd-,&quot;, &quot;Cmd-H&quot;, &quot;Cmd-Alt-H&quot;, &quot;Cmd-M&quot;, &quot;Cmd-Shift-Z&quot;, &quot;Cmd-Q&quot;],
        _keyNames             = [&quot;Up&quot;, &quot;Down&quot;, &quot;Left&quot;, &quot;Right&quot;, &quot;Backspace&quot;, &quot;Enter&quot;, &quot;Space&quot;, &quot;Tab&quot;,
                                 &quot;PageUp&quot;, &quot;PageDown&quot;, &quot;Home&quot;, &quot;End&quot;, &quot;Insert&quot;, &quot;Delete&quot;];</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _enabled 
        <a class="anchor" href="#-_enabled" id="-_enabled"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>boolean</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _enabled = true;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _globalKeydownHooks 
        <a class="anchor" href="#-_globalKeydownHooks" id="-_globalKeydownHooks"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>Array.&lt;function(Event): boolean&gt;</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _globalKeydownHooks = [];</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _keyMap 
        <a class="anchor" href="#-_keyMap" id="-_keyMap"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>!Object.&lt;string, {commandID: string, key: string, displayKey: string}&gt;</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _keyMap            = {},    &#x2F;&#x2F; For the actual key bindings including user specified ones
        &#x2F;&#x2F; For the default factory key bindings, cloned from _keyMap after all extensions are loaded.
        _defaultKeyMap     = {};</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _lastKeyIdentifier 
        <a class="anchor" href="#-_lastKeyIdentifier" id="-_lastKeyIdentifier"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>string</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _lastKeyIdentifier;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _lastTimeStamp 
        <a class="anchor" href="#-_lastTimeStamp" id="-_lastTimeStamp"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>number</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _lastTimeStamp;</code></pre></div><div class="member private public">

<span class="pull-right scope">
    Private
    Public API
</span>
    <h4>
        _loadUserKeyMap 
        <a class="anchor" href="#-_loadUserKeyMap" id="-_loadUserKeyMap"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>Function</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _loadUserKeyMap;</code></pre></div><div class="member private public">

<span class="pull-right scope">
    Private
    Public API
</span>
    <h4>
        _onCtrlUp 
        <a class="anchor" href="#-_onCtrlUp" id="-_onCtrlUp"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>Function</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _onCtrlUp;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _showErrors 
        <a class="anchor" href="#-_showErrors" id="-_showErrors"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>boolean</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _showErrors = true;</code></pre></div>
</section>

<section id="functions">

    <h3>Functions 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>    </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _addBinding 
        <a class="anchor" href="#-_addBinding" id="-_addBinding"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        commandID
        <span class="label label-info">string</span>
    </dt>
    <dd></dd>
    <dt>
        keyBinding
        <span class="label label-info">string,{{key: string,displayKey: string}}</span>
    </dt>
    <dd>a single shortcut.</dd>
    <dt>
        platform
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">string</span>
    </dt>
    <dd>"all" indicates all platforms, not overridable - undefined indicates all platforms, overridden by platform-specific binding</dd>
    <dt>
        userBindings
        <span class="label label-optional">optional</span>
        <span class="label label-info">boolean</span>
    </dt>
    <dd>true if adding a user key binding or undefined otherwise.</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">?{key: string,displayKey:String}</span></dt>
    <dd>Returns a record for valid key bindings. Returns null when key binding platform does not match, binding does not normalize, or is already assigned.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _addBinding(commandID, keyBinding, platform, userBindings) {
        var key,
            result = null,
            normalized,
            normalizedDisplay,
            explicitPlatform = keyBinding.platform || platform,
            targetPlatform,
            command,
            bindingsToDelete = [],
            existing;

        &#x2F;&#x2F; For platform: &quot;all&quot;, use explicit current platform
        if (explicitPlatform &amp;&amp; explicitPlatform !== &quot;all&quot;) {
            targetPlatform = explicitPlatform;
        } else {
            targetPlatform = brackets.platform;
        }


        &#x2F;&#x2F; Skip if the key binding is not for this platform.
        if (explicitPlatform === &quot;mac&quot; &amp;&amp; brackets.platform !== &quot;mac&quot;) {
            return null;
        }

        &#x2F;&#x2F; if the request does not specify an explicit platform, and we&#39;re
        &#x2F;&#x2F; currently on a mac, then replace Ctrl with Cmd.
        key = (keyBinding.key) || keyBinding;
        if (brackets.platform === &quot;mac&quot; &amp;&amp; (explicitPlatform === undefined || explicitPlatform === &quot;all&quot;)) {
            key = key.replace(&quot;Ctrl&quot;, &quot;Cmd&quot;);
            if (keyBinding.displayKey !== undefined) {
                keyBinding.displayKey = keyBinding.displayKey.replace(&quot;Ctrl&quot;, &quot;Cmd&quot;);
            }
        }

        normalized = normalizeKeyDescriptorString(key);

        &#x2F;&#x2F; skip if the key binding is invalid
        if (!normalized) {
            console.error(&quot;Unable to parse key binding &quot; + key + &quot;. Permitted modifiers: Ctrl, Cmd, Alt, Opt, Shift; separated by &#39;-&#39; (not &#39;+&#39;).&quot;);
            return null;
        }

        &#x2F;&#x2F; check for duplicate key bindings
        existing = _keyMap[normalized];

        &#x2F;&#x2F; for cross-platform compatibility
        if (exports.useWindowsCompatibleBindings) {
            &#x2F;&#x2F; windows-only key bindings are used as the default binding
            &#x2F;&#x2F; only if a default binding wasn&#39;t already defined
            if (explicitPlatform === &quot;win&quot;) {
                &#x2F;&#x2F; search for a generic or platform-specific binding if it
                &#x2F;&#x2F; already exists
                if (existing &amp;&amp; (!existing.explicitPlatform ||
                                 existing.explicitPlatform === brackets.platform ||
                                 existing.explicitPlatform === &quot;all&quot;)) {
                    &#x2F;&#x2F; do not clobber existing binding with windows-only binding
                    return null;
                }

                &#x2F;&#x2F; target this windows binding for the current platform
                targetPlatform = brackets.platform;
            }
        }

        &#x2F;&#x2F; skip if this binding doesn&#39;t match the current platform
        if (targetPlatform !== brackets.platform) {
            return null;
        }

        &#x2F;&#x2F; skip if the key is already assigned
        if (existing) {
            if (!existing.explicitPlatform &amp;&amp; explicitPlatform) {
                &#x2F;&#x2F; remove the the generic binding to replace with this new platform-specific binding
                removeBinding(normalized);
                existing = false;
            }
        }

        &#x2F;&#x2F; delete existing bindings when
        &#x2F;&#x2F; (1) replacing a windows-compatible binding with a generic or
        &#x2F;&#x2F;     platform-specific binding
        &#x2F;&#x2F; (2) replacing a generic binding with a platform-specific binding
        var existingBindings = _commandMap[commandID] || [],
            isWindowsCompatible,
            isReplaceGeneric,
            ignoreGeneric;

        existingBindings.forEach(function (binding) {
            &#x2F;&#x2F; remove windows-only bindings in _commandMap
            isWindowsCompatible = exports.useWindowsCompatibleBindings &amp;&amp;
                binding.explicitPlatform === &quot;win&quot;;

            &#x2F;&#x2F; remove existing generic binding
            isReplaceGeneric = !binding.explicitPlatform &amp;&amp;
                explicitPlatform;

            if (isWindowsCompatible || isReplaceGeneric) {
                bindingsToDelete.push(binding);
            } else {
                &#x2F;&#x2F; existing binding is platform-specific and the requested binding is generic
                ignoreGeneric = binding.explicitPlatform &amp;&amp; !explicitPlatform;
            }
        });

        if (ignoreGeneric) {
            &#x2F;&#x2F; explicit command binding overrides this one
            return null;
        }

        if (existing) {
            &#x2F;&#x2F; do not re-assign a key binding
            console.error(&quot;Cannot assign &quot; + normalized + &quot; to &quot; + commandID + &quot;. It is already assigned to &quot; + _keyMap[normalized].commandID);
            return null;
        }

        &#x2F;&#x2F; remove generic or windows-compatible bindings
        bindingsToDelete.forEach(function (binding) {
            removeBinding(binding.key);
        });

        &#x2F;&#x2F; optional display-friendly string (e.g. CMD-+ instead of CMD-=)
        normalizedDisplay = (keyBinding.displayKey) ? normalizeKeyDescriptorString(keyBinding.displayKey) : normalized;

        &#x2F;&#x2F; 1-to-many commandID mapping to key binding
        if (!_commandMap[commandID]) {
            _commandMap[commandID] = [];
        }

        result = {
            key                 : normalized,
            displayKey          : normalizedDisplay,
            explicitPlatform    : explicitPlatform
        };

        _commandMap[commandID].push(result);

        &#x2F;&#x2F; 1-to-1 key binding to commandID
        _keyMap[normalized] = {
            commandID           : commandID,
            key                 : normalized,
            displayKey          : normalizedDisplay,
            explicitPlatform    : explicitPlatform
        };

        if (!userBindings) {
            _updateCommandAndKeyMaps(_keyMap[normalized]);
        }

        &#x2F;&#x2F; notify listeners
        command = CommandManager.get(commandID);

        if (command) {
            command.trigger(&quot;keyBindingAdded&quot;, result);
        }

        return result;
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _applyUserKeyBindings 
        <a class="anchor" href="#-_applyUserKeyBindings" id="-_applyUserKeyBindings"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _applyUserKeyBindings() {
        var remappedCommands   = [],
            remappedKeys       = [],
            restrictedCommands = [],
            restrictedKeys     = [],
            invalidKeys        = [],
            invalidCommands    = [],
            multipleKeys       = [],
            duplicateBindings  = [],
            errorMessage       = &quot;&quot;;

        _.forEach(_customKeyMap, function (commandID, key) {
            var normalizedKey    = normalizeKeyDescriptorString(key),
                existingBindings = _commandMap[commandID] || [];

            &#x2F;&#x2F; Skip this since we don&#39;t allow user to update key binding of a special
            &#x2F;&#x2F; command like cut, copy, paste, undo, redo and select all.
            if (_isSpecialCommand(commandID)) {
                restrictedCommands.push(commandID);
                return;
            }

            &#x2F;&#x2F; Skip this since we don&#39;t allow user to update a shortcut used in
            &#x2F;&#x2F; a special command or any Mac system command.
            if (_isReservedShortcuts(normalizedKey)) {
                restrictedKeys.push(key);
                return;
            }

            &#x2F;&#x2F; Skip this if the key is invalid.
            if (!normalizedKey) {
                invalidKeys.push(key);
                return;
            }

            if (_isKeyAssigned(normalizedKey)) {
                if (remappedKeys.indexOf(normalizedKey) !== -1) {
                    &#x2F;&#x2F; JSON parser already removed all the duplicates that have the exact
                    &#x2F;&#x2F; same case or order in their keys. So we&#39;re only detecting duplicate
                    &#x2F;&#x2F; bindings that have different orders or different cases used in the key.
                    duplicateBindings.push(key);
                    return;
                }
                &#x2F;&#x2F; The same key binding already exists, so skip this.
                if (_keyMap[normalizedKey].commandID === commandID) {
                    &#x2F;&#x2F; Still need to add it to the remappedCommands so that
                    &#x2F;&#x2F; we can detect any duplicate later on.
                    remappedCommands.push(commandID);
                    return;
                }
                removeBinding(normalizedKey);
            }

            if (remappedKeys.indexOf(normalizedKey) === -1) {
                remappedKeys.push(normalizedKey);
            }

            &#x2F;&#x2F; Remove another key binding if the new key binding is for a command
            &#x2F;&#x2F; that has a different key binding. e.g. &quot;Ctrl-W&quot;: &quot;edit.selectLine&quot;
            &#x2F;&#x2F; requires us to remove &quot;Ctrl-W&quot; from &quot;file.close&quot; command, but we
            &#x2F;&#x2F; also need to remove &quot;Ctrl-L&quot; from &quot;edit.selectLine&quot;.
            if (existingBindings.length) {
                existingBindings.forEach(function (binding) {
                    removeBinding(binding.key);
                });
            }

            if (commandID) {
                if (_allCommands.indexOf(commandID) !== -1) {
                    if (remappedCommands.indexOf(commandID) === -1) {
                        var keybinding = { key: normalizedKey };

                        keybinding.displayKey = _getDisplayKey(normalizedKey);
                        _addBinding(commandID, keybinding.displayKey ? keybinding : normalizedKey, brackets.platform, true);
                        remappedCommands.push(commandID);
                    } else {
                        multipleKeys.push(commandID);
                    }
                } else {
                    invalidCommands.push(commandID);
                }
            }
        });

        if (restrictedCommands.length) {
            errorMessage = StringUtils.format(Strings.ERROR_RESTRICTED_COMMANDS, _getBulletList(restrictedCommands));
        }

        if (restrictedKeys.length) {
            errorMessage += StringUtils.format(Strings.ERROR_RESTRICTED_SHORTCUTS, _getBulletList(restrictedKeys));
        }

        if (multipleKeys.length) {
            errorMessage += StringUtils.format(Strings.ERROR_MULTIPLE_SHORTCUTS, _getBulletList(multipleKeys));
        }

        if (duplicateBindings.length) {
            errorMessage += StringUtils.format(Strings.ERROR_DUPLICATE_SHORTCUTS, _getBulletList(duplicateBindings));
        }

        if (invalidKeys.length) {
            errorMessage += StringUtils.format(Strings.ERROR_INVALID_SHORTCUTS, _getBulletList(invalidKeys));
        }

        if (invalidCommands.length) {
            errorMessage += StringUtils.format(Strings.ERROR_NONEXISTENT_COMMANDS, _getBulletList(invalidCommands));
        }

        if (_showErrors &amp;&amp; errorMessage) {
            _showErrorsAndOpenKeyMap(&quot;&quot;, errorMessage);
        }
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _buildKeyDescriptor 
        <a class="anchor" href="#-_buildKeyDescriptor" id="-_buildKeyDescriptor"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        hasCtrl
        <span class="label label-info">boolean</span>
    </dt>
    <dd>Is Ctrl key enabled</dd>
    <dt>
        hasAlt
        <span class="label label-info">boolean</span>
    </dt>
    <dd>Is Alt key enabled</dd>
    <dt>
        hasShift
        <span class="label label-info">boolean</span>
    </dt>
    <dd>Is Shift key enabled</dd>
    <dt>
        key
        <span class="label label-info">string</span>
    </dt>
    <dd>The key that's pressed</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">string</span></dt>
    <dd>The normalized key descriptor</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _buildKeyDescriptor(hasMacCtrl, hasCtrl, hasAlt, hasShift, key) {
        if (!key) {
            console.log(&quot;KeyBindingManager _buildKeyDescriptor() - No key provided!&quot;);
            return &quot;&quot;;
        }

        var keyDescriptor = [];

        if (hasMacCtrl) {
            keyDescriptor.push(&quot;Ctrl&quot;);
        }
        if (hasAlt) {
            keyDescriptor.push(&quot;Alt&quot;);
        }
        if (hasShift) {
            keyDescriptor.push(&quot;Shift&quot;);
        }

        if (hasCtrl) {
            &#x2F;&#x2F; Windows display Ctrl first, Mac displays Command symbol last
            if (brackets.platform === &quot;mac&quot;) {
                keyDescriptor.push(&quot;Cmd&quot;);
            } else {
                keyDescriptor.unshift(&quot;Ctrl&quot;);
            }
        }

        keyDescriptor.push(key);

        return keyDescriptor.join(&quot;-&quot;);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _detectAltGrKeyDown 
        <a class="anchor" href="#-_detectAltGrKeyDown" id="-_detectAltGrKeyDown"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        e
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">KeyboardEvent</span>
    </dt>
    <dd>keyboard event object</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _detectAltGrKeyDown(e) {
        if (brackets.platform !== &quot;win&quot;) {
            return;
        }

        if (!_altGrDown) {
            if (_ctrlDown !== CtrlDownStates.DETECTED_AND_IGNORED &amp;&amp; e.ctrlKey &amp;&amp; e.keyIdentifier === &quot;Control&quot;) {
                _ctrlDown = CtrlDownStates.DETECTED;
            } else if (e.repeat &amp;&amp; e.ctrlKey &amp;&amp; e.keyIdentifier === &quot;Control&quot;) {
                &#x2F;&#x2F; We get here if the user is holding down left&#x2F;right Control key. Set it to false
                &#x2F;&#x2F; so that we don&#39;t misidentify the combination of Ctrl and Alt keys as AltGr key.
                _ctrlDown = CtrlDownStates.DETECTED_AND_IGNORED;
            } else if (_ctrlDown === CtrlDownStates.DETECTED &amp;&amp; e.altKey &amp;&amp; e.ctrlKey &amp;&amp; e.keyIdentifier === &quot;Alt&quot; &amp;&amp;
                        (e.timeStamp - _lastTimeStamp) &lt; MAX_INTERVAL_FOR_CTRL_ALT_KEYS) {
                _altGrDown = true;
                _lastKeyIdentifier = &quot;Alt&quot;;
                _enabled = false;
                $(window).on(&quot;keyup&quot;, _onCtrlUp);
            } else {
                &#x2F;&#x2F; Reset _ctrlDown so that we can start over in detecting the two key events
                &#x2F;&#x2F; required for AltGr key.
                _ctrlDown = CtrlDownStates.NOT_YET_DETECTED;
            }
            _lastTimeStamp = e.timeStamp;
        } else if (e.keyIdentifier === &quot;Control&quot; || e.keyIdentifier === &quot;Alt&quot;) {
            &#x2F;&#x2F; If the user is NOT holding down AltGr key or is also pressing Ctrl key,
            &#x2F;&#x2F; then _lastKeyIdentifier will be the same as keyIdentifier in the current
            &#x2F;&#x2F; key event. So we need to quit AltGr mode to re-enable KBM.
            if (e.altKey &amp;&amp; e.ctrlKey &amp;&amp; e.keyIdentifier === _lastKeyIdentifier) {
                _quitAltGrMode();
            } else {
                _lastKeyIdentifier = e.keyIdentifier;
            }
        }
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _getBulletList 
        <a class="anchor" href="#-_getBulletList" id="-_getBulletList"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        list
        <span class="label label-info">Array.&lt;string&gt;</span>
    </dt>
    <dd>An array of strings to be converted into a message string with a bullet list.</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">string</span></dt>
    <dd>the html text version of the list</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _getBulletList(list) {
        var message = &quot;&lt;ul class=&#39;dialog-list&#39;&gt;&quot;;
        list.forEach(function (info) {
            message += &quot;&lt;li&gt;&quot; + info + &quot;&lt;&#x2F;li&gt;&quot;;
        });
        message += &quot;&lt;&#x2F;ul&gt;&quot;;
        return message;
    }</code></pre></div><div class="member private public">

<span class="pull-right scope">
    Private
    Public API
</span>
    <h4>
        _getDisplayKey 
        <a class="anchor" href="#-_getDisplayKey" id="-_getDisplayKey"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        key
        <span class="label label-info">string</span>
    </dt>
    <dd>The non-modifier key used in the shortcut. It does not need to be normalized.</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">string</span></dt>
    <dd>An empty string if key is not one of those we want to show with the unicode symbol. Otherwise, the corresponding unicode symbol is returned.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _getDisplayKey(key) {
        var displayKey = &quot;&quot;,
            match = key ? key.match(&#x2F;(Up|Down|Left|Right|\-)$&#x2F;i) : null;
        if (match &amp;&amp; !&#x2F;Page(Up|Down)&#x2F;.test(key)) {
            displayKey = key.substr(0, match.index) + _displayKeyMap[match[0].toLowerCase()];
        }
        return displayKey;
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _getUserKeyMapFilePath 
        <a class="anchor" href="#-_getUserKeyMapFilePath" id="-_getUserKeyMapFilePath"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">string</span></dt>
    <dd>full file path to the user key map file.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _getUserKeyMapFilePath() {
        if (window.isBracketsTestWindow) {
            return brackets.app.getApplicationSupportDirectory() + &quot;&#x2F;_test_&#x2F;&quot; + KEYMAP_FILENAME;
        }
        return _userKeyMapFilePath;
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _handleCommandRegistered 
        <a class="anchor" href="#-_handleCommandRegistered" id="-_handleCommandRegistered"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Adds default key bindings when commands are registered to CommandManager</p>
</div>
    
<dl>
    <dt>
        event
        <span class="label label-info">$.Event</span>
    </dt>
    <dd>jQuery event</dd>
    <dt>
        command
        <span class="label label-info">Command</span>
    </dt>
    <dd>Newly registered command</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _handleCommandRegistered(event, command) {
        var commandId   = command.getID(),
            defaults    = KeyboardPrefs[commandId];

        if (defaults) {
            addBinding(commandId, defaults);
        }
    }</code></pre></div><div class="member private public">

<span class="pull-right scope">
    Private
    Public API
</span>
    <h4>
        _handleKey 
        <a class="anchor" href="#-_handleKey" id="-_handleKey"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Process the keybinding for the current key.</p>
</div>
    
<dl>
    <dt>
        A
        <span class="label label-info">string</span>
    </dt>
    <dd>key-description string.</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">boolean</span></dt>
    <dd>true if the key was processed, false otherwise</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _handleKey(key) {
        if (_enabled &amp;&amp; _keyMap[key]) {
            &#x2F;&#x2F; The execute() function returns a promise because some commands are async.
            &#x2F;&#x2F; Generally, commands decide whether they can run or not synchronously,
            &#x2F;&#x2F; and reject immediately, so we can test for that synchronously.
            var promise = CommandManager.execute(_keyMap[key].commandID);
            return (promise.state() !== &quot;rejected&quot;);
        }
        return false;
    }</code></pre></div><div class="member private public">

<span class="pull-right scope">
    Private
    Public API
</span>
    <h4>
        _handleKeyEvent 
        <a class="anchor" href="#-_handleKeyEvent" id="-_handleKeyEvent"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Handles a given keydown event, checking global hooks first before
deciding to handle it ourselves.</p>
</div>
    
<dl>
    <dt>
        The
        <span class="label label-info">Event</span>
    </dt>
    <dd>keydown event to handle.</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _handleKeyEvent(event) {
        var i, handled = false;
        for (i = _globalKeydownHooks.length - 1; i &gt;= 0; i--) {
            if (_globalKeydownHooks[i](event)) {
                handled = true;
                break;
            }
        }
        _detectAltGrKeyDown(event);
        if (!handled &amp;&amp; _handleKey(_translateKeyboardEvent(event))) {
            event.stopPropagation();
            event.preventDefault();
        }
    }

    AppInit.htmlReady(function () {
        &#x2F;&#x2F; Install keydown event listener.
        window.document.body.addEventListener(
            &quot;keydown&quot;,
            _handleKeyEvent,
            true
        );

        exports.useWindowsCompatibleBindings = (brackets.platform !== &quot;mac&quot;) &amp;&amp;
            (brackets.platform !== &quot;win&quot;);
    });</code></pre></div><div class="member private public">

<span class="pull-right scope">
    Private
    Public API
</span>
    <h4>
        _initCommandAndKeyMaps 
        <a class="anchor" href="#-_initCommandAndKeyMaps" id="-_initCommandAndKeyMaps"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _initCommandAndKeyMaps() {
        _allCommands = CommandManager.getAll();
        &#x2F;&#x2F; Keep a copy of the default key bindings before loading user key bindings.
        _defaultKeyMap = _.cloneDeep(_keyMap);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _isKeyAssigned 
        <a class="anchor" href="#-_isKeyAssigned" id="-_isKeyAssigned"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        A
        <span class="label label-info">string</span>
    </dt>
    <dd>normalized key-description string.</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">boolean</span></dt>
    <dd>true if the key is already assigned, false otherwise.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _isKeyAssigned(key) {
        return (_keyMap[key] !== undefined);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _isReservedShortcuts 
        <a class="anchor" href="#-_isReservedShortcuts" id="-_isReservedShortcuts"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        normalizedKey
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">string</span>
    </dt>
    <dd>A key combination string used for a keyboard shortcut</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">boolean</span></dt>
    <dd>true if normalizedKey is a restricted shortcut, false otherwise.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _isReservedShortcuts(normalizedKey) {
        if (!normalizedKey) {
            return false;
        }

        if (_reservedShortcuts.indexOf(normalizedKey) &gt; -1 ||
                _reservedShortcuts.indexOf(normalizedKey.replace(&quot;Cmd&quot;, &quot;Ctrl&quot;)) &gt; -1) {
            return true;
        }

        if (brackets.platform === &quot;mac&quot; &amp;&amp; _macReservedShortcuts.indexOf(normalizedKey) &gt; -1) {
            return true;
        }

        return false;
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _isSpecialCommand 
        <a class="anchor" href="#-_isSpecialCommand" id="-_isSpecialCommand"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        commandID
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">string</span>
    </dt>
    <dd>A string referring to a specific command</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">boolean</span></dt>
    <dd>true if normalizedKey is a special command, false otherwise.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _isSpecialCommand(commandID) {
        if (brackets.platform === &quot;mac&quot; &amp;&amp; commandID === &quot;file.quit&quot;) {
            return true;
        }

        return (_specialCommands.indexOf(commandID) &gt; -1);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _mapKeycodeToKey 
        <a class="anchor" href="#-_mapKeycodeToKey" id="-_mapKeycodeToKey"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        The
        <span class="label label-info">number</span>
    </dt>
    <dd>keycode from the keyboard event.</dd>
    <dt>
        The
        <span class="label label-info">string</span>
    </dt>
    <dd>current best guess at what the key is.</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">string</span></dt>
    <dd>If the key is OS-inconsistent, the correct key; otherwise, the original key.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _mapKeycodeToKey(keycode, key) {
        &#x2F;&#x2F; If keycode represents one of the digit keys (0-9), then return the corresponding digit
        &#x2F;&#x2F; by subtracting KeyEvent.DOM_VK_0 from keycode. ie. [48-57] --&gt; [0-9]
        if (keycode &gt;= KeyEvent.DOM_VK_0 &amp;&amp; keycode &lt;= KeyEvent.DOM_VK_9) {
            return String(keycode - KeyEvent.DOM_VK_0);
        &#x2F;&#x2F; Do the same with the numpad numbers
        &#x2F;&#x2F; by subtracting KeyEvent.DOM_VK_NUMPAD0 from keycode. ie. [96-105] --&gt; [0-9]
        } else if (keycode &gt;= KeyEvent.DOM_VK_NUMPAD0 &amp;&amp; keycode &lt;= KeyEvent.DOM_VK_NUMPAD9) {
            return String(keycode - KeyEvent.DOM_VK_NUMPAD0);
        }


        switch (keycode) {
        case KeyEvent.DOM_VK_SEMICOLON:
            return &quot;;&quot;;
        case KeyEvent.DOM_VK_EQUALS:
            return &quot;=&quot;;
        case KeyEvent.DOM_VK_COMMA:
            return &quot;,&quot;;
        case KeyEvent.DOM_VK_SUBTRACT:
        case KeyEvent.DOM_VK_DASH:
            return &quot;-&quot;;
        case KeyEvent.DOM_VK_ADD:
            return &quot;+&quot;;
        case KeyEvent.DOM_VK_DECIMAL:
        case KeyEvent.DOM_VK_PERIOD:
            return &quot;.&quot;;
        case KeyEvent.DOM_VK_DIVIDE:
        case KeyEvent.DOM_VK_SLASH:
            return &quot;&#x2F;&quot;;
        case KeyEvent.DOM_VK_BACK_QUOTE:
            return &quot;`&quot;;
        case KeyEvent.DOM_VK_OPEN_BRACKET:
            return &quot;[&quot;;
        case KeyEvent.DOM_VK_BACK_SLASH:
            return &quot;\\&quot;;
        case KeyEvent.DOM_VK_CLOSE_BRACKET:
            return &quot;]&quot;;
        case KeyEvent.DOM_VK_QUOTE:
            return &quot;&#39;&quot;;
        default:
            return key;
        }
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _openUserKeyMap 
        <a class="anchor" href="#-_openUserKeyMap" id="-_openUserKeyMap"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _openUserKeyMap() {
        var userKeyMapPath = _getUserKeyMapFilePath(),
            file = FileSystem.getFileForPath(userKeyMapPath);
        file.exists(function (err, doesExist) {
            if (doesExist) {
                CommandManager.execute(Commands.FILE_OPEN, { fullPath: userKeyMapPath });
            } else {
                var defaultContent = &quot;{\n    \&quot;documentation\&quot;: \&quot;https:&#x2F;&#x2F;github.com&#x2F;adobe&#x2F;brackets&#x2F;wiki&#x2F;User-Key-Bindings\&quot;,&quot; +
                                     &quot;\n    \&quot;overrides\&quot;: {&quot; +
                                     &quot;\n        \n    }\n}\n&quot;;

                FileUtils.writeText(file, defaultContent, true)
                    .done(function () {
                        CommandManager.execute(Commands.FILE_OPEN, { fullPath: userKeyMapPath });
                    });
            }
        });
    }

    &#x2F;&#x2F; Due to circular dependencies, not safe to call on() directly
    EventDispatcher.on_duringInit(CommandManager, &quot;commandRegistered&quot;, _handleCommandRegistered);
    CommandManager.register(Strings.CMD_OPEN_KEYMAP, Commands.FILE_OPEN_KEYMAP, _openUserKeyMap);

    &#x2F;&#x2F; Asynchronously loading DocumentManager to avoid the circular dependency
    require([&quot;document&#x2F;DocumentManager&quot;], function (DocumentManager) {
        DocumentManager.on(&quot;documentSaved&quot;, function checkKeyMapUpdates(e, doc) {
            if (doc &amp;&amp; doc.file.fullPath === _userKeyMapFilePath) {
                _loadUserKeyMap();
            }
        });
    });</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _quitAltGrMode 
        <a class="anchor" href="#-_quitAltGrMode" id="-_quitAltGrMode"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _quitAltGrMode() {
        _enabled = true;
        _ctrlDown = CtrlDownStates.NOT_YET_DETECTED;
        _altGrDown = false;
        _lastTimeStamp = null;
        _lastKeyIdentifier = null;
        $(window).off(&quot;keyup&quot;, _onCtrlUp);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _readUserKeyMap 
        <a class="anchor" href="#-_readUserKeyMap" id="-_readUserKeyMap"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">$.Promise</span></dt>
    <dd>a jQuery promise that will be resolved with the JSON object if the user key map file has "overrides" property or an empty JSON. If the key map file cannot be read or cannot be parsed by the JSON parser, then the promise is rejected with an error.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _readUserKeyMap() {
        var file   = FileSystem.getFileForPath(_getUserKeyMapFilePath()),
            result = new $.Deferred();

        file.exists(function (err, doesExist) {
            if (doesExist) {
                FileUtils.readAsText(file)
                    .done(function (text) {
                        var keyMap = {};
                        try {
                            if (text) {
                                var json = JSON.parse(text);
                                &#x2F;&#x2F; If no overrides, return an empty key map.
                                result.resolve((json &amp;&amp; json.overrides) || keyMap);
                            } else {
                                &#x2F;&#x2F; The file is empty, so return an empty key map.
                                result.resolve(keyMap);
                            }
                        } catch (err) {
                            &#x2F;&#x2F; Cannot parse the text read from the key map file.
                            result.reject(err);
                        }
                    })
                    .fail(function (err) {
                        &#x2F;&#x2F; Key map file cannot be loaded.
                        result.reject(err);
                    });
            } else {
                &#x2F;&#x2F; Just resolve if no user key map file
                result.resolve();
            }
        });
        return result.promise();
    }</code></pre></div><div class="member private public">

<span class="pull-right scope">
    Private
    Public API
</span>
    <h4>
        _reset 
        <a class="anchor" href="#-_reset" id="-_reset"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _reset() {
        _keyMap = {};
        _defaultKeyMap = {};
        _customKeyMap = {};
        _customKeyMapCache = {};
        _commandMap = {};
        _globalKeydownHooks = [];
        _userKeyMapFilePath = brackets.app.getApplicationSupportDirectory() + &quot;&#x2F;&quot; + KEYMAP_FILENAME;
    }</code></pre></div><div class="member private public">

<span class="pull-right scope">
    Private
    Public API
</span>
    <h4>
        _setUserKeyMapFilePath 
        <a class="anchor" href="#-_setUserKeyMapFilePath" id="-_setUserKeyMapFilePath"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        fullPath
        <span class="label label-info">string</span>
    </dt>
    <dd>file path to the user key map file.</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _setUserKeyMapFilePath(fullPath) {
        _userKeyMapFilePath = fullPath;
    }

    AppInit.extensionsLoaded(function () {
        var params  = new UrlParams();
        params.parse();
        if (params.get(&quot;reloadWithoutUserExts&quot;) === &quot;true&quot;) {
            _showErrors = false;
        }

        _initCommandAndKeyMaps();
        _loadUserKeyMap();
    });

    &#x2F;&#x2F; unit test only
    exports._reset = _reset;
    exports._setUserKeyMapFilePath = _setUserKeyMapFilePath;
    exports._getDisplayKey = _getDisplayKey;
    exports._loadUserKeyMap = _loadUserKeyMap;
    exports._initCommandAndKeyMaps = _initCommandAndKeyMaps;
    exports._onCtrlUp = _onCtrlUp;

    &#x2F;&#x2F; Define public API
    exports.getKeymap = getKeymap;
    exports.addBinding = addBinding;
    exports.removeBinding = removeBinding;
    exports.formatKeyDescriptor = formatKeyDescriptor;
    exports.getKeyBindings = getKeyBindings;
    exports.addGlobalKeydownHook = addGlobalKeydownHook;
    exports.removeGlobalKeydownHook = removeGlobalKeydownHook;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _showErrorsAndOpenKeyMap 
        <a class="anchor" href="#-_showErrorsAndOpenKeyMap" id="-_showErrorsAndOpenKeyMap"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        err
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">string</span>
    </dt>
    <dd>Error type returned from JSON parser or open file operation</dd>
    <dt>
        message
        <span class="label label-optional">optional</span>
        <span class="label label-info">string</span>
    </dt>
    <dd>Error message to be displayed in the dialog</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _showErrorsAndOpenKeyMap(err, message) {
        &#x2F;&#x2F; Asynchronously loading Dialogs module to avoid the circular dependency
        require([&quot;widgets&#x2F;Dialogs&quot;], function (Dialogs) {
            var errorMessage = Strings.ERROR_KEYMAP_CORRUPT;

            if (err === FileSystemError.UNSUPPORTED_ENCODING) {
                errorMessage = Strings.ERROR_LOADING_KEYMAP;
            } else if (message) {
                errorMessage = message;
            }

            Dialogs.showModalDialog(
                DefaultDialogs.DIALOG_ID_ERROR,
                Strings.ERROR_KEYMAP_TITLE,
                errorMessage
            )
                .done(function () {
                    if (err !== FileSystemError.UNSUPPORTED_ENCODING) {
                        CommandManager.execute(Commands.FILE_OPEN_KEYMAP);
                    }
                });
        });
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _sortByPlatform 
        <a class="anchor" href="#-_sortByPlatform" id="-_sortByPlatform"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _sortByPlatform(a, b) {
        var a1 = (a.platform) ? 1 : 0,
            b1 = (b.platform) ? 1 : 0;
        return b1 - a1;
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _translateKeyboardEvent 
        <a class="anchor" href="#-_translateKeyboardEvent" id="-_translateKeyboardEvent"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Takes a keyboard event and translates it into a key in a key map</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _translateKeyboardEvent(event) {
        var hasMacCtrl = (brackets.platform === &quot;mac&quot;) ? (event.ctrlKey) : false,
            hasCtrl = (brackets.platform !== &quot;mac&quot;) ? (event.ctrlKey) : (event.metaKey),
            hasAlt = (event.altKey),
            hasShift = (event.shiftKey),
            key = String.fromCharCode(event.keyCode);

        &#x2F;&#x2F;From the W3C, if we can get the KeyboardEvent.keyIdentifier then look here
        &#x2F;&#x2F;As that will let us use keys like then function keys &quot;F5&quot; for commands. The
        &#x2F;&#x2F;full set of values we can use is here
        &#x2F;&#x2F;http:&#x2F;&#x2F;www.w3.org&#x2F;TR&#x2F;2007&#x2F;WD-DOM-Level-3-Events-20071221&#x2F;keyset.html#KeySet-Set
        var ident = event.keyIdentifier;
        if (ident) {
            if (ident.charAt(0) === &quot;U&quot; &amp;&amp; ident.charAt(1) === &quot;+&quot;) {
                &#x2F;&#x2F;This is a unicode code point like &quot;U+002A&quot;, get the 002A and use that
                key = String.fromCharCode(parseInt(ident.substring(2), 16));
            } else {
                &#x2F;&#x2F;This is some non-character key, just use the raw identifier
                key = ident;
            }
        }

        &#x2F;&#x2F; Translate some keys to their common names
        if (key === &quot;\t&quot;) {
            key = &quot;Tab&quot;;
        } else if (key === &quot; &quot;) {
            key = &quot;Space&quot;;
        } else if (key === &quot;\b&quot;) {
            key = &quot;Backspace&quot;;
        } else if (key === &quot;Help&quot;) {
            key = &quot;Insert&quot;;
        } else if (event.keyCode === KeyEvent.DOM_VK_DELETE) {
            key = &quot;Delete&quot;;
        } else {
            key = _mapKeycodeToKey(event.keyCode, key);
        }

        return _buildKeyDescriptor(hasMacCtrl, hasCtrl, hasAlt, hasShift, key);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _undoPriorUserKeyBindings 
        <a class="anchor" href="#-_undoPriorUserKeyBindings" id="-_undoPriorUserKeyBindings"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _undoPriorUserKeyBindings() {
        _.forEach(_customKeyMapCache, function (commandID, key) {
            var normalizedKey  = normalizeKeyDescriptorString(key),
                defaults       = _.find(_.toArray(_defaultKeyMap), { &quot;commandID&quot;: commandID }),
                defaultCommand = _defaultKeyMap[normalizedKey];

            &#x2F;&#x2F; We didn&#39;t modified this before, so skip it.
            if (_isSpecialCommand(commandID) ||
                    _isReservedShortcuts(normalizedKey)) {
                return;
            }

            if (_isKeyAssigned(normalizedKey) &amp;&amp;
                    _customKeyMap[key] !== commandID &amp;&amp; _customKeyMap[normalizedKey] !== commandID) {
                &#x2F;&#x2F; Unassign the key from any command. e.g. &quot;Cmd-W&quot;: &quot;file.open&quot; in _customKeyMapCache
                &#x2F;&#x2F; will require us to remove Cmd-W shortcut from file.open command.
                removeBinding(normalizedKey);
            }

            &#x2F;&#x2F; Reassign the default key binding. e.g. &quot;Cmd-W&quot;: &quot;file.open&quot; in _customKeyMapCache
            &#x2F;&#x2F; will require us to reassign Cmd-O shortcut to file.open command.
            if (defaults) {
                addBinding(commandID, defaults, brackets.platform);
            }

            &#x2F;&#x2F; Reassign the default key binding of the previously modified command.
            &#x2F;&#x2F; e.g. &quot;Cmd-W&quot;: &quot;file.open&quot; in _customKeyMapCache will require us to reassign Cmd-W
            &#x2F;&#x2F; shortcut to file.close command.
            if (defaultCommand &amp;&amp; defaultCommand.key) {
                addBinding(defaultCommand.commandID, defaultCommand.key, brackets.platform);
            }
        });
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _updateCommandAndKeyMaps 
        <a class="anchor" href="#-_updateCommandAndKeyMaps" id="-_updateCommandAndKeyMaps"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        newBinding
        <span class="label label-info">{commandID: string,key: string,displayKey:string,explicitPlatform: string}</span>
    </dt>
    <dd></dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _updateCommandAndKeyMaps(newBinding) {
        if (_allCommands.length === 0) {
            return;
        }

        if (newBinding &amp;&amp; newBinding.commandID &amp;&amp; _allCommands.indexOf(newBinding.commandID) === -1) {
            _defaultKeyMap[newBinding.commandID] = _.cloneDeep(newBinding);

            &#x2F;&#x2F; Process user key map again to catch any reassignment to all new key bindings added from extensions.
            _loadUserKeyMap();
        }
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        addBinding 
        <a class="anchor" href="#-addBinding" id="-addBinding"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Add one or more key bindings to a particular Command.</p>
</div>
    
<dl>
    <dt>
        command
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">string, Command</span>
    </dt>
    <dd>A command ID or command object</dd>
    <dt>
        keyBindings
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">({key: string, displayKey: string}, Array.&lt;{key: string, displayKey: string, platform: string}&gt;)</span>
    </dt>
    <dd>A single key binding or an array of keybindings. Example: "Shift-Cmd-F". Mac and Win key equivalents are automatically mapped to each other. Use displayKey property to display a different string (e.g. "CMD+" instead of "CMD=").</dd>
    <dt>
        platform
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">string</span>
    </dt>
    <dd>The target OS of the keyBindings either "mac", "win" or "linux". If undefined, all platforms not explicitly defined will use the key binding. NOTE: If platform is not specified, Ctrl will be replaced by Cmd for "mac" platform</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">{key: string,displayKey:String},Array.&lt;{key: string,displayKey:String}&gt;</span></dt>
    <dd>Returns record(s) for valid key binding(s)</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function addBinding(command, keyBindings, platform) {
        var commandID = &quot;&quot;,
            results;

        if (!command) {
            console.error(&quot;addBinding(): missing required parameter: command&quot;);
            return;
        }

        if (!keyBindings) { return; }

        if (typeof (command) === &quot;string&quot;) {
            commandID = command;
        } else {
            commandID = command.getID();
        }

        if (Array.isArray(keyBindings)) {
            var keyBinding;
            results = [];

            &#x2F;&#x2F; process platform-specific bindings first
            keyBindings.sort(_sortByPlatform);

            keyBindings.forEach(function addSingleBinding(keyBindingRequest) {
                &#x2F;&#x2F; attempt to add keybinding
                keyBinding = _addBinding(commandID, keyBindingRequest, keyBindingRequest.platform);

                if (keyBinding) {
                    results.push(keyBinding);
                }
            });
        } else {
            results = _addBinding(commandID, keyBindings, platform);
        }

        return results;
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        addGlobalKeydownHook 
        <a class="anchor" href="#-addGlobalKeydownHook" id="-addGlobalKeydownHook"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Adds a global keydown hook that gets first crack at keydown events
before standard keybindings do. This is intended for use by modal or
semi-modal UI elements like dialogs or the code hint list that should
execute before normal command bindings are run.</p>
<p>The hook is passed one parameter, the original keyboard event. If the
hook handles the event (or wants to block other global hooks from
handling the event), it should return true. Note that this will <em>only</em>
stop other global hooks and KeyBindingManager from handling the
event; to prevent further event propagation, you will need to call
stopPropagation(), stopImmediatePropagation(), and/or preventDefault()
as usual.</p>
<p>Multiple keydown hooks can be registered, and are executed in order,
most-recently-added first.</p>
<p>(We have to have a special API for this because (1) handlers are normally
called in least-recently-added order, and we want most-recently-added;
(2) native DOM events don&#39;t have a way for us to find out if
stopImmediatePropagation()/stopPropagation() has been called on the
event, so we have to have some other way for one of the hooks to
indicate that it wants to block the other hooks from running.)</p>
</div>
    
<dl>
    <dt>
        hook
        <span class="label label-info">function(Event): boolean</span>
    </dt>
    <dd>The global hook to add.</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function addGlobalKeydownHook(hook) {
        _globalKeydownHooks.push(hook);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        formatKeyDescriptor 
        <a class="anchor" href="#-formatKeyDescriptor" id="-formatKeyDescriptor"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Convert normalized key representation to display appropriate for platform.</p>
</div>
    
<dl>
    <dt>
        descriptor
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">string</span>
    </dt>
    <dd>Normalized key descriptor.</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">!string</span></dt>
    <dd>Display/Operating system appropriate string</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function formatKeyDescriptor(descriptor) {
        var displayStr;

        if (brackets.platform === &quot;mac&quot;) {
            displayStr = descriptor.replace(&#x2F;-(?!$)&#x2F;g, &quot;&quot;);     &#x2F;&#x2F; remove dashes
            displayStr = displayStr.replace(&quot;Ctrl&quot;, &quot;\u2303&quot;);  &#x2F;&#x2F; Ctrl &gt; control symbol
            displayStr = displayStr.replace(&quot;Cmd&quot;, &quot;\u2318&quot;);   &#x2F;&#x2F; Cmd &gt; command symbol
            displayStr = displayStr.replace(&quot;Shift&quot;, &quot;\u21E7&quot;); &#x2F;&#x2F; Shift &gt; shift symbol
            displayStr = displayStr.replace(&quot;Alt&quot;, &quot;\u2325&quot;);   &#x2F;&#x2F; Alt &gt; option symbol
        } else {
            displayStr = descriptor.replace(&quot;Ctrl&quot;, Strings.KEYBOARD_CTRL);
            displayStr = displayStr.replace(&quot;Shift&quot;, Strings.KEYBOARD_SHIFT);
            displayStr = displayStr.replace(&#x2F;-(?!$)&#x2F;g, &quot;+&quot;);
        }

        displayStr = displayStr.replace(&quot;Space&quot;, Strings.KEYBOARD_SPACE);

        displayStr = displayStr.replace(&quot;PageUp&quot;, Strings.KEYBOARD_PAGE_UP);
        displayStr = displayStr.replace(&quot;PageDown&quot;, Strings.KEYBOARD_PAGE_DOWN);
        displayStr = displayStr.replace(&quot;Home&quot;, Strings.KEYBOARD_HOME);
        displayStr = displayStr.replace(&quot;End&quot;, Strings.KEYBOARD_END);

        displayStr = displayStr.replace(&quot;Ins&quot;, Strings.KEYBOARD_INSERT);
        displayStr = displayStr.replace(&quot;Del&quot;, Strings.KEYBOARD_DELETE);

        return displayStr;
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        getKeyBindings 
        <a class="anchor" href="#-getKeyBindings" id="-getKeyBindings"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Retrieve key bindings currently associated with a command</p>
</div>
    
<dl>
    <dt>
        command
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">string, Command</span>
    </dt>
    <dd>A command ID or command object</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">!Array.&lt;{{key: string,displayKey: string}}&gt;</span></dt>
    <dd>An array of associated key bindings.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getKeyBindings(command) {
        var bindings    = [],
            commandID   = &quot;&quot;;

        if (!command) {
            console.error(&quot;getKeyBindings(): missing required parameter: command&quot;);
            return [];
        }

        if (typeof (command) === &quot;string&quot;) {
            commandID = command;
        } else {
            commandID = command.getID();
        }

        bindings = _commandMap[commandID];
        return bindings || [];
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        getKeymap 
        <a class="anchor" href="#-getKeymap" id="-getKeymap"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Returns a copy of the current key map. If the optional &#39;defaults&#39; parameter is true,
then a copy of the default key map is returned.</p>
</div>
    
<dl>
    <dt>
        defaults
        <span class="label label-optional">optional</span>
        <span class="label label-info">boolean</span>
    </dt>
    <dd>true if the caller wants a copy of the default key map. Otherwise, the current active key map is returned.</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">!Object.&lt;string,{commandID: string,key: string,displayKey: string}&gt;</span></dt>
    <dd></dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getKeymap(defaults) {
        return $.extend({}, defaults ? _defaultKeyMap : _keyMap);
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        normalizeKeyDescriptorString 
        <a class="anchor" href="#-normalizeKeyDescriptorString" id="-normalizeKeyDescriptorString"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>normalizes the incoming key descriptor so the modifier keys are always specified in the correct order</p>
</div>
    
<dl>
    <dt>
        The
        <span class="label label-info">string</span>
    </dt>
    <dd>string for a key descriptor, can be in any order, the result will be Ctrl-Alt-Shift-<Key></dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">string</span></dt>
    <dd>The normalized key descriptor or null if the descriptor invalid</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function normalizeKeyDescriptorString(origDescriptor) {
        var hasMacCtrl = false,
            hasCtrl = false,
            hasAlt = false,
            hasShift = false,
            key = &quot;&quot;,
            error = false;

        function _compareModifierString(left, right) {
            if (!left || !right) {
                return false;
            }
            left = left.trim().toLowerCase();
            right = right.trim().toLowerCase();

            return (left.length &gt; 0 &amp;&amp; left === right);
        }

        origDescriptor.split(&quot;-&quot;).forEach(function parseDescriptor(ele, i, arr) {
            if (_compareModifierString(&quot;ctrl&quot;, ele)) {
                if (brackets.platform === &quot;mac&quot;) {
                    hasMacCtrl = true;
                } else {
                    hasCtrl = true;
                }
            } else if (_compareModifierString(&quot;cmd&quot;, ele)) {
                if (brackets.platform === &quot;mac&quot;) {
                    hasCtrl = true;
                } else {
                    error = true;
                }
            } else if (_compareModifierString(&quot;alt&quot;, ele)) {
                hasAlt = true;
            } else if (_compareModifierString(&quot;opt&quot;, ele)) {
                if (brackets.platform === &quot;mac&quot;) {
                    hasAlt = true;
                } else {
                    error = true;
                }
            } else if (_compareModifierString(&quot;shift&quot;, ele)) {
                hasShift = true;
            } else if (key.length &gt; 0) {
                console.log(&quot;KeyBindingManager normalizeKeyDescriptorString() - Multiple keys defined. Using key: &quot; + key + &quot; from: &quot; + origDescriptor);
                error = true;
            } else {
                key = ele;
            }
        });

        if (error) {
            return null;
        }

        &#x2F;&#x2F; Check to see if the binding is for &quot;-&quot;.
        if (key === &quot;&quot; &amp;&amp; origDescriptor.search(&#x2F;^.+--$&#x2F;) !== -1) {
            key = &quot;-&quot;;
        }

        &#x2F;&#x2F; &#39;+&#39; char is valid if it&#39;s the only key. Keyboard shortcut strings should use
        &#x2F;&#x2F; unicode characters (unescaped). Keyboard shortcut display strings may use
        &#x2F;&#x2F; unicode escape sequences (e.g. \u20AC euro sign)
        if ((key.indexOf(&quot;+&quot;)) &gt;= 0 &amp;&amp; (key.length &gt; 1)) {
            return null;
        }

        &#x2F;&#x2F; Ensure that the first letter of the key name is in upper case and the rest are
        &#x2F;&#x2F; in lower case. i.e. &#39;a&#39; =&gt; &#39;A&#39; and &#39;up&#39; =&gt; &#39;Up&#39;
        if (&#x2F;^[a-z]&#x2F;i.test(key)) {
            key = _.capitalize(key.toLowerCase());
        }

        &#x2F;&#x2F; Also make sure that the second word of PageUp&#x2F;PageDown has the first letter in upper case.
        if (&#x2F;^Page&#x2F;.test(key)) {
            key = key.replace(&#x2F;(up|down)$&#x2F;, function (match, p1) {
                return _.capitalize(p1);
            });
        }

        &#x2F;&#x2F; No restriction on single character key yet, but other key names are restricted to either
        &#x2F;&#x2F; Function keys or those listed in _keyNames array.
        if (key.length &gt; 1 &amp;&amp; !&#x2F;F\d+&#x2F;.test(key) &amp;&amp;
                _keyNames.indexOf(key) === -1) {
            return null;
        }

        return _buildKeyDescriptor(hasMacCtrl, hasCtrl, hasAlt, hasShift, key);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        removeBinding 
        <a class="anchor" href="#-removeBinding" id="-removeBinding"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Remove a key binding from _keymap</p>
</div>
    
<dl>
    <dt>
        key
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">string</span>
    </dt>
    <dd>a key-description string that may or may not be normalized.</dd>
    <dt>
        platform
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">string</span>
    </dt>
    <dd>OS from which to remove the binding (all platforms if unspecified)</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function removeBinding(key, platform) {
        if (!key || ((platform !== null) &amp;&amp; (platform !== undefined) &amp;&amp; (platform !== brackets.platform))) {
            return;
        }

        var normalizedKey = normalizeKeyDescriptorString(key);

        if (!normalizedKey) {
            console.log(&quot;Failed to normalize &quot; + key);
        } else if (_isKeyAssigned(normalizedKey)) {
            var binding = _keyMap[normalizedKey],
                command = CommandManager.get(binding.commandID),
                bindings = _commandMap[binding.commandID];

            &#x2F;&#x2F; delete key binding record
            delete _keyMap[normalizedKey];

            if (bindings) {
                &#x2F;&#x2F; delete mapping from command to key binding
                _commandMap[binding.commandID] = bindings.filter(function (b) {
                    return (b.key !== normalizedKey);
                });

                if (command) {
                    command.trigger(&quot;keyBindingRemoved&quot;, {key: normalizedKey, displayKey: binding.displayKey});
                }
            }
        }
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        removeGlobalKeydownHook 
        <a class="anchor" href="#-removeGlobalKeydownHook" id="-removeGlobalKeydownHook"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Removes a global keydown hook added by <code>addGlobalKeydownHook</code>.
Does not need to be the most recently added hook.</p>
</div>
    
<dl>
    <dt>
        hook
        <span class="label label-info">function(Event): boolean</span>
    </dt>
    <dd>The global hook to remove.</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function removeGlobalKeydownHook(hook) {
        var index = _globalKeydownHooks.indexOf(hook);
        if (index !== -1) {
            _globalKeydownHooks.splice(index, 1);
        }
    }</code></pre></div>
</section>

        </div>
      </div>
    </div>

    <script type="text/javascript" src="../../assets/js/prism.js"></script>
  </body>
</html>
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>FileSyncManager - Brackets API</title>
    <link rel="stylesheet" href="../../assets/css/bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/typeahead.js-bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/font-awesome.css">
    <link rel="stylesheet" href="../../assets/css/prism.css">
    <link rel="stylesheet" href="../../assets/css/main.css">
    <!--[if IE 7]>
    <link rel="stylesheet" href="../assets/css/font-awesome-ie7.css">
    <![endif]-->
    <script type="text/javascript" src="../../assets/js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../../assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="../../assets/js/typeahead.js"></script>
    <script type="text/javascript" src="../../assets/js/main.js"></script>
    <script src="http://use.edgefonts.net/source-sans-pro:n3,i3,n4,i4;source-code-pro.js"></script>

    <!-- Control the Flash of Unstyled Text (or FOUT) -->
    <style type="text/css">
        .wf-loading h1, .wf-loading h2, .wf-loading h3, .wf-loading h4,
        .wf-loading h5, .wf-loading h6, .wf-loading p, .wf-loading a {
            visibility: hidden;
        }
    </style>
    
    <script>
      window.moduleLevel = "../..";
    </script>
  </head>
  
  <body>
    <div class="row-fluid">
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="../../index.html">Brackets API</a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li><a href="#dependencies">Dependencies</a></li>
                <li><a href="#variables">Variables</a></li>
                <li><a href="#functions">Functions</a></li>
                <li><a href="#classes">Classes</a></li>
              </ul>
            </div>
            <input class="typeahead" placeholder="Search..." type="text" >
          </div>
        </div>
      </div>    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="left-section">
            <h2 class="number-of-modules">Modules (207)</h2>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_"><i class="icon-folder-open"></i>[root]</a>
              </li>
            </ul>
            <ul id="package_" class="nav nav-list">
              <li><a href="../../modules/brackets.html">brackets</a></li>
              <li><a href="../../modules/dependencies.html">dependencies</a></li>
              <li><a href="../../modules/main.html">main</a></li>
              <li><a href="../../modules/strings.html">strings</a></li>
              <li><a href="../../modules/xorigin.html">xorigin</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_command"><i class="icon-folder-open"></i>command</a>
              </li>
            </ul>
            <ul id="package_command" class="nav nav-list">
              <li><a href="../../modules/command/CommandManager.html">CommandManager</a></li>
              <li><a href="../../modules/command/Commands.html">Commands</a></li>
              <li><a href="../../modules/command/DefaultMenus.html">DefaultMenus</a></li>
              <li><a href="../../modules/command/KeyBindingManager.html">KeyBindingManager</a></li>
              <li><a href="../../modules/command/Menus.html">Menus</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_document"><i class="icon-folder-open"></i>document</a>
              </li>
            </ul>
            <ul id="package_document" class="nav nav-list">
              <li><a href="../../modules/document/ChangedDocumentTracker.html">ChangedDocumentTracker</a></li>
              <li><a href="../../modules/document/Document.html">Document</a></li>
              <li><a href="../../modules/document/DocumentCommandHandlers.html">DocumentCommandHandlers</a></li>
              <li><a href="../../modules/document/DocumentManager.html">DocumentManager</a></li>
              <li><a href="../../modules/document/InMemoryFile.html">InMemoryFile</a></li>
              <li><a href="../../modules/document/TextRange.html">TextRange</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_editor"><i class="icon-folder-open"></i>editor</a>
              </li>
            </ul>
            <ul id="package_editor" class="nav nav-list">
              <li><a href="../../modules/editor/CodeHintList.html">CodeHintList</a></li>
              <li><a href="../../modules/editor/CodeHintManager.html">CodeHintManager</a></li>
              <li><a href="../../modules/editor/CSSInlineEditor.html">CSSInlineEditor</a></li>
              <li><a href="../../modules/editor/Editor.html">Editor</a></li>
              <li><a href="../../modules/editor/EditorCommandHandlers.html">EditorCommandHandlers</a></li>
              <li><a href="../../modules/editor/EditorManager.html">EditorManager</a></li>
              <li><a href="../../modules/editor/EditorOptionHandlers.html">EditorOptionHandlers</a></li>
              <li><a href="../../modules/editor/EditorStatusBar.html">EditorStatusBar</a></li>
              <li><a href="../../modules/editor/ImageViewer.html">ImageViewer</a></li>
              <li><a href="../../modules/editor/InlineTextEditor.html">InlineTextEditor</a></li>
              <li><a href="../../modules/editor/InlineWidget.html">InlineWidget</a></li>
              <li><a href="../../modules/editor/MultiRangeInlineEditor.html">MultiRangeInlineEditor</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_extensibility"><i class="icon-folder-open"></i>extensibility</a>
              </li>
            </ul>
            <ul id="package_extensibility" class="nav nav-list">
              <li><a href="../../modules/extensibility/ExtensionManager.html">ExtensionManager</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerDialog.html">ExtensionManagerDialog</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerView.html">ExtensionManagerView</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerViewModel.html">ExtensionManagerViewModel</a></li>
              <li><a href="../../modules/extensibility/InstallExtensionDialog.html">InstallExtensionDialog</a></li>
              <li><a href="../../modules/extensibility/Package.html">Package</a></li>
              <li><a href="../../modules/extensibility/registry_utils.html">registry_utils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_features"><i class="icon-folder-open"></i>features</a>
              </li>
            </ul>
            <ul id="package_features" class="nav nav-list">
              <li><a href="../../modules/features/FindReferencesManager.html">FindReferencesManager</a></li>
              <li><a href="../../modules/features/JumpToDefManager.html">JumpToDefManager</a></li>
              <li><a href="../../modules/features/ParameterHintsManager.html">ParameterHintsManager</a></li>
              <li><a href="../../modules/features/PriorityBasedRegistration.html">PriorityBasedRegistration</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_file"><i class="icon-folder-open"></i>file</a>
              </li>
            </ul>
            <ul id="package_file" class="nav nav-list">
              <li><a href="../../modules/file/FileUtils.html">FileUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem"><i class="icon-folder-open"></i>filesystem</a>
              </li>
            </ul>
            <ul id="package_filesystem" class="nav nav-list">
              <li><a href="../../modules/filesystem/Directory.html">Directory</a></li>
              <li><a href="../../modules/filesystem/File.html">File</a></li>
              <li><a href="../../modules/filesystem/FileIndex.html">FileIndex</a></li>
              <li><a href="../../modules/filesystem/FileSystem.html">FileSystem</a></li>
              <li><a href="../../modules/filesystem/FileSystemEntry.html">FileSystemEntry</a></li>
              <li><a href="../../modules/filesystem/FileSystemError.html">FileSystemError</a></li>
              <li><a href="../../modules/filesystem/FileSystemStats.html">FileSystemStats</a></li>
              <li><a href="../../modules/filesystem/WatchedRoot.html">WatchedRoot</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell"><i class="icon-folder-open"></i>filesystem&#x2F;impls&#x2F;appshell</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/AppshellFileSystem.html">AppshellFileSystem</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell_node"><i class="icon-folder-open"></i>filesystem&#x2F;impls&#x2F;appshell&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell_node" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/node/ChokidarWatcher.html">ChokidarWatcher</a></li>
              <li><a href="../../modules/filesystem/impls/appshell/node/CSharpWatcher.html">CSharpWatcher</a></li>
              <li><a href="../../modules/filesystem/impls/appshell/node/FileWatcherDomain.html">FileWatcherDomain</a></li>
              <li><a href="../../modules/filesystem/impls/appshell/node/FileWatcherManager.html">FileWatcherManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_help"><i class="icon-folder-open"></i>help</a>
              </li>
            </ul>
            <ul id="package_help" class="nav nav-list">
              <li><a href="../../modules/help/HelpCommandHandlers.html">HelpCommandHandlers</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_JSUtils"><i class="icon-folder-open"></i>JSUtils</a>
              </li>
            </ul>
            <ul id="package_JSUtils" class="nav nav-list">
              <li><a href="../../modules/JSUtils/HintUtils.html">HintUtils</a></li>
              <li><a href="../../modules/JSUtils/MessageIds.html">MessageIds</a></li>
              <li><a href="../../modules/JSUtils/Preferences.html">Preferences</a></li>
              <li><a href="../../modules/JSUtils/ScopeManager.html">ScopeManager</a></li>
              <li><a href="../../modules/JSUtils/Session.html">Session</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_JSUtils_node"><i class="icon-folder-open"></i>JSUtils&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_JSUtils_node" class="nav nav-list">
              <li><a href="../../modules/JSUtils/node/ExtractFileContent.html">ExtractFileContent</a></li>
              <li><a href="../../modules/JSUtils/node/TernNodeDomain.html">TernNodeDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_language"><i class="icon-folder-open"></i>language</a>
              </li>
            </ul>
            <ul id="package_language" class="nav nav-list">
              <li><a href="../../modules/language/CodeInspection.html">CodeInspection</a></li>
              <li><a href="../../modules/language/CSSUtils.html">CSSUtils</a></li>
              <li><a href="../../modules/language/HTMLDOMDiff.html">HTMLDOMDiff</a></li>
              <li><a href="../../modules/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../modules/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
              <li><a href="../../modules/language/HTMLTokenizer.html">HTMLTokenizer</a></li>
              <li><a href="../../modules/language/HTMLUtils.html">HTMLUtils</a></li>
              <li><a href="../../modules/language/JSONUtils.html">JSONUtils</a></li>
              <li><a href="../../modules/language/JSUtils.html">JSUtils</a></li>
              <li><a href="../../modules/language/LanguageManager.html">LanguageManager</a></li>
              <li><a href="../../modules/language/XMLUtils.html">XMLUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_languageTools"><i class="icon-folder-open"></i>languageTools</a>
              </li>
            </ul>
            <ul id="package_languageTools" class="nav nav-list">
              <li><a href="../../modules/languageTools/BracketsToNodeInterface.html">BracketsToNodeInterface</a></li>
              <li><a href="../../modules/languageTools/ClientLoader.html">ClientLoader</a></li>
              <li><a href="../../modules/languageTools/DefaultEventHandlers.html">DefaultEventHandlers</a></li>
              <li><a href="../../modules/languageTools/DefaultProviders.html">DefaultProviders</a></li>
              <li><a href="../../modules/languageTools/LanguageClientWrapper.html">LanguageClientWrapper</a></li>
              <li><a href="../../modules/languageTools/LanguageTools.html">LanguageTools</a></li>
              <li><a href="../../modules/languageTools/PathConverters.html">PathConverters</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_languageTools_LanguageClient"><i class="icon-folder-open"></i>languageTools&#x2F;LanguageClient</a>
              </li>
            </ul>
            <ul id="package_languageTools_LanguageClient" class="nav nav-list">
              <li><a href="../../modules/languageTools/LanguageClient/Connection.html">Connection</a></li>
              <li><a href="../../modules/languageTools/LanguageClient/LanguageClient.html">LanguageClient</a></li>
              <li><a href="../../modules/languageTools/LanguageClient/NodeToBracketsInterface.html">NodeToBracketsInterface</a></li>
              <li><a href="../../modules/languageTools/LanguageClient/ProtocolAdapter.html">ProtocolAdapter</a></li>
              <li><a href="../../modules/languageTools/LanguageClient/ServerUtils.html">ServerUtils</a></li>
              <li><a href="../../modules/languageTools/LanguageClient/Utils.html">Utils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_languageTools_node"><i class="icon-folder-open"></i>languageTools&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_languageTools_node" class="nav nav-list">
              <li><a href="../../modules/languageTools/node/RegisterLanguageClientInfo.html">RegisterLanguageClientInfo</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Agents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Agents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Agents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Agents/ConsoleAgent.html">ConsoleAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/CSSAgent.html">CSSAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMAgent.html">DOMAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMHelpers.html">DOMHelpers</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMNode.html">DOMNode</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/EditAgent.html">EditAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/GotoAgent.html">GotoAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/HighlightAgent.html">HighlightAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/NetworkAgent.html">NetworkAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteAgent.html">RemoteAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteFunctions.html">RemoteFunctions</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/ScriptAgent.html">ScriptAgent</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Documents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Documents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Documents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Documents/CSSDocument.html">CSSDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/CSSPreprocessorDocument.html">CSSPreprocessorDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/HTMLDocument.html">HTMLDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/JSDocument.html">JSDocument</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Inspector"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Inspector</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Inspector" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Inspector/Inspector.html">Inspector</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment"><i class="icon-folder-open"></i>LiveDevelopment</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/LiveDevelopment.html">LiveDevelopment</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevelopmentUtils.html">LiveDevelopmentUtils</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevMultiBrowser.html">LiveDevMultiBrowser</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevServerManager.html">LiveDevServerManager</a></li>
              <li><a href="../../modules/LiveDevelopment/main.html">main</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_documents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;documents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_documents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/documents/LiveCSSDocument.html">LiveCSSDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/documents/LiveDocument.html">LiveDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/documents/LiveHTMLDocument.html">LiveHTMLDocument</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_language"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;language</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_language" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_launchers"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;launchers</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_launchers" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/launchers/Launcher.html">Launcher</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_launchers_node"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;launchers&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_launchers_node" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/launchers/node/LauncherDomain.html">LauncherDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_protocol"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;protocol</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_protocol" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/protocol/LiveDevProtocol.html">LiveDevProtocol</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_protocol_remote"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;protocol&#x2F;remote</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_protocol_remote" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/protocol/remote/DocumentObserver.html">DocumentObserver</a></li>
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/protocol/remote/LiveDevProtocolRemote.html">LiveDevProtocolRemote</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_transports_node"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;transports&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_transports_node" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/transports/node/NodeSocketTransportDomain.html">NodeSocketTransportDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_transports"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;transports</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_transports" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/transports/NodeSocketTransport.html">NodeSocketTransport</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_transports_remote"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;transports&#x2F;remote</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_transports_remote" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/transports/remote/NodeSocketTransportRemote.html">NodeSocketTransportRemote</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Servers"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Servers</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Servers" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Servers/BaseServer.html">BaseServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/FileServer.html">FileServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/UserServer.html">UserServer</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_transports_node"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;transports&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_transports_node" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/transports/node/WebSocketTransportDomain.html">WebSocketTransportDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_transports"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;transports</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_transports" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/transports/WebSocketTransport.html">WebSocketTransport</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_preferences"><i class="icon-folder-open"></i>preferences</a>
              </li>
            </ul>
            <ul id="package_preferences" class="nav nav-list">
              <li><a href="../../modules/preferences/PreferencesBase.html">PreferencesBase</a></li>
              <li><a href="../../modules/preferences/PreferencesDialogs.html">PreferencesDialogs</a></li>
              <li><a href="../../modules/preferences/PreferencesImpl.html">PreferencesImpl</a></li>
              <li><a href="../../modules/preferences/PreferencesManager.html">PreferencesManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_project"><i class="icon-folder-open"></i>project</a>
              </li>
            </ul>
            <ul id="package_project" class="nav nav-list">
              <li><a href="../../modules/project/FileSyncManager.html">FileSyncManager</a></li>
              <li><a href="../../modules/project/FileTreeView.html">FileTreeView</a></li>
              <li><a href="../../modules/project/FileTreeViewModel.html">FileTreeViewModel</a></li>
              <li><a href="../../modules/project/FileViewController.html">FileViewController</a></li>
              <li><a href="../../modules/project/ProjectManager.html">ProjectManager</a></li>
              <li><a href="../../modules/project/ProjectModel.html">ProjectModel</a></li>
              <li><a href="../../modules/project/SidebarView.html">SidebarView</a></li>
              <li><a href="../../modules/project/WorkingSetSort.html">WorkingSetSort</a></li>
              <li><a href="../../modules/project/WorkingSetView.html">WorkingSetView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_search"><i class="icon-folder-open"></i>search</a>
              </li>
            </ul>
            <ul id="package_search" class="nav nav-list">
              <li><a href="../../modules/search/FileFilters.html">FileFilters</a></li>
              <li><a href="../../modules/search/FindBar.html">FindBar</a></li>
              <li><a href="../../modules/search/FindInFiles.html">FindInFiles</a></li>
              <li><a href="../../modules/search/FindInFilesUI.html">FindInFilesUI</a></li>
              <li><a href="../../modules/search/FindReplace.html">FindReplace</a></li>
              <li><a href="../../modules/search/FindUtils.html">FindUtils</a></li>
              <li><a href="../../modules/search/QuickOpen.html">QuickOpen</a></li>
              <li><a href="../../modules/search/QuickOpenHelper.html">QuickOpenHelper</a></li>
              <li><a href="../../modules/search/QuickSearchField.html">QuickSearchField</a></li>
              <li><a href="../../modules/search/ScrollTrackMarkers.html">ScrollTrackMarkers</a></li>
              <li><a href="../../modules/search/SearchModel.html">SearchModel</a></li>
              <li><a href="../../modules/search/SearchResultsView.html">SearchResultsView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_search_node"><i class="icon-folder-open"></i>search&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_search_node" class="nav nav-list">
              <li><a href="../../modules/search/node/FindInFilesDomain.html">FindInFilesDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_utils"><i class="icon-folder-open"></i>utils</a>
              </li>
            </ul>
            <ul id="package_utils" class="nav nav-list">
              <li><a href="../../modules/utils/AnimationUtils.html">AnimationUtils</a></li>
              <li><a href="../../modules/utils/AppInit.html">AppInit</a></li>
              <li><a href="../../modules/utils/Async.html">Async</a></li>
              <li><a href="../../modules/utils/BuildInfoUtils.html">BuildInfoUtils</a></li>
              <li><a href="../../modules/utils/ColorUtils.html">ColorUtils</a></li>
              <li><a href="../../modules/utils/Compatibility.html">Compatibility</a></li>
              <li><a href="../../modules/utils/DeprecationWarning.html">DeprecationWarning</a></li>
              <li><a href="../../modules/utils/DragAndDrop.html">DragAndDrop</a></li>
              <li><a href="../../modules/utils/DropdownEventHandler.html">DropdownEventHandler</a></li>
              <li><a href="../../modules/utils/EventDispatcher.html">EventDispatcher</a></li>
              <li><a href="../../modules/utils/ExtensionLoader.html">ExtensionLoader</a></li>
              <li><a href="../../modules/utils/ExtensionUtils.html">ExtensionUtils</a></li>
              <li><a href="../../modules/utils/Global.html">Global</a></li>
              <li><a href="../../modules/utils/HealthLogger.html">HealthLogger</a></li>
              <li><a href="../../modules/utils/KeyEvent.html">KeyEvent</a></li>
              <li><a href="../../modules/utils/LocalizationUtils.html">LocalizationUtils</a></li>
              <li><a href="../../modules/utils/NativeApp.html">NativeApp</a></li>
              <li><a href="../../modules/utils/NodeConnection.html">NodeConnection</a></li>
              <li><a href="../../modules/utils/NodeDomain.html">NodeDomain</a></li>
              <li><a href="../../modules/utils/PerfUtils.html">PerfUtils</a></li>
              <li><a href="../../modules/utils/Resizer.html">Resizer</a></li>
              <li><a href="../../modules/utils/ShellAPI.html">ShellAPI</a></li>
              <li><a href="../../modules/utils/StringMatch.html">StringMatch</a></li>
              <li><a href="../../modules/utils/StringUtils.html">StringUtils</a></li>
              <li><a href="../../modules/utils/TokenUtils.html">TokenUtils</a></li>
              <li><a href="../../modules/utils/UpdateNotification.html">UpdateNotification</a></li>
              <li><a href="../../modules/utils/UrlParams.html">UrlParams</a></li>
              <li><a href="../../modules/utils/ValidationUtils.html">ValidationUtils</a></li>
              <li><a href="../../modules/utils/ViewUtils.html">ViewUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_view"><i class="icon-folder-open"></i>view</a>
              </li>
            </ul>
            <ul id="package_view" class="nav nav-list">
              <li><a href="../../modules/view/MainViewFactory.html">MainViewFactory</a></li>
              <li><a href="../../modules/view/MainViewManager.html">MainViewManager</a></li>
              <li><a href="../../modules/view/Pane.html">Pane</a></li>
              <li><a href="../../modules/view/ThemeManager.html">ThemeManager</a></li>
              <li><a href="../../modules/view/ThemeSettings.html">ThemeSettings</a></li>
              <li><a href="../../modules/view/ThemeView.html">ThemeView</a></li>
              <li><a href="../../modules/view/ViewCommandHandlers.html">ViewCommandHandlers</a></li>
              <li><a href="../../modules/view/ViewStateManager.html">ViewStateManager</a></li>
              <li><a href="../../modules/view/WorkspaceManager.html">WorkspaceManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_widgets"><i class="icon-folder-open"></i>widgets</a>
              </li>
            </ul>
            <ul id="package_widgets" class="nav nav-list">
              <li><a href="../../modules/widgets/bootstrap-alerts.html">bootstrap-alerts</a></li>
              <li><a href="../../modules/widgets/bootstrap-button.html">bootstrap-button</a></li>
              <li><a href="../../modules/widgets/bootstrap-dropdown.html">bootstrap-dropdown</a></li>
              <li><a href="../../modules/widgets/bootstrap-modal.html">bootstrap-modal</a></li>
              <li><a href="../../modules/widgets/bootstrap-popover.html">bootstrap-popover</a></li>
              <li><a href="../../modules/widgets/bootstrap-scrollspy.html">bootstrap-scrollspy</a></li>
              <li><a href="../../modules/widgets/bootstrap-tab.html">bootstrap-tab</a></li>
              <li><a href="../../modules/widgets/bootstrap-tooltip.html">bootstrap-tooltip</a></li>
              <li><a href="../../modules/widgets/bootstrap-twipsy-mod.html">bootstrap-twipsy-mod</a></li>
              <li><a href="../../modules/widgets/DefaultDialogs.html">DefaultDialogs</a></li>
              <li><a href="../../modules/widgets/Dialogs.html">Dialogs</a></li>
              <li><a href="../../modules/widgets/DropdownButton.html">DropdownButton</a></li>
              <li><a href="../../modules/widgets/infobar.html">infobar</a></li>
              <li><a href="../../modules/widgets/InlineMenu.html">InlineMenu</a></li>
              <li><a href="../../modules/widgets/ModalBar.html">ModalBar</a></li>
              <li><a href="../../modules/widgets/PopUpManager.html">PopUpManager</a></li>
              <li><a href="../../modules/widgets/StatusBar.html">StatusBar</a></li>
            </ul>
          </div>
        </div>
        <div class="module span9">
<h1>FileSyncManager</h1>


<section class="description">
    <h3>Description</h3>
    
    <div><p>FileSyncManager is a set of utilities to help track external modifications to the files and folders
in the currently open project.</p>
<p>Currently, we detect external changes purely by checking file timestamps against the last-sync
timestamp recorded on Document. Brackets triggers this check whenever an external change was detected
by our native file watchers, and on window focus. We recheck all open Documents, but with file caching
the timestamp check is a fast no-op for everything other than files where a watcher change was just
notified. If watchers/caching are disabled, we&#39;ll essentially check only on window focus, and we&#39;ll hit
the disk to check every open Document&#39;s timestamp every time.</p>
<p>FUTURE: Whenever we have a &#39;project file tree model,&#39; we should manipulate that instead of notifying
DocumentManager directly. DocumentManager, the tree UI, etc. then all listen to that model for changes.</p>
</div>
    
</section>

<section id="dependencies">
    <h3>Dependencies</h3>

    <ul class="nav nav-list">
        <li><a href="..&#x2F;../modules/utils/Async.html">Async</a></li>
        <li><a href="..&#x2F;../modules/widgets/DefaultDialogs.html">DefaultDialogs</a></li>
        <li><a href="..&#x2F;../modules/widgets/Dialogs.html">Dialogs</a></li>
        <li><a href="..&#x2F;../modules/document/DocumentManager.html">DocumentManager</a></li>
        <li><a href="..&#x2F;../modules/filesystem/FileSystemError.html">FileSystemError</a></li>
        <li><a href="..&#x2F;../modules/file/FileUtils.html">FileUtils</a></li>
        <li><a href="..&#x2F;../modules/view/MainViewManager.html">MainViewManager</a></li>
        <li><a href="..&#x2F;../modules/project/ProjectManager.html">ProjectManager</a></li>
        <li><a href="..&#x2F;../modules/strings.html">strings</a></li>
        <li><a href="..&#x2F;../modules/utils/StringUtils.html">StringUtils</a></li>
    </ul>

</section>
<section id="variables">
    
    <h3>Variables 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>    </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _alreadyChecking 
        <a class="anchor" href="#-_alreadyChecking" id="-_alreadyChecking"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Guard to spot re-entrancy while syncOpenDocuments() is still in progress</p>
</div>
    
<dl>
    <dt>Type</dt>
    <dd>boolean</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _alreadyChecking = false;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _restartPending 
        <a class="anchor" href="#-_restartPending" id="-_restartPending"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>If true, we should bail from the syncOpenDocuments() process and then re-run it. See
comments in syncOpenDocuments() for how this works.</p>
</div>
    
<dl>
    <dt>Type</dt>
    <dd>boolean</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _restartPending = false;</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        deleteConflicts 
        <a class="anchor" href="#-deleteConflicts" id="-deleteConflicts"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>Array.&lt;{doc: Document, fileTime: number}&gt;</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var deleteConflicts;</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        editConflicts 
        <a class="anchor" href="#-editConflicts" id="-editConflicts"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>Array.&lt;{doc: Document, fileTime: number}&gt;</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var editConflicts;</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        toClose 
        <a class="anchor" href="#-toClose" id="-toClose"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>Array.&lt;Document&gt;</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var toClose;</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        toReload 
        <a class="anchor" href="#-toReload" id="-toReload"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Type</dt>
    <dd>Array.&lt;Document&gt;</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var toReload;</code></pre></div>
</section>

<section id="functions">

    <h3>Functions 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>    </h3>

<div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        closeDeletedDocs 
        <a class="anchor" href="#-closeDeletedDocs" id="-closeDeletedDocs"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Closes all the documents in &quot;toClose&quot; silently (no prompts). Completes synchronously.</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function closeDeletedDocs() {
        toClose.forEach(function (doc) {
            DocumentManager.notifyFileDeleted(doc.file);
        });
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        findExternalChanges 
        <a class="anchor" href="#-findExternalChanges" id="-findExternalChanges"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Scans all the given Documents for changes on disk, and sorts them into four buckets,
populating the corresponding arrays:
 toReload        - changed on disk; unchanged within Brackets
 toClose         - deleted on disk; unchanged within Brackets
 editConflicts   - changed on disk; also dirty in Brackets
 deleteConflicts - deleted on disk; also dirty in Brackets</p>
</div>
    
<dl>
    <dt>
        docs
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">Array.&lt;Document&gt;</span>
    </dt>
    <dd></dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">$.Promise</span></dt>
    <dd>Resolved when all scanning done, or rejected immediately if there's any error while reading file timestamps. Errors are logged but no UI is shown.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function findExternalChanges(docs) {

        toReload = [];
        toClose = [];
        editConflicts = [];
        deleteConflicts = [];

        function checkDoc(doc) {
            var result = new $.Deferred();

            &#x2F;&#x2F; Check file timestamp &#x2F; existence

            if (doc.isUntitled()) {
                result.resolve();
            } else if (doc.file.donotWatch) { &#x2F;&#x2F; Some file might not like to be watched!
                result.resolve();
            } else {
                doc.file.stat(function (err, stat) {
                    if (!err) {
                        &#x2F;&#x2F; Does file&#39;s timestamp differ from last sync time on the Document?
                        var fileTime = stat.mtime.getTime();
                        if (fileTime !== doc.diskTimestamp.getTime()) {
                            &#x2F;&#x2F; If the user has chosen to keep changes that conflict with the
                            &#x2F;&#x2F; current state of the file on disk, then do nothing. This means
                            &#x2F;&#x2F; that even if the user later undoes back to clean, we won&#39;t
                            &#x2F;&#x2F; automatically reload the file on window reactivation. We could
                            &#x2F;&#x2F; make it do that, but it seems better to be consistent with the
                            &#x2F;&#x2F; deletion case below, where it seems clear that you don&#39;t want
                            &#x2F;&#x2F; to auto-delete the file on window reactivation just because you
                            &#x2F;&#x2F; undid back to clean.
                            if (doc.keepChangesTime !== fileTime) {
                                if (doc.isDirty) {
                                    editConflicts.push({doc: doc, fileTime: fileTime});
                                } else {
                                    toReload.push(doc);
                                }
                            }
                        }
                        result.resolve();
                    } else {
                        &#x2F;&#x2F; File has been deleted externally
                        if (err === FileSystemError.NOT_FOUND) {
                            &#x2F;&#x2F; If the user has chosen to keep changes previously, and the file
                            &#x2F;&#x2F; has been deleted, then do nothing. Like the case above, this
                            &#x2F;&#x2F; means that even if the user later undoes back to clean, we won&#39;t
                            &#x2F;&#x2F; then automatically delete the file on window reactivation.
                            &#x2F;&#x2F; (We use -1 as the &quot;mod time&quot; to indicate that the file didn&#39;t
                            &#x2F;&#x2F; exist, since there&#39;s no actual modification time to keep track of
                            &#x2F;&#x2F; and -1 isn&#39;t a valid mod time for a real file.)
                            if (doc.keepChangesTime !== -1) {
                                if (doc.isDirty) {
                                    deleteConflicts.push({doc: doc, fileTime: -1});
                                } else {
                                    toClose.push(doc);
                                }
                            }
                            result.resolve();
                        } else {
                            &#x2F;&#x2F; Some other error fetching metadata: treat as a real error
                            console.log(&quot;Error checking modification status of &quot; + doc.file.fullPath, err);
                            result.reject();
                        }
                    }
                });
            }

            return result.promise();
        }

        &#x2F;&#x2F; Check all docs in parallel
        &#x2F;&#x2F; (fail fast b&#x2F;c we won&#39;t continue syncing if there was any error fetching timestamps)
        return Async.doInParallel(docs, checkDoc, true);
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        presentConflicts 
        <a class="anchor" href="#-presentConflicts" id="-presentConflicts"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Walks through all the documents in &quot;editConflicts&quot; &amp; &quot;deleteConflicts&quot; and prompts the user
about each one. Processing is sequential: if the user chooses to reload a document, the next
prompt is not shown until after the reload has completed.</p>
</div>
    
<dl>
    <dt>
        title
        <span class="label label-info">string</span>
    </dt>
    <dd>Title of the dialog.</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">$.Promise</span></dt>
    <dd>Resolved/rejected after all documents have been prompted and (if applicable) reloaded (and any resulting error UI has been dismissed). Rejected if any one reload failed.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function presentConflicts(title) {

        var allConflicts = editConflicts.concat(deleteConflicts);

        function presentConflict(docInfo, i) {
            var result = new $.Deferred(),
                promise = result.promise(),
                doc = docInfo.doc,
                fileTime = docInfo.fileTime;

            &#x2F;&#x2F; If window has been re-focused, skip all remaining conflicts so the sync can bail &amp; restart
            if (_restartPending) {
                result.resolve();
                return promise;
            }

            var toClose;
            var dialogId;
            var message;
            var buttons;

            &#x2F;&#x2F; Prompt UI varies depending on whether the file on disk was modified vs. deleted
            if (i &lt; editConflicts.length) {
                toClose = false;
                dialogId = DefaultDialogs.DIALOG_ID_EXT_CHANGED;
                message = StringUtils.format(
                    Strings.EXT_MODIFIED_MESSAGE,
                    StringUtils.breakableUrl(
                        ProjectManager.makeProjectRelativeIfPossible(doc.file.fullPath)
                    )
                );
                buttons = [
                    {
                        className: Dialogs.DIALOG_BTN_CLASS_LEFT,
                        id:        Dialogs.DIALOG_BTN_DONTSAVE,
                        text:      Strings.RELOAD_FROM_DISK
                    },
                    {
                        className: Dialogs.DIALOG_BTN_CLASS_PRIMARY,
                        id:        Dialogs.DIALOG_BTN_CANCEL,
                        text:      Strings.KEEP_CHANGES_IN_EDITOR
                    }
                ];

            } else {
                toClose = true;
                dialogId = DefaultDialogs.DIALOG_ID_EXT_DELETED;
                message = StringUtils.format(
                    Strings.EXT_DELETED_MESSAGE,
                    StringUtils.breakableUrl(
                        ProjectManager.makeProjectRelativeIfPossible(doc.file.fullPath)
                    )
                );
                buttons = [
                    {
                        className: Dialogs.DIALOG_BTN_CLASS_LEFT,
                        id:        Dialogs.DIALOG_BTN_DONTSAVE,
                        text:      Strings.CLOSE_DONT_SAVE
                    },
                    {
                        className: Dialogs.DIALOG_BTN_CLASS_PRIMARY,
                        id:        Dialogs.DIALOG_BTN_CANCEL,
                        text:      Strings.KEEP_CHANGES_IN_EDITOR
                    }
                ];
            }

            Dialogs.showModalDialog(dialogId, title, message, buttons)
                .done(function (id) {
                    if (id === Dialogs.DIALOG_BTN_DONTSAVE) {
                        if (toClose) {
                            &#x2F;&#x2F; Discard - close all editors
                            DocumentManager.notifyFileDeleted(doc.file);
                            result.resolve();
                        } else {
                            &#x2F;&#x2F; Discard - load changes from disk
                            reloadDoc(doc)
                                .done(function () {
                                    result.resolve();
                                })
                                .fail(function (error) {
                                    &#x2F;&#x2F; Unable to load changed version from disk - show error UI
                                    showReloadError(error, doc)
                                        .done(function () {
                                            &#x2F;&#x2F; After user dismisses, move on to next conflict prompt
                                            result.reject();
                                        });
                                });
                        }

                    } else {
                        &#x2F;&#x2F; Cancel - if user doesn&#39;t manually save or close, remember that they
                        &#x2F;&#x2F; chose to keep the changes in the editor and don&#39;t prompt again unless the
                        &#x2F;&#x2F; file changes again
                        &#x2F;&#x2F; OR programmatically canceled due to _resetPending - we&#39;ll skip all
                        &#x2F;&#x2F; remaining files in the conflicts list (see above)

                        &#x2F;&#x2F; If this wasn&#39;t programmatically cancelled, remember that the user
                        &#x2F;&#x2F; has accepted conflicting changes as of this file version.
                        if (!_restartPending) {
                            doc.keepChangesTime = fileTime;
                        }

                        result.resolve();
                    }
                });

            return promise;
        }

        &#x2F;&#x2F; Begin walking through the conflicts, one at a time
        return Async.doSequentially(allConflicts, presentConflict, false);
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        reloadChangedDocs 
        <a class="anchor" href="#-reloadChangedDocs" id="-reloadChangedDocs"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Reloads all the documents in &quot;toReload&quot; silently (no prompts). The operations are all run
in parallel.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">$.Promise</span></dt>
    <dd>Resolved/rejected after all reloads done; will be rejected if any one file's reload failed. Errors are logged (by reloadDoc()) but no UI is shown.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function reloadChangedDocs() {
        &#x2F;&#x2F; Reload each doc in turn, and once all are (async) done, signal that we&#39;re done
        return Async.doInParallel(toReload, reloadDoc, false);
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        reloadDoc 
        <a class="anchor" href="#-reloadDoc" id="-reloadDoc"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Reloads the Document&#39;s contents from disk, discarding any unsaved changes in the editor.</p>
</div>
    
<dl>
    <dt>
        doc
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">Document</span>
    </dt>
    <dd></dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">$.Promise</span></dt>
    <dd>Resolved after editor has been refreshed; rejected if unable to load the file's new content. Errors are logged but no UI is shown.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function reloadDoc(doc) {

        var promise = FileUtils.readAsText(doc.file);

        promise.done(function (text, readTimestamp) {
            doc.refreshText(text, readTimestamp);
        });
        promise.fail(function (error) {
            console.log(&quot;Error reloading contents of &quot; + doc.file.fullPath, error);
        });
        return promise;
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        showReloadError 
        <a class="anchor" href="#-showReloadError" id="-showReloadError"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        error
        <span class="label label-info">FileError</span>
    </dt>
    <dd></dd>
    <dt>
        doc
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">Document</span>
    </dt>
    <dd></dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">Dialog</span></dt>
    <dd></dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function showReloadError(error, doc) {
        return Dialogs.showModalDialog(
            DefaultDialogs.DIALOG_ID_ERROR,
            Strings.ERROR_RELOADING_FILE_TITLE,
            StringUtils.format(
                Strings.ERROR_RELOADING_FILE,
                StringUtils.breakableUrl(doc.file.fullPath),
                FileUtils.getFileErrorString(error)
            )
        );
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        syncOpenDocuments 
        <a class="anchor" href="#-syncOpenDocuments" id="-syncOpenDocuments"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Check to see whether any open files have been modified by an external app since the last time
Brackets synced up with the copy on disk (either by loading or saving the file). For clean
files, we silently upate the editor automatically. For files with unsaved changes, we prompt
the user.</p>
</div>
    
<dl>
    <dt>
        title
        <span class="label label-info">string</span>
    </dt>
    <dd>Title to use for document. Default is "External Changes".</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function syncOpenDocuments(title) {

        title = title || Strings.EXT_MODIFIED_TITLE;

        &#x2F;&#x2F; We can become &quot;re-entrant&quot; if the user leaves &amp; then returns to Brackets before we&#39;re
        &#x2F;&#x2F; done -- easy if a prompt dialog is left open. Since the user may have left Brackets to
        &#x2F;&#x2F; revert some of the disk changes, etc. we want to cancel the current sync and immediately
        &#x2F;&#x2F; begin a new one. We let the orig sync run until the user-visible dialog phase, then
        &#x2F;&#x2F; bail; if we&#39;re already there we programmatically close the dialog to bail right away.
        if (_alreadyChecking) {
            _restartPending = true;

            &#x2F;&#x2F; Close dialog if it was open. This will &#39;unblock&#39; presentConflict(), which bails back
            &#x2F;&#x2F; to us immediately upon seeing _restartPending. We then restart the sync - see below
            Dialogs.cancelModalDialogIfOpen(DefaultDialogs.DIALOG_ID_EXT_CHANGED);
            Dialogs.cancelModalDialogIfOpen(DefaultDialogs.DIALOG_ID_EXT_DELETED);

            return;
        }

        _alreadyChecking = true;


        &#x2F;&#x2F; Syncing proceeds in four phases:
        &#x2F;&#x2F;  1) Check all open files for external modifications
        &#x2F;&#x2F;  2) Check any other working set entries (that are not open) for deletion, and remove
        &#x2F;&#x2F;     from working set if deleted
        &#x2F;&#x2F;  3) Refresh all Documents that are clean (if file changed on disk)
        &#x2F;&#x2F;  4) Close all Documents that are clean (if file deleted on disk)
        &#x2F;&#x2F;  5) Prompt about any Documents that are dirty (if file changed&#x2F;deleted on disk)
        &#x2F;&#x2F; Each phase fully completes (asynchronously) before the next one begins.


        &#x2F;&#x2F; 1) Check for external modifications
        var allDocs = DocumentManager.getAllOpenDocuments();

        findExternalChanges(allDocs)
            .done(function () {
                &#x2F;&#x2F; 2) Check un-open working set entries for deletion (&amp; &quot;close&quot; if needed)
                syncUnopenWorkingSet()
                    .always(function () {
                        &#x2F;&#x2F; If we were unable to check any un-open files for deletion, silently ignore
                        &#x2F;&#x2F; (after logging to console). This doesn&#39;t have any bearing on syncing truly
                        &#x2F;&#x2F; open Documents (which we&#39;ve already successfully checked).

                        &#x2F;&#x2F; 3) Reload clean docs as needed
                        reloadChangedDocs()
                            .always(function () {
                                &#x2F;&#x2F; 4) Close clean docs as needed
                                &#x2F;&#x2F; This phase completes synchronously
                                closeDeletedDocs();

                                &#x2F;&#x2F; 5) Prompt for dirty editors (conflicts)
                                presentConflicts(title)
                                    .always(function () {
                                        if (_restartPending) {
                                            &#x2F;&#x2F; Restart the sync if needed
                                            _restartPending = false;
                                            _alreadyChecking = false;
                                            syncOpenDocuments();
                                        } else {
                                            &#x2F;&#x2F; We&#39;re really done!
                                            _alreadyChecking = false;

                                            &#x2F;&#x2F; If we showed a dialog, restore focus to editor
                                            if (editConflicts.length &gt; 0 || deleteConflicts.length &gt; 0) {
                                                MainViewManager.focusActivePane();
                                            }

                                            &#x2F;&#x2F; (Any errors that ocurred during presentConflicts() have already
                                            &#x2F;&#x2F; shown UI &amp; been dismissed, so there&#39;s no fail() handler here)
                                        }
                                    });
                            });
                            &#x2F;&#x2F; Note: if any auto-reloads failed, we silently ignore (after logging to console)
                            &#x2F;&#x2F; and we still continue onto phase 4 and try to process those files anyway.
                            &#x2F;&#x2F; (We&#39;ll retry the auto-reloads next time window is activated... and evenually
                            &#x2F;&#x2F; we&#39;ll also be double checking before each Save).
                    });
            }).fail(function () {
                &#x2F;&#x2F; Unable to fetch timestamps for some reason - silently ignore (after logging to console)
                &#x2F;&#x2F; (We&#39;ll retry next time window is activated... and evenually we&#39;ll also be double
                &#x2F;&#x2F; checking before each Save).

                &#x2F;&#x2F; We can&#39;t go on without knowing which files are dirty, so bail now
                _alreadyChecking = false;
            });

    }


    &#x2F;&#x2F; Define public API
    exports.syncOpenDocuments = syncOpenDocuments;
});</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        syncUnopenWorkingSet 
        <a class="anchor" href="#-syncUnopenWorkingSet" id="-syncUnopenWorkingSet"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Scans all the files in the working set that do not have Documents (and thus were not scanned
by findExternalChanges()). If any were deleted on disk, removes them from the working set.</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function syncUnopenWorkingSet() {
        &#x2F;&#x2F; We only care about working set entries that have never been open (have no Document).
        var unopenWorkingSetFiles = MainViewManager.getWorkingSet(MainViewManager.ALL_PANES).filter(function (wsFile) {
            return !DocumentManager.getOpenDocumentForPath(wsFile.fullPath);
        });

        function checkWorkingSetFile(file) {
            var result = new $.Deferred();

            file.stat(function (err, stat) {
                if (!err) {
                    &#x2F;&#x2F; File still exists
                    result.resolve();
                } else {
                    &#x2F;&#x2F; File has been deleted externally
                    if (err === FileSystemError.NOT_FOUND) {
                        DocumentManager.notifyFileDeleted(file);
                        result.resolve();
                    } else {
                        &#x2F;&#x2F; Some other error fetching metadata: treat as a real error
                        console.log(&quot;Error checking for deletion of &quot; + file.fullPath, err);
                        result.reject();
                    }
                }
            });
            return result.promise();
        }

        &#x2F;&#x2F; Check all these files in parallel
        return Async.doInParallel(unopenWorkingSetFiles, checkWorkingSetFile, false);
    }</code></pre></div>
</section>

        </div>
      </div>
    </div>

    <script type="text/javascript" src="../../assets/js/prism.js"></script>
  </body>
</html>
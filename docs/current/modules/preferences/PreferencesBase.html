<!DOCTYPE html>
<html lang="en">
  <head>
    <title>PreferencesBase - Brackets API</title>
    <link rel="stylesheet" href="../../assets/css/bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/typeahead.js-bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/font-awesome.css">
    <link rel="stylesheet" href="../../assets/css/prism.css">
    <link rel="stylesheet" href="../../assets/css/main.css">
    <!--[if IE 7]>
    <link rel="stylesheet" href="../assets/css/font-awesome-ie7.css">
    <![endif]-->
    <script type="text/javascript" src="../../assets/js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../../assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="../../assets/js/typeahead.js"></script>
    <script type="text/javascript" src="../../assets/js/main.js"></script>
    <script src="http://use.edgefonts.net/source-sans-pro:n3,i3,n4,i4;source-code-pro.js"></script>

    <!-- Control the Flash of Unstyled Text (or FOUT) -->
    <style type="text/css">
        .wf-loading h1, .wf-loading h2, .wf-loading h3, .wf-loading h4,
        .wf-loading h5, .wf-loading h6, .wf-loading p, .wf-loading a {
            visibility: hidden;
        }
    </style>
    
    <script>
      window.moduleLevel = "../..";
    </script>
  </head>
  
  <body>
    <div class="row-fluid">
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="../../index.html">Brackets API</a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li><a href="#dependencies">Dependencies</a></li>
                <li><a href="#variables">Variables</a></li>
                <li><a href="#functions">Functions</a></li>
                <li><a href="#classes">Classes</a></li>
              </ul>
            </div>
            <input class="typeahead" placeholder="Search..." type="text" >
          </div>
        </div>
      </div>    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="left-section">
            <h2 class="number-of-modules">Modules (207)</h2>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_"><i class="icon-folder-open"></i>[root]</a>
              </li>
            </ul>
            <ul id="package_" class="nav nav-list">
              <li><a href="../../modules/brackets.html">brackets</a></li>
              <li><a href="../../modules/dependencies.html">dependencies</a></li>
              <li><a href="../../modules/main.html">main</a></li>
              <li><a href="../../modules/strings.html">strings</a></li>
              <li><a href="../../modules/xorigin.html">xorigin</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_command"><i class="icon-folder-open"></i>command</a>
              </li>
            </ul>
            <ul id="package_command" class="nav nav-list">
              <li><a href="../../modules/command/CommandManager.html">CommandManager</a></li>
              <li><a href="../../modules/command/Commands.html">Commands</a></li>
              <li><a href="../../modules/command/DefaultMenus.html">DefaultMenus</a></li>
              <li><a href="../../modules/command/KeyBindingManager.html">KeyBindingManager</a></li>
              <li><a href="../../modules/command/Menus.html">Menus</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_document"><i class="icon-folder-open"></i>document</a>
              </li>
            </ul>
            <ul id="package_document" class="nav nav-list">
              <li><a href="../../modules/document/ChangedDocumentTracker.html">ChangedDocumentTracker</a></li>
              <li><a href="../../modules/document/Document.html">Document</a></li>
              <li><a href="../../modules/document/DocumentCommandHandlers.html">DocumentCommandHandlers</a></li>
              <li><a href="../../modules/document/DocumentManager.html">DocumentManager</a></li>
              <li><a href="../../modules/document/InMemoryFile.html">InMemoryFile</a></li>
              <li><a href="../../modules/document/TextRange.html">TextRange</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_editor"><i class="icon-folder-open"></i>editor</a>
              </li>
            </ul>
            <ul id="package_editor" class="nav nav-list">
              <li><a href="../../modules/editor/CodeHintList.html">CodeHintList</a></li>
              <li><a href="../../modules/editor/CodeHintManager.html">CodeHintManager</a></li>
              <li><a href="../../modules/editor/CSSInlineEditor.html">CSSInlineEditor</a></li>
              <li><a href="../../modules/editor/Editor.html">Editor</a></li>
              <li><a href="../../modules/editor/EditorCommandHandlers.html">EditorCommandHandlers</a></li>
              <li><a href="../../modules/editor/EditorManager.html">EditorManager</a></li>
              <li><a href="../../modules/editor/EditorOptionHandlers.html">EditorOptionHandlers</a></li>
              <li><a href="../../modules/editor/EditorStatusBar.html">EditorStatusBar</a></li>
              <li><a href="../../modules/editor/ImageViewer.html">ImageViewer</a></li>
              <li><a href="../../modules/editor/InlineTextEditor.html">InlineTextEditor</a></li>
              <li><a href="../../modules/editor/InlineWidget.html">InlineWidget</a></li>
              <li><a href="../../modules/editor/MultiRangeInlineEditor.html">MultiRangeInlineEditor</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_extensibility"><i class="icon-folder-open"></i>extensibility</a>
              </li>
            </ul>
            <ul id="package_extensibility" class="nav nav-list">
              <li><a href="../../modules/extensibility/ExtensionManager.html">ExtensionManager</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerDialog.html">ExtensionManagerDialog</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerView.html">ExtensionManagerView</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerViewModel.html">ExtensionManagerViewModel</a></li>
              <li><a href="../../modules/extensibility/InstallExtensionDialog.html">InstallExtensionDialog</a></li>
              <li><a href="../../modules/extensibility/Package.html">Package</a></li>
              <li><a href="../../modules/extensibility/registry_utils.html">registry_utils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_features"><i class="icon-folder-open"></i>features</a>
              </li>
            </ul>
            <ul id="package_features" class="nav nav-list">
              <li><a href="../../modules/features/FindReferencesManager.html">FindReferencesManager</a></li>
              <li><a href="../../modules/features/JumpToDefManager.html">JumpToDefManager</a></li>
              <li><a href="../../modules/features/ParameterHintsManager.html">ParameterHintsManager</a></li>
              <li><a href="../../modules/features/PriorityBasedRegistration.html">PriorityBasedRegistration</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_file"><i class="icon-folder-open"></i>file</a>
              </li>
            </ul>
            <ul id="package_file" class="nav nav-list">
              <li><a href="../../modules/file/FileUtils.html">FileUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem"><i class="icon-folder-open"></i>filesystem</a>
              </li>
            </ul>
            <ul id="package_filesystem" class="nav nav-list">
              <li><a href="../../modules/filesystem/Directory.html">Directory</a></li>
              <li><a href="../../modules/filesystem/File.html">File</a></li>
              <li><a href="../../modules/filesystem/FileIndex.html">FileIndex</a></li>
              <li><a href="../../modules/filesystem/FileSystem.html">FileSystem</a></li>
              <li><a href="../../modules/filesystem/FileSystemEntry.html">FileSystemEntry</a></li>
              <li><a href="../../modules/filesystem/FileSystemError.html">FileSystemError</a></li>
              <li><a href="../../modules/filesystem/FileSystemStats.html">FileSystemStats</a></li>
              <li><a href="../../modules/filesystem/WatchedRoot.html">WatchedRoot</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell"><i class="icon-folder-open"></i>filesystem&#x2F;impls&#x2F;appshell</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/AppshellFileSystem.html">AppshellFileSystem</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell_node"><i class="icon-folder-open"></i>filesystem&#x2F;impls&#x2F;appshell&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell_node" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/node/ChokidarWatcher.html">ChokidarWatcher</a></li>
              <li><a href="../../modules/filesystem/impls/appshell/node/CSharpWatcher.html">CSharpWatcher</a></li>
              <li><a href="../../modules/filesystem/impls/appshell/node/FileWatcherDomain.html">FileWatcherDomain</a></li>
              <li><a href="../../modules/filesystem/impls/appshell/node/FileWatcherManager.html">FileWatcherManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_help"><i class="icon-folder-open"></i>help</a>
              </li>
            </ul>
            <ul id="package_help" class="nav nav-list">
              <li><a href="../../modules/help/HelpCommandHandlers.html">HelpCommandHandlers</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_JSUtils"><i class="icon-folder-open"></i>JSUtils</a>
              </li>
            </ul>
            <ul id="package_JSUtils" class="nav nav-list">
              <li><a href="../../modules/JSUtils/HintUtils.html">HintUtils</a></li>
              <li><a href="../../modules/JSUtils/MessageIds.html">MessageIds</a></li>
              <li><a href="../../modules/JSUtils/Preferences.html">Preferences</a></li>
              <li><a href="../../modules/JSUtils/ScopeManager.html">ScopeManager</a></li>
              <li><a href="../../modules/JSUtils/Session.html">Session</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_JSUtils_node"><i class="icon-folder-open"></i>JSUtils&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_JSUtils_node" class="nav nav-list">
              <li><a href="../../modules/JSUtils/node/ExtractFileContent.html">ExtractFileContent</a></li>
              <li><a href="../../modules/JSUtils/node/TernNodeDomain.html">TernNodeDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_language"><i class="icon-folder-open"></i>language</a>
              </li>
            </ul>
            <ul id="package_language" class="nav nav-list">
              <li><a href="../../modules/language/CodeInspection.html">CodeInspection</a></li>
              <li><a href="../../modules/language/CSSUtils.html">CSSUtils</a></li>
              <li><a href="../../modules/language/HTMLDOMDiff.html">HTMLDOMDiff</a></li>
              <li><a href="../../modules/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../modules/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
              <li><a href="../../modules/language/HTMLTokenizer.html">HTMLTokenizer</a></li>
              <li><a href="../../modules/language/HTMLUtils.html">HTMLUtils</a></li>
              <li><a href="../../modules/language/JSONUtils.html">JSONUtils</a></li>
              <li><a href="../../modules/language/JSUtils.html">JSUtils</a></li>
              <li><a href="../../modules/language/LanguageManager.html">LanguageManager</a></li>
              <li><a href="../../modules/language/XMLUtils.html">XMLUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_languageTools"><i class="icon-folder-open"></i>languageTools</a>
              </li>
            </ul>
            <ul id="package_languageTools" class="nav nav-list">
              <li><a href="../../modules/languageTools/BracketsToNodeInterface.html">BracketsToNodeInterface</a></li>
              <li><a href="../../modules/languageTools/ClientLoader.html">ClientLoader</a></li>
              <li><a href="../../modules/languageTools/DefaultEventHandlers.html">DefaultEventHandlers</a></li>
              <li><a href="../../modules/languageTools/DefaultProviders.html">DefaultProviders</a></li>
              <li><a href="../../modules/languageTools/LanguageClientWrapper.html">LanguageClientWrapper</a></li>
              <li><a href="../../modules/languageTools/LanguageTools.html">LanguageTools</a></li>
              <li><a href="../../modules/languageTools/PathConverters.html">PathConverters</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_languageTools_LanguageClient"><i class="icon-folder-open"></i>languageTools&#x2F;LanguageClient</a>
              </li>
            </ul>
            <ul id="package_languageTools_LanguageClient" class="nav nav-list">
              <li><a href="../../modules/languageTools/LanguageClient/Connection.html">Connection</a></li>
              <li><a href="../../modules/languageTools/LanguageClient/LanguageClient.html">LanguageClient</a></li>
              <li><a href="../../modules/languageTools/LanguageClient/NodeToBracketsInterface.html">NodeToBracketsInterface</a></li>
              <li><a href="../../modules/languageTools/LanguageClient/ProtocolAdapter.html">ProtocolAdapter</a></li>
              <li><a href="../../modules/languageTools/LanguageClient/ServerUtils.html">ServerUtils</a></li>
              <li><a href="../../modules/languageTools/LanguageClient/Utils.html">Utils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_languageTools_node"><i class="icon-folder-open"></i>languageTools&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_languageTools_node" class="nav nav-list">
              <li><a href="../../modules/languageTools/node/RegisterLanguageClientInfo.html">RegisterLanguageClientInfo</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Agents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Agents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Agents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Agents/ConsoleAgent.html">ConsoleAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/CSSAgent.html">CSSAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMAgent.html">DOMAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMHelpers.html">DOMHelpers</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMNode.html">DOMNode</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/EditAgent.html">EditAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/GotoAgent.html">GotoAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/HighlightAgent.html">HighlightAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/NetworkAgent.html">NetworkAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteAgent.html">RemoteAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteFunctions.html">RemoteFunctions</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/ScriptAgent.html">ScriptAgent</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Documents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Documents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Documents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Documents/CSSDocument.html">CSSDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/CSSPreprocessorDocument.html">CSSPreprocessorDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/HTMLDocument.html">HTMLDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/JSDocument.html">JSDocument</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Inspector"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Inspector</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Inspector" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Inspector/Inspector.html">Inspector</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment"><i class="icon-folder-open"></i>LiveDevelopment</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/LiveDevelopment.html">LiveDevelopment</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevelopmentUtils.html">LiveDevelopmentUtils</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevMultiBrowser.html">LiveDevMultiBrowser</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevServerManager.html">LiveDevServerManager</a></li>
              <li><a href="../../modules/LiveDevelopment/main.html">main</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_documents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;documents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_documents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/documents/LiveCSSDocument.html">LiveCSSDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/documents/LiveDocument.html">LiveDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/documents/LiveHTMLDocument.html">LiveHTMLDocument</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_language"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;language</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_language" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_launchers"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;launchers</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_launchers" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/launchers/Launcher.html">Launcher</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_launchers_node"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;launchers&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_launchers_node" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/launchers/node/LauncherDomain.html">LauncherDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_protocol"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;protocol</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_protocol" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/protocol/LiveDevProtocol.html">LiveDevProtocol</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_protocol_remote"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;protocol&#x2F;remote</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_protocol_remote" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/protocol/remote/DocumentObserver.html">DocumentObserver</a></li>
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/protocol/remote/LiveDevProtocolRemote.html">LiveDevProtocolRemote</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_transports_node"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;transports&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_transports_node" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/transports/node/NodeSocketTransportDomain.html">NodeSocketTransportDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_transports"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;transports</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_transports" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/transports/NodeSocketTransport.html">NodeSocketTransport</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_transports_remote"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;transports&#x2F;remote</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_transports_remote" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/transports/remote/NodeSocketTransportRemote.html">NodeSocketTransportRemote</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Servers"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Servers</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Servers" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Servers/BaseServer.html">BaseServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/FileServer.html">FileServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/UserServer.html">UserServer</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_transports_node"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;transports&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_transports_node" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/transports/node/WebSocketTransportDomain.html">WebSocketTransportDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_transports"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;transports</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_transports" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/transports/WebSocketTransport.html">WebSocketTransport</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_preferences"><i class="icon-folder-open"></i>preferences</a>
              </li>
            </ul>
            <ul id="package_preferences" class="nav nav-list">
              <li><a href="../../modules/preferences/PreferencesBase.html">PreferencesBase</a></li>
              <li><a href="../../modules/preferences/PreferencesDialogs.html">PreferencesDialogs</a></li>
              <li><a href="../../modules/preferences/PreferencesImpl.html">PreferencesImpl</a></li>
              <li><a href="../../modules/preferences/PreferencesManager.html">PreferencesManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_project"><i class="icon-folder-open"></i>project</a>
              </li>
            </ul>
            <ul id="package_project" class="nav nav-list">
              <li><a href="../../modules/project/FileSyncManager.html">FileSyncManager</a></li>
              <li><a href="../../modules/project/FileTreeView.html">FileTreeView</a></li>
              <li><a href="../../modules/project/FileTreeViewModel.html">FileTreeViewModel</a></li>
              <li><a href="../../modules/project/FileViewController.html">FileViewController</a></li>
              <li><a href="../../modules/project/ProjectManager.html">ProjectManager</a></li>
              <li><a href="../../modules/project/ProjectModel.html">ProjectModel</a></li>
              <li><a href="../../modules/project/SidebarView.html">SidebarView</a></li>
              <li><a href="../../modules/project/WorkingSetSort.html">WorkingSetSort</a></li>
              <li><a href="../../modules/project/WorkingSetView.html">WorkingSetView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_search"><i class="icon-folder-open"></i>search</a>
              </li>
            </ul>
            <ul id="package_search" class="nav nav-list">
              <li><a href="../../modules/search/FileFilters.html">FileFilters</a></li>
              <li><a href="../../modules/search/FindBar.html">FindBar</a></li>
              <li><a href="../../modules/search/FindInFiles.html">FindInFiles</a></li>
              <li><a href="../../modules/search/FindInFilesUI.html">FindInFilesUI</a></li>
              <li><a href="../../modules/search/FindReplace.html">FindReplace</a></li>
              <li><a href="../../modules/search/FindUtils.html">FindUtils</a></li>
              <li><a href="../../modules/search/QuickOpen.html">QuickOpen</a></li>
              <li><a href="../../modules/search/QuickOpenHelper.html">QuickOpenHelper</a></li>
              <li><a href="../../modules/search/QuickSearchField.html">QuickSearchField</a></li>
              <li><a href="../../modules/search/ScrollTrackMarkers.html">ScrollTrackMarkers</a></li>
              <li><a href="../../modules/search/SearchModel.html">SearchModel</a></li>
              <li><a href="../../modules/search/SearchResultsView.html">SearchResultsView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_search_node"><i class="icon-folder-open"></i>search&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_search_node" class="nav nav-list">
              <li><a href="../../modules/search/node/FindInFilesDomain.html">FindInFilesDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_utils"><i class="icon-folder-open"></i>utils</a>
              </li>
            </ul>
            <ul id="package_utils" class="nav nav-list">
              <li><a href="../../modules/utils/AnimationUtils.html">AnimationUtils</a></li>
              <li><a href="../../modules/utils/AppInit.html">AppInit</a></li>
              <li><a href="../../modules/utils/Async.html">Async</a></li>
              <li><a href="../../modules/utils/BuildInfoUtils.html">BuildInfoUtils</a></li>
              <li><a href="../../modules/utils/ColorUtils.html">ColorUtils</a></li>
              <li><a href="../../modules/utils/Compatibility.html">Compatibility</a></li>
              <li><a href="../../modules/utils/DeprecationWarning.html">DeprecationWarning</a></li>
              <li><a href="../../modules/utils/DragAndDrop.html">DragAndDrop</a></li>
              <li><a href="../../modules/utils/DropdownEventHandler.html">DropdownEventHandler</a></li>
              <li><a href="../../modules/utils/EventDispatcher.html">EventDispatcher</a></li>
              <li><a href="../../modules/utils/ExtensionLoader.html">ExtensionLoader</a></li>
              <li><a href="../../modules/utils/ExtensionUtils.html">ExtensionUtils</a></li>
              <li><a href="../../modules/utils/Global.html">Global</a></li>
              <li><a href="../../modules/utils/HealthLogger.html">HealthLogger</a></li>
              <li><a href="../../modules/utils/KeyEvent.html">KeyEvent</a></li>
              <li><a href="../../modules/utils/LocalizationUtils.html">LocalizationUtils</a></li>
              <li><a href="../../modules/utils/NativeApp.html">NativeApp</a></li>
              <li><a href="../../modules/utils/NodeConnection.html">NodeConnection</a></li>
              <li><a href="../../modules/utils/NodeDomain.html">NodeDomain</a></li>
              <li><a href="../../modules/utils/PerfUtils.html">PerfUtils</a></li>
              <li><a href="../../modules/utils/Resizer.html">Resizer</a></li>
              <li><a href="../../modules/utils/ShellAPI.html">ShellAPI</a></li>
              <li><a href="../../modules/utils/StringMatch.html">StringMatch</a></li>
              <li><a href="../../modules/utils/StringUtils.html">StringUtils</a></li>
              <li><a href="../../modules/utils/TokenUtils.html">TokenUtils</a></li>
              <li><a href="../../modules/utils/UpdateNotification.html">UpdateNotification</a></li>
              <li><a href="../../modules/utils/UrlParams.html">UrlParams</a></li>
              <li><a href="../../modules/utils/ValidationUtils.html">ValidationUtils</a></li>
              <li><a href="../../modules/utils/ViewUtils.html">ViewUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_view"><i class="icon-folder-open"></i>view</a>
              </li>
            </ul>
            <ul id="package_view" class="nav nav-list">
              <li><a href="../../modules/view/MainViewFactory.html">MainViewFactory</a></li>
              <li><a href="../../modules/view/MainViewManager.html">MainViewManager</a></li>
              <li><a href="../../modules/view/Pane.html">Pane</a></li>
              <li><a href="../../modules/view/ThemeManager.html">ThemeManager</a></li>
              <li><a href="../../modules/view/ThemeSettings.html">ThemeSettings</a></li>
              <li><a href="../../modules/view/ThemeView.html">ThemeView</a></li>
              <li><a href="../../modules/view/ViewCommandHandlers.html">ViewCommandHandlers</a></li>
              <li><a href="../../modules/view/ViewStateManager.html">ViewStateManager</a></li>
              <li><a href="../../modules/view/WorkspaceManager.html">WorkspaceManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_widgets"><i class="icon-folder-open"></i>widgets</a>
              </li>
            </ul>
            <ul id="package_widgets" class="nav nav-list">
              <li><a href="../../modules/widgets/bootstrap-alerts.html">bootstrap-alerts</a></li>
              <li><a href="../../modules/widgets/bootstrap-button.html">bootstrap-button</a></li>
              <li><a href="../../modules/widgets/bootstrap-dropdown.html">bootstrap-dropdown</a></li>
              <li><a href="../../modules/widgets/bootstrap-modal.html">bootstrap-modal</a></li>
              <li><a href="../../modules/widgets/bootstrap-popover.html">bootstrap-popover</a></li>
              <li><a href="../../modules/widgets/bootstrap-scrollspy.html">bootstrap-scrollspy</a></li>
              <li><a href="../../modules/widgets/bootstrap-tab.html">bootstrap-tab</a></li>
              <li><a href="../../modules/widgets/bootstrap-tooltip.html">bootstrap-tooltip</a></li>
              <li><a href="../../modules/widgets/bootstrap-twipsy-mod.html">bootstrap-twipsy-mod</a></li>
              <li><a href="../../modules/widgets/DefaultDialogs.html">DefaultDialogs</a></li>
              <li><a href="../../modules/widgets/Dialogs.html">Dialogs</a></li>
              <li><a href="../../modules/widgets/DropdownButton.html">DropdownButton</a></li>
              <li><a href="../../modules/widgets/infobar.html">infobar</a></li>
              <li><a href="../../modules/widgets/InlineMenu.html">InlineMenu</a></li>
              <li><a href="../../modules/widgets/ModalBar.html">ModalBar</a></li>
              <li><a href="../../modules/widgets/PopUpManager.html">PopUpManager</a></li>
              <li><a href="../../modules/widgets/StatusBar.html">StatusBar</a></li>
            </ul>
          </div>
        </div>
        <div class="module span9">
<h1>PreferencesBase</h1>


<section class="description">
    <h3>Description</h3>
    
    <div><p>Infrastructure for the preferences system.</p>
<p>At the top, the level at which most people will interact, is the <code>PreferencesSystem</code> object.
The most common operation is <code>get(id)</code>, which simply retrieves the value of a given preference.</p>
<p>The PreferencesSystem has a collection of Scopes, which it traverses in a specified order.
Each Scope holds one level of settings.</p>
<p>PreferencesManager.js sets up a singleton PreferencesSystem that has the following Scopes:</p>
<ul>
<li>default (the default values for any settings that are explicitly registered)</li>
<li>user (the user&#39;s customized settings – the equivalent of Brackets&#39; old
localStorage-based system. This is the settings file that lives in AppData)</li>
<li>Additional scopes for each .brackets.json file going upward in the file tree from the
current file</li>
</ul>
<p>For example, if spaceUnits has a value set in a .brackets.json file near the open file,
then a call to get(&quot;spaceUnits&quot;) would return the value from that file. File values come
first, user values next, default values last. If the setting is not known
at all, undefined is returned.</p>
<p>Each Scope has an associated Storage object that knows how to load and
save the preferences value for that Scope. There are two implementations:
MemoryStorage and FileStorage.</p>
<p>The final concept used is that of Layers, which can be added to Scopes. Generally, a Layer looks
for a collection of preferences that are nested in some fashion in the Scope&#39;s
data. Under certain circumstances (decided upon by the Layer object),
those nested preferences will take precedence over the main preferences in the Scope.</p>
</div>
    
</section>

<section id="dependencies">
    <h3>Dependencies</h3>

    <ul class="nav nav-list">
        <li><a href="..&#x2F;../modules/utils/Async.html">Async</a></li>
        <li><a href="..&#x2F;../modules/utils/EventDispatcher.html">EventDispatcher</a></li>
        <li><a href="..&#x2F;../modules/filesystem/FileSystem.html">FileSystem</a></li>
        <li><a href="..&#x2F;../modules/filesystem/FileSystemError.html">FileSystemError</a></li>
        <li><a href="..&#x2F;../modules/file/FileUtils.html">FileUtils</a></li>
        <li><a href="..&#x2F;../modules/thirdparty/globmatch.html">globmatch</a></li>
        <li><a href="..&#x2F;../modules/thirdparty/lodash.html">lodash</a></li>
    </ul>

</section>

<section id="functions">

    <h3>Functions 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>    </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _addEventDispatcherImpl 
        <a class="anchor" href="#-_addEventDispatcherImpl" id="-_addEventDispatcherImpl"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Utility for PreferencesSystem &amp; PrefixedPreferencesSystem -- attach EventDispatcher&#39;s on()/off()
implementation as private _on_internal()/_off_internal() methods, so the custom on()/off() APIs
these classes use can leverage EventDispatcher code internally. Also attach the regular public trigger().</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _addEventDispatcherImpl(proto) {
        var temp = {};
        EventDispatcher.makeEventDispatcher(temp);
        proto._on_internal  = temp.on;
        proto._off_internal = temp.off;
        proto.trigger       = temp.trigger;
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _findMatchingGlob 
        <a class="anchor" href="#-_findMatchingGlob" id="-_findMatchingGlob"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        pathData
        <span class="label label-info">Object</span>
    </dt>
    <dd>The keys are globs and the values are the preferences for that glob</dd>
    <dt>
        filename
        <span class="label label-info">string</span>
    </dt>
    <dd>relative filename to match against the globs</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">?string</span></dt>
    <dd>glob pattern that matched, if any</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _findMatchingGlob(pathData, filename) {
        var globs = Object.keys(pathData),
            globCounter;

        if (!filename) {
            return;
        }

        for (globCounter = 0; globCounter &lt; globs.length; globCounter++) {
            var glob = globs[globCounter];

            if (globmatch(filename, glob)) {
                return glob;
            }
        }
    }</code></pre></div>
</section>

<section id="classes">
    
    <h2>Classes</h2>

    <div class="well">
        <div class="member public">
            
            <span class="pull-right scope">Constructor</span>
            
            <h4>
                MemoryStorage
                
            </h4>
            
            <em><p>MemoryStorage, as the name implies, stores the preferences in memory.
This is suitable for single session data or testing.</p>
</em>
            
            <dl>
                <dt>data <span class="label label-info pull-left">Object</span></dt>
                <dd>Initial data for the storage.</dd>
            </dl>
          
<dl>
</dl>

            <button class="btn btn-small show-code">Show code</button>
            <pre class="code language-javascript"><code class="language-javascript">    function MemoryStorage(data) {
        this.data = data || {};
    }

    MemoryStorage.prototype = {</code></pre>
        </div>
        

        <section class="methods">

            <h3>Methods 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>            </h3>

<div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        fileChanged 
        <a class="anchor" href="#MemoryStorage-fileChanged" id="MemoryStorage-fileChanged"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>MemoryStorage is not stored in a file, so fileChanged is ignored.</p>
</div>
    
<dl>
    <dt>
        filePath
        <span class="label label-info">string</span>
    </dt>
    <dd>File that has changed</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        fileChanged: function (filePath) {
        }
    };

    &#x2F;&#x2F; MemoryStorage never actually dispatches change events, but Storage interface requires implementing on()&#x2F;off()
    EventDispatcher.makeEventDispatcher(MemoryStorage.prototype);</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        load 
        <a class="anchor" href="#MemoryStorage-load" id="MemoryStorage-load"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p><em>Synchronously</em> returns the data stored in this storage.
The original object (not a clone) is returned.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">Promise</span></dt>
    <dd>promise that is already resolved</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        load: function () {
            var result = new $.Deferred();
            result.resolve(this.data);
            return result.promise();
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        save 
        <a class="anchor" href="#MemoryStorage-save" id="MemoryStorage-save"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p><em>Synchronously</em> saves the data to this storage. This saves
the <code>newData</code> object reference without cloning it.</p>
</div>
    
<dl>
    <dt>
        newData
        <span class="label label-info">Object</span>
    </dt>
    <dd>The data to store.</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">Promise</span></dt>
    <dd>promise that is already resolved</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        save: function (newData) {
            var result = new $.Deferred();
            this.data = newData;
            result.resolve();
            return result.promise();
        },</code></pre></div>
        </section>

    </div>
    <div class="well">
        <div class="member public">
            
            <span class="pull-right scope">Constructor</span>
            
            <h4>
                ParsingError
                
            </h4>
            
            <em><p>Error type for problems parsing preference files.</p>
</em>
            
            <dl>
                <dt>message <span class="label label-info pull-left">string</span></dt>
                <dd>Error message</dd>
            </dl>
          
<dl>
</dl>

            <button class="btn btn-small show-code">Show code</button>
            <pre class="code language-javascript"><code class="language-javascript">    function ParsingError(message) {
        this.name = &quot;ParsingError&quot;;
        this.message = message || &quot;&quot;;
    }

    ParsingError.prototype = new Error();</code></pre>
        </div>
        


    </div>
    <div class="well">
        <div class="member public">
            
            <span class="pull-right scope">Constructor</span>
            
            <h4>
                FileStorage
                
            </h4>
            
            <em><p>Loads/saves preferences from a JSON file on disk.</p>
</em>
            
            <dl>
                <dt>path <span class="label label-info pull-left">string</span></dt>
                <dd>Path to the preferences file</dd>
                <dt>createIfMissing <span class="label label-info pull-left">boolean</span></dt>
                <dd>True if the file should be created if it doesn't exist. If this is not true, an exception will be thrown if the file does not exist.</dd>
                <dt>recreateIfInvalid <span class="label label-info pull-left">boolean</span></dt>
                <dd>True if the file needs to be recreated if it is invalid. Invalid- Either unreadable or unparseable. The invalid copy will be sent to trash in case the user wants to refer to it.</dd>
            </dl>
          
<dl>
</dl>

            <button class="btn btn-small show-code">Show code</button>
            <pre class="code language-javascript"><code class="language-javascript">    function FileStorage(path, createIfMissing, recreateIfInvalid) {
        this.path = path;
        this.createIfMissing = createIfMissing;
        this.recreateIfInvalid = recreateIfInvalid;
        this._lineEndings = FileUtils.getPlatformLineEndings();
    }

    FileStorage.prototype = {</code></pre>
        </div>
        

        <section class="methods">

            <h3>Methods 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>            </h3>

<div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        fileChanged 
        <a class="anchor" href="#FileStorage-fileChanged" id="FileStorage-fileChanged"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>If the filename matches this Storage&#39;s path, a changed message is triggered.</p>
</div>
    
<dl>
    <dt>
        filePath
        <span class="label label-info">string</span>
    </dt>
    <dd>File that has changed</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        fileChanged: function (filePath) {
            if (filePath === this.path) {
                this.trigger(&quot;changed&quot;);
            }
        }
    };

    EventDispatcher.makeEventDispatcher(FileStorage.prototype);</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        load 
        <a class="anchor" href="#FileStorage-load" id="FileStorage-load"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Loads the preferences from disk. Can throw an exception if the file is not
readable or parseable.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">Promise</span></dt>
    <dd>Resolved with the data once it has been parsed.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        load: function () {
            var result = new $.Deferred();
            var path = this.path;
            var createIfMissing = this.createIfMissing;
            var recreateIfInvalid = this.recreateIfInvalid;
            var self = this;

            if (path) {
                var prefFile = FileSystem.getFileForPath(path);
                prefFile.read({}, function (err, text) {
                    if (err) {
                        if (createIfMissing) {
                            &#x2F;&#x2F; Unreadable file is also unwritable -- delete so get recreated
                            if (recreateIfInvalid &amp;&amp; (err === FileSystemError.NOT_READABLE || err === FileSystemError.UNSUPPORTED_ENCODING)) {
                                appshell.fs.moveToTrash(path, function (err) {
                                    if (err) {
                                        console.log(&quot;Cannot move unreadable preferences file &quot; + path + &quot; to trash!!&quot;);
                                    } else {
                                        console.log(&quot;Brackets has recreated the unreadable preferences file &quot; + path + &quot;. You may refer to the deleted file in trash in case you need it!!&quot;);
                                    }
                                }.bind(this));
                            }
                            result.resolve({});
                        } else {
                            result.reject(new Error(&quot;Unable to load preferences at &quot; + path + &quot; &quot; + err));
                        }
                        return;
                    }

                    self._lineEndings = FileUtils.sniffLineEndings(text);

                    &#x2F;&#x2F; If the file is empty, turn it into an empty object
                    if (&#x2F;^\s*$&#x2F;.test(text)) {
                        result.resolve({});
                    } else {
                        try {
                            result.resolve(JSON.parse(text));
                        } catch (e) {
                            if (recreateIfInvalid) {
                                &#x2F;&#x2F; JSON parsing error -- recreate the preferences file
                                appshell.fs.moveToTrash(path, function (err) {
                                    if (err) {
                                        console.log(&quot;Cannot move unparseable preferences file &quot; + path + &quot; to trash!!&quot;);
                                    } else {
                                        console.log(&quot;Brackets has recreated the Invalid JSON preferences file &quot; + path + &quot;. You may refer to the deleted file in trash in case you need it!!&quot;);
                                    }
                                }.bind(this));
                                result.resolve({});
                            } else {
                                result.reject(new ParsingError(&quot;Invalid JSON settings at &quot; + path + &quot;(&quot; + e.toString() + &quot;)&quot;));
                            }
                        }
                    }
                });
            } else {
                result.resolve({});
            }

            return result.promise();
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        save 
        <a class="anchor" href="#FileStorage-save" id="FileStorage-save"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Saves the new data to disk.</p>
</div>
    
<dl>
    <dt>
        newData
        <span class="label label-info">Object</span>
    </dt>
    <dd>data to save</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">Promise</span></dt>
    <dd>Promise resolved (with no arguments) once the data has been saved</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        save: function (newData) {
            var result = new $.Deferred();
            var path = this.path;
            var prefFile = FileSystem.getFileForPath(path);

            if (path) {
                try {
                    var text = JSON.stringify(newData, null, 4);

                    &#x2F;&#x2F; maintain the original line endings
                    text = FileUtils.translateLineEndings(text, this._lineEndings);
                    prefFile.write(text, {}, function (err) {
                        if (err) {
                            result.reject(&quot;Unable to save prefs at &quot; + path + &quot; &quot; + err);
                        } else {
                            result.resolve();
                        }
                    });
                } catch (e) {
                    result.reject(&quot;Unable to convert prefs to JSON&quot; + e.toString());
                }
            } else {
                result.resolve();
            }
            return result.promise();
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        setPath 
        <a class="anchor" href="#FileStorage-setPath" id="FileStorage-setPath"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Changes the path to the preferences file.
This sends a &quot;changed&quot; event to listeners, regardless of whether
the path has changed.</p>
</div>
    
<dl>
    <dt>
        newPath
        <span class="label label-info">string</span>
    </dt>
    <dd>location of this settings file</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        setPath: function (newPath) {
            this.path = newPath;
            this.trigger(&quot;changed&quot;);
        },</code></pre></div>
        </section>

    </div>
    <div class="well">
        <div class="member public">
            
            <span class="pull-right scope">Constructor</span>
            
            <h4>
                Scope
                
            </h4>
            
            <em><p>A <code>Scope</code> is a data container that is tied to a <code>Storage</code>.</p>
<p>Additionally, <code>Scope</code>s support &quot;layers&quot; which are additional levels of preferences
that are stored within a single preferences file.</p>
</em>
            
            <dl>
                <dt>storage <span class="label label-info pull-left">Storage</span></dt>
                <dd>Storage object from which prefs are loaded/saved</dd>
            </dl>
          
<dl>
</dl>

            <button class="btn btn-small show-code">Show code</button>
            <pre class="code language-javascript"><code class="language-javascript">    function Scope(storage) {
        this.storage = storage;
        storage.on(&quot;changed&quot;, this.load.bind(this));
        this.data = {};
        this._dirty = false;
        this._layers = [];
        this._layerMap = {};
        this._exclusions = [];
    }

    _.extend(Scope.prototype, {</code></pre>
        </div>
        

        <section class="methods">

            <h3>Methods 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>            </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _performSet 
        <a class="anchor" href="#Scope-_performSet" id="Scope-_performSet"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>key to set or delete</dd>
    <dt>
        value
        <span class="label label-info">*</span>
    </dt>
    <dd>value for this key (undefined to delete)</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">boolean</span></dt>
    <dd>true if the value was set.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        _performSet: function (id, value) {
            if (!_.isEqual(this.data[id], value)) {
                this._dirty = true;
                if (value === undefined) {
                    delete this.data[id];
                } else {
                    this.data[id] = _.cloneDeep(value);
                }
                return true;
            }
            return false;
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        addLayer 
        <a class="anchor" href="#Scope-addLayer" id="Scope-addLayer"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Adds a Layer to this Scope. The Layer object should define a <code>key</code>, which
represents the subset of the preference data that the Layer works with.
Layers should also define <code>get</code> and <code>getKeys</code> operations that are like their
counterparts in Scope but take &quot;data&quot; as the first argument.</p>
<p>Listeners are notified of potential changes in preferences with the addition of
this layer.</p>
</div>
    
<dl>
    <dt>
        layer
        <span class="label label-info">Layer</span>
    </dt>
    <dd>Layer object to add to this Scope</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        addLayer: function (layer) {
            this._layers.push(layer);
            this._layerMap[layer.key] = layer;
            this._exclusions.push(layer.key);
            this.trigger(PREFERENCE_CHANGE, {
                ids: layer.getKeys(this.data[layer.key], {})
            });
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        contextChanged 
        <a class="anchor" href="#Scope-contextChanged" id="Scope-contextChanged"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Determines if there are likely to be any changes based on the change
of context.</p>
</div>
    
<dl>
    <dt>
        oldContext
        <span class="label label-info">{path: string,language: string}</span>
    </dt>
    <dd>Old context</dd>
    <dt>
        newContext
        <span class="label label-info">{path: string,language: string}</span>
    </dt>
    <dd>New context</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">Array.&lt;string&gt;</span></dt>
    <dd>List of changed IDs</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        contextChanged: function (oldContext, newContext) {
            var changes = [],
                data    = this.data;

            _.each(this._layers, function (layer) {
                if (data[layer.key] &amp;&amp; oldContext[layer.key] !== newContext[layer.key]) {
                    var changesInLayer = layer.contextChanged(data[layer.key],
                                                              oldContext,
                                                              newContext);
                    if (changesInLayer) {
                        changes.push(changesInLayer);
                    }
                }
            });
            return _.union.apply(null, changes);
        }
    });

    EventDispatcher.makeEventDispatcher(Scope.prototype);


    &#x2F;&#x2F; Utility functions for the PathLayer</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        fileChanged 
        <a class="anchor" href="#Scope-fileChanged" id="Scope-fileChanged"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Tells the Scope that the given file has been changed so that the
Storage can be reloaded if needed.</p>
</div>
    
<dl>
    <dt>
        filePath
        <span class="label label-info">string</span>
    </dt>
    <dd>File that has changed</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        fileChanged: function (filePath) {
            this.storage.fileChanged(filePath);
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        get 
        <a class="anchor" href="#Scope-get" id="Scope-get"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Get the value for id, given the context. The context is provided to layers
which may override the value from the main data of the Scope. Note that
layers will often exclude values from consideration.</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>Preference to retrieve</dd>
    <dt>
        context
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">Object</span>
    </dt>
    <dd>Optional additional information about the request</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">*</span></dt>
    <dd>Current value of the Preference</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        get: function (id, context) {
            var layerCounter,
                layers = this._layers,
                layer,
                data = this.data,
                result;

            context = context || {};

            for (layerCounter = 0; layerCounter &lt; layers.length; layerCounter++) {
                layer = layers[layerCounter];
                result = layer.get(data[layer.key], id, context);
                if (result !== undefined) {
                    return result;
                }
            }

            if (this._exclusions.indexOf(id) === -1) {
                return data[id];
            }
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getKeys 
        <a class="anchor" href="#Scope-getKeys" id="Scope-getKeys"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Get the preference IDs that are set in this Scope. All layers are added
in. If context is not provided, the set of all keys in the Scope including
all keys in each layer will be returned.</p>
</div>
    
<dl>
    <dt>
        context
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">Object</span>
    </dt>
    <dd>Optional additional information for looking up the keys</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">Array.&lt;string&gt;</span></dt>
    <dd>Set of preferences set by this Scope</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        getKeys: function (context) {
            context = context || {};

            var layerCounter,
                layers = this._layers,
                layer,
                data = this.data;

            var keySets = [_.difference(_.keys(data), this._exclusions)];
            for (layerCounter = 0; layerCounter &lt; layers.length; layerCounter++) {
                layer = layers[layerCounter];
                keySets.push(layer.getKeys(data[layer.key], context));
            }

            return _.union.apply(null, keySets);
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getPreferenceLocation 
        <a class="anchor" href="#Scope-getPreferenceLocation" id="Scope-getPreferenceLocation"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Get the location in this Scope (if any) where the given preference is set.</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>Name of the preference for which the value should be retrieved</dd>
    <dt>
        context
        <span class="label label-optional">optional</span>
        <span class="label label-info">Object</span>
    </dt>
    <dd>Optional context object to change the preference lookup</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">{layer: ?string,layerID: ?object},undefined</span></dt>
    <dd>Object describing where the preferences came from. An empty object means that it was defined in the Scope's base data. Undefined means the pref is not defined in this Scope.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        getPreferenceLocation: function (id, context) {
            var layerCounter,
                layers = this._layers,
                layer,
                data = this.data,
                result;

            context = context || {};

            for (layerCounter = 0; layerCounter &lt; layers.length; layerCounter++) {
                layer = layers[layerCounter];
                result = layer.getPreferenceLocation(data[layer.key], id, context);
                if (result !== undefined) {
                    return {
                        layer: layer.key,
                        layerID: result
                    };
                }
            }

            if (this._exclusions.indexOf(id) === -1 &amp;&amp; data[id] !== undefined) {
                &#x2F;&#x2F; The value is defined in this Scope, which means we need to return an
                &#x2F;&#x2F; empty object as a signal to the PreferencesSystem that this pref
                &#x2F;&#x2F; is defined in this Scope (in the base data)
                return {};
            }

            &#x2F;&#x2F; return undefined when this Scope does not have the requested pref
            return undefined;
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        load 
        <a class="anchor" href="#Scope-load" id="Scope-load"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Loads the prefs for this <code>Scope</code> from the <code>Storage</code>.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">Promise</span></dt>
    <dd>Promise that is resolved once loading is complete</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        load: function () {
            var result = new $.Deferred();
            this.storage.load()
                .then(function (data) {
                    var oldKeys = this.getKeys();
                    this.data = data;
                    result.resolve();
                    this.trigger(PREFERENCE_CHANGE, {
                        ids: _.union(this.getKeys(), oldKeys)
                    });
                }.bind(this))
                .fail(function (error) {
                    result.reject(error);
                });
            return result.promise();
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        save 
        <a class="anchor" href="#Scope-save" id="Scope-save"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Saves the prefs for this <code>Scope</code>.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">Promise</span></dt>
    <dd>promise resolved once the data is saved.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        save: function () {
            var self = this;
            if (this._dirty) {
                self._dirty = false;
                return this.storage.save(this.data);
            } else {
                return (new $.Deferred()).resolve().promise();
            }
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        set 
        <a class="anchor" href="#Scope-set" id="Scope-set"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Sets the value for <code>id</code>. The value is set at the location given, or at the current
location for the preference if no location is specified. If an invalid location is
given, nothing will be set and no exception is thrown.</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>Key to set</dd>
    <dt>
        value
        <span class="label label-info">*</span>
    </dt>
    <dd>Value for this key</dd>
    <dt>
        context
        <span class="label label-optional">optional</span>
        <span class="label label-info">Object</span>
    </dt>
    <dd>Optional additional information about the request (typically used for layers)</dd>
    <dt>
        location
        <span class="label label-optional">optional</span>
        <span class="label label-info">{layer: ?string, layerID: ?Object}</span>
    </dt>
    <dd>Optional location in which to set the value. If the object is empty, the value will be set at the Scope's base level.</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">boolean</span></dt>
    <dd>true if the value was set</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        set: function (id, value, context, location) {
            if (!location) {
                location = this.getPreferenceLocation(id, context);
            }
            if (location &amp;&amp; location.layer) {
                var layer = this._layerMap[location.layer];
                if (layer) {
                    if (this.data[layer.key] === undefined) {
                        this.data[layer.key] = {};
                    }

                    var wasSet = layer.set(this.data[layer.key], id, value, context, location.layerID);
                    this._dirty = this._dirty || wasSet;
                    return wasSet;
                } else {
                    return false;
                }
            } else {
                return this._performSet(id, value);
            }
        },</code></pre></div>
        </section>

    </div>
    <div class="well">
        <div class="member public">
            
            <span class="pull-right scope">Constructor</span>
            
            <h4>
                ProjectLayer
                
            </h4>
            
            <em><p>Create a default project layer object that has a single property &quot;key&quot;
with &quot;project&quot; as its value.</p>
</em>
            
            <dl>
            </dl>
          
<dl>
</dl>

            <button class="btn btn-small show-code">Show code</button>
            <pre class="code language-javascript"><code class="language-javascript">    function ProjectLayer() {
        this.projectPath = null;
    }

    ProjectLayer.prototype = {
        key: &quot;project&quot;,</code></pre>
        </div>
        

        <section class="methods">

            <h3>Methods 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>            </h3>

<div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        get 
        <a class="anchor" href="#ProjectLayer-get" id="ProjectLayer-get"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Retrieve the current value based on the current project path
in the layer.</p>
</div>
    
<dl>
    <dt>
        data
        <span class="label label-info">Object</span>
    </dt>
    <dd>the preference data from the Scope</dd>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>preference ID to look up</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        get: function (data, id) {
            if (!data || !this.projectPath) {
                return;
            }

            if (data[this.projectPath] &amp;&amp; (data[this.projectPath][id] !== undefined)) {
                return data[this.projectPath][id];
            }
            return;
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getKeys 
        <a class="anchor" href="#ProjectLayer-getKeys" id="ProjectLayer-getKeys"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Retrieves the keys provided by this layer object.</p>
</div>
    
<dl>
    <dt>
        data
        <span class="label label-info">Object</span>
    </dt>
    <dd>the preference data from the Scope</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        getKeys: function (data) {
            if (!data) {
                return;
            }

            return _.union.apply(null, _.map(_.values(data), _.keys));
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getPreferenceLocation 
        <a class="anchor" href="#ProjectLayer-getPreferenceLocation" id="ProjectLayer-getPreferenceLocation"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Gets the location in which the given pref was set, if it was set within
this project layer for the current project path.</p>
</div>
    
<dl>
    <dt>
        data
        <span class="label label-info">Object</span>
    </dt>
    <dd>the preference data from the Scope</dd>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>preference ID to look up</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">string</span></dt>
    <dd>the Layer ID, in this case the current project path.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        getPreferenceLocation: function (data, id) {
            if (!data || !this.projectPath) {
                return;
            }

            if (data[this.projectPath] &amp;&amp; (data[this.projectPath][id] !== undefined)) {
                return this.projectPath;
            }

            return;
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        set 
        <a class="anchor" href="#ProjectLayer-set" id="ProjectLayer-set"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Sets the preference value in the given data structure for the layerID provided. If no
layerID is provided, then the current project path is used. If a layerID is provided
and it does not exist, it will be created.</p>
<p>This function returns whether or not a value was set.</p>
</div>
    
<dl>
    <dt>
        data
        <span class="label label-info">Object</span>
    </dt>
    <dd>the preference data from the Scope</dd>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>preference ID to look up</dd>
    <dt>
        value
        <span class="label label-info">Object</span>
    </dt>
    <dd>new value to assign to the preference</dd>
    <dt>
        context
        <span class="label label-info">Object</span>
    </dt>
    <dd>Object with scope and layer key-value pairs (not yet used in project layer)</dd>
    <dt>
        layerID
        <span class="label label-optional">optional</span>
        <span class="label label-info">string</span>
    </dt>
    <dd>Optional: project path to be used for setting value</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">boolean</span></dt>
    <dd>true if the value was set</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        set: function (data, id, value, context, layerID) {
            if (!layerID) {
                layerID = this.getPreferenceLocation(data, id);
            }

            if (!layerID) {
                return false;
            }

            var section = data[layerID];
            if (!section) {
                data[layerID] = section = {};
            }
            if (!_.isEqual(section[id], value)) {
                if (value === undefined) {
                    delete section[id];
                } else {
                    section[id] = _.cloneDeep(value);
                }
                return true;
            }
            return false;
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        setProjectPath 
        <a class="anchor" href="#ProjectLayer-setProjectPath" id="ProjectLayer-setProjectPath"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Set the project path to be used as the layer ID of this layer object.</p>
</div>
    
<dl>
    <dt>
        projectPath
        <span class="label label-info">string</span>
    </dt>
    <dd>Path of the project root</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        setProjectPath: function (projectPath) {
            this.projectPath = projectPath;
        }
    };</code></pre></div>
        </section>

    </div>
    <div class="well">
        <div class="member public">
            
            <span class="pull-right scope">Constructor</span>
            
            <h4>
                LanguageLayer
                
            </h4>
            
            <em></em>
            
            <dl>
            </dl>
          
<dl>
</dl>

            <button class="btn btn-small show-code">Show code</button>
            <pre class="code language-javascript"><code class="language-javascript">    function LanguageLayer() {
    }

    LanguageLayer.prototype = {
        key: &quot;language&quot;,</code></pre>
        </div>
        

        <section class="methods">

            <h3>Methods 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>            </h3>

<div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        contextChanged 
        <a class="anchor" href="#LanguageLayer-contextChanged" id="LanguageLayer-contextChanged"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Determines if there are preference IDs that could change as a result
of the context change. This implementation considers only changes in
language.</p>
</div>
    
<dl>
    <dt>
        data
        <span class="label label-info">Object</span>
    </dt>
    <dd>Data in the Scope</dd>
    <dt>
        oldContext
        <span class="label label-info">{language: string}</span>
    </dt>
    <dd>Old context</dd>
    <dt>
        newContext
        <span class="label label-info">{language: string}</span>
    </dt>
    <dd>New context</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">Array.&lt;string&gt;,undefined</span></dt>
    <dd>list of preference IDs that could have changed</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        contextChanged: function (data, oldContext, newContext) {
            &#x2F;&#x2F; this function is called only if the language has changed
            if (newContext.language === undefined) {
                return _.keys(data[oldContext.language]);
            }
            if (oldContext.language === undefined) {
                return _.keys(data[newContext.language]);
            }

            return _.union(_.keys(data[newContext.language]), _.keys(data[oldContext.language]));
        }
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        get 
        <a class="anchor" href="#LanguageLayer-get" id="LanguageLayer-get"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Retrieve the current value based on the specified context. If the context
does contain language field, undefined is returned.</p>
</div>
    
<dl>
    <dt>
        data
        <span class="label label-info">Object</span>
    </dt>
    <dd>the preference data from the Scope</dd>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>preference ID to look up</dd>
    <dt>
        context
        <span class="label label-info">{language: string}</span>
    </dt>
    <dd>Context to operate with</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">*,undefined</span></dt>
    <dd>property value</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        get: function (data, id, context) {
            if (!data || !context.language) {
                return;
            }

            if (data[context.language] &amp;&amp; (data[context.language][id] !== undefined)) {
                return data[context.language][id];
            }
            return;
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getKeys 
        <a class="anchor" href="#LanguageLayer-getKeys" id="LanguageLayer-getKeys"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Retrieves the keys provided by this layer object. If the context is
empty, it will return all the keys provided in all the layerIDs
(languages).</p>
</div>
    
<dl>
    <dt>
        data
        <span class="label label-info">Object</span>
    </dt>
    <dd>the preference data from the Scope</dd>
    <dt>
        context
        <span class="label label-info">{language: string}</span>
    </dt>
    <dd>Context to operate with</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">Array&lt;{string}&gt;,undefined</span></dt>
    <dd>An array of pref ids</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        getKeys: function (data, context) {
            if (!data) {
                return;
            }

            &#x2F;&#x2F; do not upset other layers if context for the this one is not specified
            if (!_.isEmpty(context)) {
                if (data[context.language]) {
                    return _.keys(data[context.language]);
                } else {
                    return [];
                }
            } else {
                return _.union.apply(null, _.map(_.values(data), _.keys));
            }
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getPreferenceLocation 
        <a class="anchor" href="#LanguageLayer-getPreferenceLocation" id="LanguageLayer-getPreferenceLocation"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Gets the location in which the given pref was set, if it was set within
this language layer for the current language.</p>
</div>
    
<dl>
    <dt>
        data
        <span class="label label-info">Object</span>
    </dt>
    <dd>the preference data from the Scope</dd>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>preference ID to look up</dd>
    <dt>
        context
        <span class="label label-info">{language: string}</span>
    </dt>
    <dd>Context to operate with</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">string,undefined</span></dt>
    <dd>the Layer ID, in this case the current language</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        getPreferenceLocation: function (data, id, context) {
            if (!data || !context.language) {
                return;
            }

            if (data[context.language] &amp;&amp; (data[context.language][id] !== undefined)) {
                return context.language;
            }

            return;
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        set 
        <a class="anchor" href="#LanguageLayer-set" id="LanguageLayer-set"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Sets the preference value in the given data structure for the layerID
provided. If no layerID is provided, then it will be determined using
getPreferenceLocation. If a layerID is located, but it does not
exist, it will be created.</p>
<p>This function returns whether or not a value was set.</p>
</div>
    
<dl>
    <dt>
        data
        <span class="label label-info">Object</span>
    </dt>
    <dd>The preference data from the Scope</dd>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>Preference ID to look up</dd>
    <dt>
        value
        <span class="label label-info">Object</span>
    </dt>
    <dd>New value to assign to the preference</dd>
    <dt>
        context
        <span class="label label-info">{language: string}</span>
    </dt>
    <dd>Context to operate with</dd>
    <dt>
        layerID
        <span class="label label-optional">optional</span>
        <span class="label label-info">string</span>
    </dt>
    <dd>Language to be used for setting value</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">boolean</span></dt>
    <dd>True if the value was set</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        set: function (data, id, value, context, layerID) {
            if (!layerID) {
                layerID = this.getPreferenceLocation(data, id, context);
            }

            if (!layerID) {
                return false;
            }

            var section = data[layerID];
            if (!section) {
                data[layerID] = section = {};
            }
            if (!_.isEqual(section[id], value)) {
                if (value === undefined) {
                    delete section[id];
                    if (_.isEmpty(section)) {
                        delete data[layerID];
                    }
                } else {
                    section[id] = _.cloneDeep(value);
                }
                return true;
            }
            return false;
        },</code></pre></div>
        </section>

    </div>
    <div class="well">
        <div class="member public">
            
            <span class="pull-right scope">Constructor</span>
            
            <h4>
                PathLayer
                
            </h4>
            
            <em><p>There can be multiple paths and they are each checked in turn. The first that matches the
currently edited file wins.</p>
</em>
            
            <dl>
                <dt>prefFilePath <span class="label label-info pull-left">string</span></dt>
                <dd>path to the preference file</dd>
            </dl>
          
<dl>
</dl>

            <button class="btn btn-small show-code">Show code</button>
            <pre class="code language-javascript"><code class="language-javascript">    function PathLayer(prefFilePath) {
        this.setPrefFilePath(prefFilePath);
    }

    PathLayer.prototype = {
        key: &quot;path&quot;,</code></pre>
        </div>
        

        <section class="methods">

            <h3>Methods 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>            </h3>

<div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        contextChanged 
        <a class="anchor" href="#PathLayer-contextChanged" id="PathLayer-contextChanged"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Determines if there are preference IDs that could change as a result of
a change in the context. This implementation considers only the path portion
of the context and looks up matching globes if any.</p>
</div>
    
<dl>
    <dt>
        data
        <span class="label label-info">Object</span>
    </dt>
    <dd>Data in the Scope</dd>
    <dt>
        oldContext
        <span class="label label-info">{path: string}</span>
    </dt>
    <dd>Old context</dd>
    <dt>
        newContext
        <span class="label label-info">{path: string}</span>
    </dt>
    <dd>New context</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">Array.&lt;string&gt;</span></dt>
    <dd>list of preference IDs that could have changed</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        contextChanged: function (data, oldContext, newContext) {
            var newGlob = _findMatchingGlob(data,
                              FileUtils.getRelativeFilename(this.prefFilePath, newContext[this.key])),
                oldGlob = _findMatchingGlob(data,
                              FileUtils.getRelativeFilename(this.prefFilePath, oldContext[this.key]));

            if (newGlob === oldGlob) {
                return;
            }
            if (newGlob === undefined) {
                return _.keys(data[oldGlob]);
            }
            if (oldGlob === undefined) {
                return _.keys(data[newGlob]);
            }

            return _.union(_.keys(data[oldGlob]), _.keys(data[newGlob]));
        }
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        get 
        <a class="anchor" href="#PathLayer-get" id="PathLayer-get"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Retrieve the current value based on the filename in the context
object, comparing globs relative to the prefFilePath that this
PathLayer was set up with.</p>
</div>
    
<dl>
    <dt>
        data
        <span class="label label-info">Object</span>
    </dt>
    <dd>the preference data from the Scope</dd>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>preference ID to look up</dd>
    <dt>
        context
        <span class="label label-info">Object</span>
    </dt>
    <dd>Object with filename that will be compared to the globs</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        get: function (data, id, context) {
            var glob = this.getPreferenceLocation(data, id, context);

            if (!glob) {
                return;
            }

            return data[glob][id];
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getKeys 
        <a class="anchor" href="#PathLayer-getKeys" id="PathLayer-getKeys"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Retrieves the keys provided by this layer object. If context with a filename is provided,
only the keys for the matching file glob are given. Otherwise, all keys for all globs
are provided.</p>
</div>
    
<dl>
    <dt>
        data
        <span class="label label-info">Object</span>
    </dt>
    <dd>the preference data from the Scope</dd>
    <dt>
        context
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">Object</span>
    </dt>
    <dd>Additional context data (filename in particular is important)</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        getKeys: function (data, context) {
            if (!data) {
                return;
            }

            var relativeFilename = FileUtils.getRelativeFilename(this.prefFilePath, context[this.key]);

            if (relativeFilename) {
                var glob = _findMatchingGlob(data, relativeFilename);
                if (glob) {
                    return _.keys(data[glob]);
                } else {
                    return [];
                }
            }
            return _.union.apply(null, _.map(_.values(data), _.keys));
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getPreferenceLocation 
        <a class="anchor" href="#PathLayer-getPreferenceLocation" id="PathLayer-getPreferenceLocation"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Gets the location in which the given pref was set, if it was set within
this path layer for the current path.</p>
</div>
    
<dl>
    <dt>
        data
        <span class="label label-info">Object</span>
    </dt>
    <dd>the preference data from the Scope</dd>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>preference ID to look up</dd>
    <dt>
        context
        <span class="label label-info">Object</span>
    </dt>
    <dd>Object with filename that will be compared to the globs</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">string</span></dt>
    <dd>the Layer ID, in this case the glob that matched</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        getPreferenceLocation: function (data, id, context) {
            if (!data) {
                return;
            }

            var relativeFilename = FileUtils.getRelativeFilename(this.prefFilePath, context[this.key]);
            if (!relativeFilename) {
                return;
            }

            return _findMatchingGlob(data, relativeFilename);
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        set 
        <a class="anchor" href="#PathLayer-set" id="PathLayer-set"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Sets the preference value in the given data structure for the layerID provided. If no
layerID is provided, then the current layer is used. If a layerID is provided and it
does not exist, it will be created.</p>
<p>This function returns whether or not a value was set.</p>
</div>
    
<dl>
    <dt>
        data
        <span class="label label-info">Object</span>
    </dt>
    <dd>the preference data from the Scope</dd>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>preference ID to look up</dd>
    <dt>
        value
        <span class="label label-info">Object</span>
    </dt>
    <dd>new value to assign to the preference</dd>
    <dt>
        context
        <span class="label label-info">Object</span>
    </dt>
    <dd>Object with filename that will be compared to the globs</dd>
    <dt>
        layerID
        <span class="label label-optional">optional</span>
        <span class="label label-info">string</span>
    </dt>
    <dd>Optional: glob pattern for a specific section to set the value in</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">boolean</span></dt>
    <dd>true if the value was set</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        set: function (data, id, value, context, layerID) {
            if (!layerID) {
                layerID = this.getPreferenceLocation(data, id, context);
            }

            if (!layerID) {
                return false;
            }

            var section = data[layerID];
            if (!section) {
                data[layerID] = section = {};
            }
            if (!_.isEqual(section[id], value)) {
                if (value === undefined) {
                    delete section[id];
                } else {
                    section[id] = _.cloneDeep(value);
                }
                return true;
            }
            return false;
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        setPrefFilePath 
        <a class="anchor" href="#PathLayer-setPrefFilePath" id="PathLayer-setPrefFilePath"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Changes the preference file path.</p>
</div>
    
<dl>
    <dt>
        prefFilePath
        <span class="label label-info">string</span>
    </dt>
    <dd>New path to the preferences file</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        setPrefFilePath: function (prefFilePath) {
            if (!prefFilePath) {
                this.prefFilePath = &quot;&#x2F;&quot;;
            } else {
                this.prefFilePath = FileUtils.getDirectoryPath(prefFilePath);
            }
        },</code></pre></div>
        </section>

    </div>
    <div class="well">
        <div class="member public">
            
            <span class="pull-right scope">Constructor</span>
            
            <h4>
                Preference
                
            </h4>
            
            <em><p>Represents a single, known Preference.</p>
</em>
            
            <dl>
                <dt>properties <span class="label label-info pull-left">Object</span></dt>
                <dd>Information about the Preference that is stored on this object</dd>
            </dl>
          
<dl>
</dl>

            <button class="btn btn-small show-code">Show code</button>
            <pre class="code language-javascript"><code class="language-javascript">    function Preference(properties) {
        _.extend(this, properties);
    }

    EventDispatcher.makeEventDispatcher(Preference.prototype);</code></pre>
        </div>
        


    </div>
    <div class="well">
        <div class="member public">
            
            <span class="pull-right scope">Constructor</span>
            
            <h4>
                PrefixedPreferencesSystem
                
            </h4>
            
            <em><p>Provides a subset of the PreferencesSystem functionality with preference
access always occurring with the given prefix.</p>
</em>
            
            <dl>
                <dt>base <span class="label label-info pull-left">PreferencesSystem</span></dt>
                <dd>The real PreferencesSystem that is backing this one</dd>
                <dt>prefix <span class="label label-info pull-left">string</span></dt>
                <dd>Prefix that is used for preferences lookup. Any separator characters should already be added.</dd>
            </dl>
          
<dl>
</dl>

            <button class="btn btn-small show-code">Show code</button>
            <pre class="code language-javascript"><code class="language-javascript">    function PrefixedPreferencesSystem(base, prefix) {
        this.base = base;
        this.prefix = prefix;
        this._listenerInstalled = false;
    }

    PrefixedPreferencesSystem.prototype = {</code></pre>
        </div>
        

        <section class="methods">

            <h3>Methods 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>            </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _installListener 
        <a class="anchor" href="#PrefixedPreferencesSystem-_installListener" id="PrefixedPreferencesSystem-_installListener"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        _installListener: function () {
            if (this._listenerInstalled) {
                return;
            }
            var self = this,
                prefix = this.prefix;

            var onlyWithPrefix = function (id) {
                if (_.startsWith(id, prefix)) {
                    return true;
                }
                return false;
            };

            var withoutPrefix = function (id) {
                return id.substr(prefix.length);
            };

            this.base.on(PREFERENCE_CHANGE, function (e, data) {
                var prefixedIds = data.ids.filter(onlyWithPrefix);

                if (prefixedIds.length &gt; 0) {
                    self.trigger(PREFERENCE_CHANGE, {
                        ids: prefixedIds.map(withoutPrefix)
                    });
                }
            });

            this._listenerInstalled = true;
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        definePreference 
        <a class="anchor" href="#PrefixedPreferencesSystem-definePreference" id="PrefixedPreferencesSystem-definePreference"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Defines a new (prefixed) preference.</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>unprefixed identifier of the preference. Generally a dotted name.</dd>
    <dt>
        type
        <span class="label label-info">string</span>
    </dt>
    <dd>Data type for the preference (generally, string, boolean, number)</dd>
    <dt>
        initial
        <span class="label label-info">Object</span>
    </dt>
    <dd>Default value for the preference</dd>
    <dt>
        options
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">{name: string=, description: string=, validator: function=, excludeFromHints: boolean=, keys: object=, values: array=, valueType: string=}</span>
    </dt>
    <dd>Additional options for the pref. - `options.name` Name of the preference that can be used in the UI. - `options.description` A description of the preference. - `options.validator` A function to validate the value of a preference. - `options.excludeFromHints` True if you want to exclude a preference from code hints. - `options.keys` An object that will hold the child preferences in case the preference type is `object` - `options.values` An array of possible values of a preference. It will show up in code hints. - `options.valueType` In case the preference type is `array`, `valueType` should hold data type of its elements.</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">Object</span></dt>
    <dd>The preference object.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        definePreference: function (id, type, initial, options) {
            return this.base.definePreference(this.prefix + id, type, initial, options);
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        get 
        <a class="anchor" href="#PrefixedPreferencesSystem-get" id="PrefixedPreferencesSystem-get"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Gets the prefixed preference</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>Name of the preference for which the value should be retrieved</dd>
    <dt>
        context
        <span class="label label-optional">optional</span>
        <span class="label label-info">Object</span>
    </dt>
    <dd>Optional context object to change the preference lookup</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        get: function (id, context) {
            context = context || {};
            return this.base.get(this.prefix + id, this.base._getContext(context));
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getPreference 
        <a class="anchor" href="#PrefixedPreferencesSystem-getPreference" id="PrefixedPreferencesSystem-getPreference"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Get the prefixed preference object</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>ID of the pref to retrieve.</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        getPreference: function (id) {
            return this.base.getPreference(this.prefix + id);
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getPreferenceLocation 
        <a class="anchor" href="#PrefixedPreferencesSystem-getPreferenceLocation" id="PrefixedPreferencesSystem-getPreferenceLocation"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Gets the location in which the value of a prefixed preference has been set.</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>Name of the preference for which the value should be retrieved</dd>
    <dt>
        context
        <span class="label label-optional">optional</span>
        <span class="label label-info">Object</span>
    </dt>
    <dd>Optional context object to change the preference lookup</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">{scope: string,layer: ?string,layerID: ?object}</span></dt>
    <dd>Object describing where the preferences came from</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        getPreferenceLocation: function (id, context) {
            return this.base.getPreferenceLocation(this.prefix + id, context);
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        off 
        <a class="anchor" href="#PrefixedPreferencesSystem-off" id="PrefixedPreferencesSystem-off"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Turns off the event handlers for a given event, optionally for a specific preference
or a specific handler function.</p>
</div>
    
<dl>
    <dt>
        event
        <span class="label label-info">string</span>
    </dt>
    <dd>Name of the event for which to turn off listening</dd>
    <dt>
        preferenceID
        <span class="label label-info">string,Function</span>
    </dt>
    <dd>Name of a specific preference or the handler function</dd>
    <dt>
        handler
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">Function</span>
    </dt>
    <dd>Specific handler which should stop being notified</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        off: function (event, preferenceID, handler) {
            if (typeof preferenceID === &quot;function&quot;) {
                handler = preferenceID;
                preferenceID = null;
            }

            if (preferenceID) {
                var pref = this.getPreference(preferenceID);
                pref.off(event, handler);
            } else {
                this._off_internal(event, handler);
            }
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        on 
        <a class="anchor" href="#PrefixedPreferencesSystem-on" id="PrefixedPreferencesSystem-on"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Sets up a listener for events for this PrefixedPreferencesSystem. Only prefixed events
will notify. Optionally, you can set up a listener for a specific preference.</p>
</div>
    
<dl>
    <dt>
        event
        <span class="label label-info">string</span>
    </dt>
    <dd>Name of the event to listen for</dd>
    <dt>
        preferenceID
        <span class="label label-info">string,Function</span>
    </dt>
    <dd>Name of a specific preference or the handler function</dd>
    <dt>
        handler
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">Function</span>
    </dt>
    <dd>Handler for the event</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        on: function (event, preferenceID, handler) {
            if (typeof preferenceID === &quot;function&quot;) {
                handler = preferenceID;
                preferenceID = null;
            }

            if (preferenceID) {
                var pref = this.getPreference(preferenceID);
                pref.on(event, handler);
            } else {
                this._installListener();
                this._on_internal(event, handler);
            }
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        save 
        <a class="anchor" href="#PrefixedPreferencesSystem-save" id="PrefixedPreferencesSystem-save"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Saves the preferences. If a save is already in progress, a Promise is returned for
that save operation.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">Promise</span></dt>
    <dd>Resolved when the preferences are done saving.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        save: function () {
            return this.base.save();
        }
    };

    _addEventDispatcherImpl(PrefixedPreferencesSystem.prototype);</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        set 
        <a class="anchor" href="#PrefixedPreferencesSystem-set" id="PrefixedPreferencesSystem-set"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Sets the prefixed preference</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>Identifier of the preference to set</dd>
    <dt>
        value
        <span class="label label-info">Object</span>
    </dt>
    <dd>New value for the preference</dd>
    <dt>
        options
        <span class="label label-optional">optional</span>
        <span class="label label-info">{location: ?Object, context: ?Object}</span>
    </dt>
    <dd>Specific location in which to set the value or the context to use when setting the value</dd>
    <dt>
        doNotSave
        <span class="label label-optional">optional</span>
        <span class="label label-info">boolean</span>
    </dt>
    <dd>True if the preference change should not be saved automatically.</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">valid: {boolean},true if no validator specified or if value is valid stored: {boolean}</span></dt>
    <dd>true if a value was stored</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        set: function (id, value, options, doNotSave) {
            return this.base.set(this.prefix + id, value, options, doNotSave);
        },</code></pre></div>
        </section>

    </div>
    <div class="well">
        <div class="member public">
            
            <span class="pull-right scope">Constructor</span>
            
            <h4>
                PreferencesSystem
                
            </h4>
            
            <em><p>PreferencesSystem ties everything together to provide a simple interface for
managing the whole prefs system.</p>
<p>It keeps track of multiple Scope levels and also manages path-based Scopes.</p>
<p>It also provides the ability to register preferences, which gives a fine-grained
means for listening for changes and will ultimately allow for automatic UI generation.</p>
<p>The contextBuilder is used to construct get/set contexts based on the needs of individual
context systems. It can be passed in at construction time or set later.</p>
</em>
            
            <dl>
                <dt>contextNormalizer <span class="label label-info pull-left">function</span></dt>
                <dd>function that is passed the context used for get or set to adjust for specific PreferencesSystem behavior</dd>
            </dl>
          
<dl>
</dl>

            <button class="btn btn-small show-code">Show code</button>
            <pre class="code language-javascript"><code class="language-javascript">    function PreferencesSystem(contextBuilder) {
        this.contextBuilder = contextBuilder;

        this._knownPrefs = {};
        this._scopes = {
            &quot;default&quot;: new Scope(new MemoryStorage())
        };

        this._scopes[&quot;default&quot;].load();

        this._defaults = {
            scopeOrder: [&quot;default&quot;],
            _shadowScopeOrder: [{
                id: &quot;default&quot;,
                scope: this._scopes[&quot;default&quot;],
                promise: (new $.Deferred()).resolve().promise()
            }]
        };

        this._pendingScopes = {};

        this._saveInProgress = false;
        this._nextSaveDeferred = null;

        &#x2F;&#x2F; The objects that define the different kinds of path-based Scope handlers.
        &#x2F;&#x2F; Examples could include the handler for .brackets.json files or an .editorconfig
        &#x2F;&#x2F; handler.
        this._pathScopeDefinitions = {};

        &#x2F;&#x2F; Names of the files that contain path scopes
        this._pathScopeFilenames = [];

        &#x2F;&#x2F; Keeps track of cached path scope objects.
        this._pathScopes = {};

        &#x2F;&#x2F; Keeps track of change events that need to be sent when change events are resumed
        this._changeEventQueue = null;

        var notifyPrefChange = function (id) {
            var pref = this._knownPrefs[id];
            if (pref) {
                pref.trigger(PREFERENCE_CHANGE);
            }
        }.bind(this);

        &#x2F;&#x2F; When we signal a general change message on this manager, we also signal a change
        &#x2F;&#x2F; on the individual preference object.
        this.on(PREFERENCE_CHANGE, function (e, data) {
            data.ids.forEach(notifyPrefChange);
        }.bind(this));
    }

    _.extend(PreferencesSystem.prototype, {</code></pre>
        </div>
        

        <section class="methods">

            <h3>Methods 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>            </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _addToScopeOrder 
        <a class="anchor" href="#PreferencesSystem-_addToScopeOrder" id="PreferencesSystem-_addToScopeOrder"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>Name of the new Scope</dd>
    <dt>
        scope
        <span class="label label-info">Scope</span>
    </dt>
    <dd>The scope object to add</dd>
    <dt>
        promise
        <span class="label label-info">$.Promise</span>
    </dt>
    <dd>Scope's load promise</dd>
    <dt>
        addBefore
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">string</span>
    </dt>
    <dd>Name of the Scope before which this new one is added</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        _addToScopeOrder: function (id, scope, promise, addBefore) {
            var shadowScopeOrder = this._defaults._shadowScopeOrder,
                shadowEntry,
                index,
                isPending = false,
                self = this;

            scope.on(PREFERENCE_CHANGE + &quot;.prefsys&quot;, function (e, data) {
                self._triggerChange(data);
            }.bind(this));

            index = _.findIndex(shadowScopeOrder, function (entry) {
                return entry.id === id;
            });

            if (index &gt; -1) {
                shadowEntry = shadowScopeOrder[index];
            } else {</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _getContext 
        <a class="anchor" href="#PreferencesSystem-_getContext" id="PreferencesSystem-_getContext"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        context
        <span class="label label-info">Object</span>
    </dt>
    <dd>Context that was passed in</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">{scopeOrder: string,filename: ?string}</span></dt>
    <dd>context object</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        _getContext: function (context) {
            if (context) {
                if (this.contextBuilder) {
                    context = this.contextBuilder(context);
                }
                if (!context.scopeOrder) {
                    context.scopeOrder = this._defaults.scopeOrder;
                }
                return context;
            }
            return { scopeOrder: this._defaults.scopeOrder };
        },</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _getScopeOrder 
        <a class="anchor" href="#PreferencesSystem-_getScopeOrder" id="PreferencesSystem-_getScopeOrder"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        context
        <span class="label label-info">{scopeOrder: ?Array.&lt;string&gt;</span>
    </dt>
    <dd></dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">Array.&lt;string&gt;</span></dt>
    <dd>list of scopes in the correct order for traversal</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        _getScopeOrder: function (context) {
            return context.scopeOrder || this._defaults.scopeOrder;
        },</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _pushToScopeOrder 
        <a class="anchor" href="#PreferencesSystem-_pushToScopeOrder" id="PreferencesSystem-_pushToScopeOrder"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>Id of the scope to add</dd>
    <dt>
        before
        <span class="label label-info">string</span>
    </dt>
    <dd>Id of the scope to add it before</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        _pushToScopeOrder: function (id, before) {
            var defaultScopeOrder = this._defaults.scopeOrder,
                index = _.findIndex(defaultScopeOrder, function (id) {
                    return id === before;
                });
            if (index &gt; -1) {
                defaultScopeOrder.splice(index, 0, id);
            } else {
                &#x2F;&#x2F; error
                throw new Error(&quot;Internal error: scope &quot; + before + &quot; should be in the scope order&quot;);
            }

        },</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _triggerChange 
        <a class="anchor" href="#PreferencesSystem-_triggerChange" id="PreferencesSystem-_triggerChange"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        data
        <span class="label label-info">{ids: Array.&lt;string&gt;}</span>
    </dt>
    <dd>Message to send</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        _triggerChange: function (data) {
            if (this._changeEventQueue) {
                this._changeEventQueue = _.union(this._changeEventQueue, data.ids);
            } else {
                this.trigger(PREFERENCE_CHANGE, data);
            }
        },</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _tryAddToScopeOrder 
        <a class="anchor" href="#PreferencesSystem-_tryAddToScopeOrder" id="PreferencesSystem-_tryAddToScopeOrder"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        shadowEntry
        <span class="label label-info">Object</span>
    </dt>
    <dd>Shadow entry of the resolved scope</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        _tryAddToScopeOrder: function (shadowEntry) {
            var shadowScopeOrder = this._defaults._shadowScopeOrder,
                index = _.findIndex(shadowScopeOrder, function (entry) {
                    return entry === shadowEntry;
                }),
                i = index + 1;

            &#x2F;&#x2F; Find an appropriate scope of lower priority to add it before
            while (i &lt; shadowScopeOrder.length) {
                if (shadowScopeOrder[i].promise.state() === &quot;pending&quot; ||
                        shadowScopeOrder[i].promise.state() === &quot;resolved&quot;) {
                    break;
                }
                i++;
            }
            switch (shadowScopeOrder[i].promise.state()) {
            case &quot;pending&quot;:
                &#x2F;&#x2F; cannot decide now, lookup once pending promise is settled
                shadowScopeOrder[i].promise.always(function () {
                    this._tryAddToScopeOrder(shadowEntry);
                }.bind(this));
                break;
            case &quot;resolved&quot;:
                this._pushToScopeOrder(shadowEntry.id, shadowScopeOrder[i].id);
                this.trigger(SCOPEORDER_CHANGE, {
                    id: shadowEntry.id,
                    action: &quot;added&quot;
                });
                this._triggerChange({
                    ids: shadowEntry.scope.getKeys()
                });
                break;
            default:
                throw new Error(&quot;Internal error: no scope found to add before. \&quot;default\&quot; is missing?..&quot;);
            }

        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        addScope 
        <a class="anchor" href="#PreferencesSystem-addScope" id="PreferencesSystem-addScope"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Adds a new Scope. New Scopes are added at the highest precedence, unless the &quot;before&quot; option
is given. The new Scope is automatically loaded.</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>Name of the Scope</dd>
    <dt>
        scope
        <span class="label label-info">Scope,Storage</span>
    </dt>
    <dd>the Scope object itself. Optionally, can be given a Storage directly for convenience.</dd>
    <dt>
        options
        <span class="label label-info">{before: string}</span>
    </dt>
    <dd>optional behavior when adding (e.g. setting which scope this comes before)</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">Promise</span></dt>
    <dd>Promise that is resolved when the Scope is loaded. It is resolved with id and scope.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        addScope: function (id, scope, options) {
            var promise;
            options = options || {};

            if (this._scopes[id]) {
                throw new Error(&quot;Attempt to redefine preferences scope: &quot; + id);
            }

            &#x2F;&#x2F; Check to see if scope is a Storage that needs to be wrapped
            if (!scope.get) {
                scope = new Scope(scope);
            }

            promise = scope.load();

            this._addToScopeOrder(id, scope, promise, options.before);

            promise
                .fail(function (err) {
                    &#x2F;&#x2F; With preferences, it is valid for there to be no file.
                    &#x2F;&#x2F; It is not valid to have an unparseable file.
                    if (err instanceof ParsingError) {
                        console.error(err);
                    }
                });

            return promise;
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        addToScopeOrder 
        <a class="anchor" href="#PreferencesSystem-addToScopeOrder" id="PreferencesSystem-addToScopeOrder"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Adds scope to the scope order by its id. The scope should be previously added to the preference system.</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>the scope id</dd>
    <dt>
        before
        <span class="label label-info">string</span>
    </dt>
    <dd>the id of the scope to add before</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        addToScopeOrder: function (id, addBefore) {
            var shadowScopeOrder = this._defaults._shadowScopeOrder,
                index = _.findIndex(shadowScopeOrder, function (entry) {
                    return entry.id === id;
                }),
                entry;
            if (index &gt; -1) {
                entry = shadowScopeOrder[index];
                this._addToScopeOrder(entry.id, entry.scope, entry.promise, addBefore);
            }
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        definePreference 
        <a class="anchor" href="#PreferencesSystem-definePreference" id="PreferencesSystem-definePreference"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Defines a new preference.</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>identifier of the preference. Generally a dotted name.</dd>
    <dt>
        type
        <span class="label label-info">string</span>
    </dt>
    <dd>Data type for the preference (generally, string, boolean, number)</dd>
    <dt>
        initial
        <span class="label label-info">Object</span>
    </dt>
    <dd>Default value for the preference</dd>
    <dt>
        options
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">{name: string=, description: string=, validator: function=, excludeFromHints: boolean=, keys: object=, values: array=, valueType: string=}</span>
    </dt>
    <dd>Additional options for the pref. - `options.name` Name of the preference that can be used in the UI. - `options.description` A description of the preference. - `options.validator` A function to validate the value of a preference. - `options.excludeFromHints` True if you want to exclude a preference from code hints. - `options.keys` An object that will hold the child preferences in case the preference type is `object` - `options.values` An array of possible values of a preference. It will show up in code hints. - `options.valueType` In case the preference type is `array`, `valueType` should hold data type of its elements.</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">Object</span></dt>
    <dd>The preference object.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        definePreference: function (id, type, initial, options) {
            options = options || {};
            if (this._knownPrefs.hasOwnProperty(id)) {
                throw new Error(&quot;Preference &quot; + id + &quot; was redefined&quot;);
            }
            var pref = this._knownPrefs[id] = new Preference({
                type: type,
                initial: initial,
                name: options.name,
                description: options.description,
                validator: options.validator,
                excludeFromHints: options.excludeFromHints,
                keys: options.keys,
                values: options.values,
                valueType: options.valueType
            });
            this.set(id, initial, {
                location: {
                    scope: &quot;default&quot;
                }
            });
            return pref;
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        fileChanged 
        <a class="anchor" href="#PreferencesSystem-fileChanged" id="PreferencesSystem-fileChanged"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Tells the PreferencesSystem that the given file has been changed so that any
related Scopes can be reloaded.</p>
</div>
    
<dl>
    <dt>
        filePath
        <span class="label label-info">string</span>
    </dt>
    <dd>File that has changed</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        fileChanged: function (filePath) {
            _.forEach(this._scopes, function (scope) {
                scope.fileChanged(filePath);
            });
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        get 
        <a class="anchor" href="#PreferencesSystem-get" id="PreferencesSystem-get"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Get the current value of a preference. The optional context provides a way to
change scope ordering or the reference filename for path-based scopes.</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>Name of the preference for which the value should be retrieved</dd>
    <dt>
        context
        <span class="label label-optional">optional</span>
        <span class="label label-info">Object, string</span>
    </dt>
    <dd>Optional context object or name of context to change the preference lookup</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        get: function (id, context) {
            var scopeCounter;

            context = this._getContext(context);

            var scopeOrder = this._getScopeOrder(context);

            for (scopeCounter = 0; scopeCounter &lt; scopeOrder.length; scopeCounter++) {
                var scope = this._scopes[scopeOrder[scopeCounter]];
                if (scope) {
                    var result = scope.get(id, context);
                    if (result !== undefined) {
                        var pref      = this.getPreference(id),
                            validator = pref &amp;&amp; pref.validator;
                        if (!validator || validator(result)) {
                            if (pref &amp;&amp; pref.type === &quot;object&quot;) {
                                result = _.extend({}, pref.initial, result);
                            }
                            return _.cloneDeep(result);
                        }
                    }
                }
            }
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getAllPreferences 
        <a class="anchor" href="#PreferencesSystem-getAllPreferences" id="PreferencesSystem-getAllPreferences"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Returns a clone of all preferences defined.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">Object</span></dt>
    <dd></dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        getAllPreferences: function () {
            return _.cloneDeep(this._knownPrefs);
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getPreference 
        <a class="anchor" href="#PreferencesSystem-getPreference" id="PreferencesSystem-getPreference"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Get the preference object for the given ID.</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>ID of the pref to retrieve.</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        getPreference: function (id) {
            return this._knownPrefs[id];
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getPreferenceLocation 
        <a class="anchor" href="#PreferencesSystem-getPreferenceLocation" id="PreferencesSystem-getPreferenceLocation"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Gets the location in which the value of a preference has been set.</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>Name of the preference for which the value should be retrieved</dd>
    <dt>
        context
        <span class="label label-optional">optional</span>
        <span class="label label-info">Object</span>
    </dt>
    <dd>Optional context object to change the preference lookup</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">{scope: string,layer: ?string,layerID: ?object}</span></dt>
    <dd>Object describing where the preferences came from</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        getPreferenceLocation: function (id, context) {
            var scopeCounter,
                scopeName;

            context = this._getContext(context);

            var scopeOrder = this._getScopeOrder(context);

            for (scopeCounter = 0; scopeCounter &lt; scopeOrder.length; scopeCounter++) {
                scopeName = scopeOrder[scopeCounter];
                var scope = this._scopes[scopeName];
                if (scope) {
                    var result = scope.getPreferenceLocation(id, context);
                    if (result !== undefined) {
                        result.scope = scopeName;
                        return result;
                    }
                }
            }
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getPrefixedSystem 
        <a class="anchor" href="#PreferencesSystem-getPrefixedSystem" id="PreferencesSystem-getPrefixedSystem"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Retrieves a PreferencesSystem in which all preference access is prefixed.
This helps provide namespacing so that different preferences consumers do
not interfere with one another.</p>
<p>The prefix provided has a <code>.</code> character appended when preference lookups are
done.</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        getPrefixedSystem: function (prefix) {
            return new PrefixedPreferencesSystem(this, prefix + &quot;.&quot;);
        }

    });

    _addEventDispatcherImpl(PreferencesSystem.prototype);


    &#x2F;&#x2F; Public interface
    exports.PreferencesSystem   = PreferencesSystem;
    exports.Scope               = Scope;
    exports.MemoryStorage       = MemoryStorage;
    exports.PathLayer           = PathLayer;
    exports.ProjectLayer        = ProjectLayer;
    exports.LanguageLayer       = LanguageLayer;
    exports.FileStorage         = FileStorage;
});</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        off 
        <a class="anchor" href="#PreferencesSystem-off" id="PreferencesSystem-off"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Turns off the event handlers for a given event, optionally for a specific preference
or a specific handler function.</p>
</div>
    
<dl>
    <dt>
        event
        <span class="label label-info">string</span>
    </dt>
    <dd>Name of the event for which to turn off listening</dd>
    <dt>
        preferenceID
        <span class="label label-info">string,Function</span>
    </dt>
    <dd>Name of a specific preference or the handler function</dd>
    <dt>
        handler
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">Function</span>
    </dt>
    <dd>Specific handler which should stop being notified</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        off: function (event, preferenceID, handler) {
            if (typeof preferenceID === &quot;function&quot;) {
                handler = preferenceID;
                preferenceID = null;
            }

            if (preferenceID) {
                var pref = this.getPreference(preferenceID);
                pref.off(event, handler);
            } else {
                this._off_internal(event, handler);
            }
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        on 
        <a class="anchor" href="#PreferencesSystem-on" id="PreferencesSystem-on"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Sets up a listener for events. Optionally, you can set up a listener for a
specific preference.</p>
</div>
    
<dl>
    <dt>
        event
        <span class="label label-info">string</span>
    </dt>
    <dd>Name of the event to listen for</dd>
    <dt>
        preferenceID
        <span class="label label-info">string,Function</span>
    </dt>
    <dd>Name of a specific preference or the handler function</dd>
    <dt>
        handler
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">Function</span>
    </dt>
    <dd>Handler for the event</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        on: function (event, preferenceID, handler) {
            if (typeof preferenceID === &quot;function&quot;) {
                handler = preferenceID;
                preferenceID = null;
            }

            if (preferenceID) {
                var pref = this.getPreference(preferenceID);
                pref.on(event, handler);
            } else {
                this._on_internal(event, handler);
            }
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        pauseChangeEvents 
        <a class="anchor" href="#PreferencesSystem-pauseChangeEvents" id="PreferencesSystem-pauseChangeEvents"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Turns off sending of change events, queueing them up for sending once sending is resumed.
The events are compacted so that each preference that will be notified is only
notified once. (For example, if <code>spaceUnits</code> is changed 5 times, only one change
event will be sent upon resuming events.)</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        pauseChangeEvents: function () {
            if (!this._changeEventQueue) {
                this._changeEventQueue = [];
            }
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        removeFromScopeOrder 
        <a class="anchor" href="#PreferencesSystem-removeFromScopeOrder" id="PreferencesSystem-removeFromScopeOrder"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Removes a scope from the default scope order.</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>Name of the Scope to remove from the default scope order.</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        removeFromScopeOrder: function (id) {
            var scope = this._scopes[id];
            if (scope) {
                _.pull(this._defaults.scopeOrder, id);
                scope.off(&quot;.prefsys&quot;);
                this.trigger(SCOPEORDER_CHANGE, {
                    id: id,
                    action: &quot;removed&quot;
                });
                this._triggerChange({
                    ids: scope.getKeys()
                });
            }
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        removeScope 
        <a class="anchor" href="#PreferencesSystem-removeScope" id="PreferencesSystem-removeScope"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Removes a Scope from this PreferencesSystem. Returns without doing anything
if the Scope does not exist. Notifies listeners of preferences that may have
changed.</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>Name of the Scope to remove</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        removeScope: function (id) {
            var scope = this._scopes[id],
                shadowIndex;
            if (!scope) {
                return;
            }

            this.removeFromScopeOrder(id);
            shadowIndex = _.findIndex(this._defaults._shadowScopeOrder, function (entry) {
                return entry.id === id;
            });
            this._defaults._shadowScopeOrder.splice(shadowIndex, 1);
            delete this._scopes[id];
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        resumeChangeEvents 
        <a class="anchor" href="#PreferencesSystem-resumeChangeEvents" id="PreferencesSystem-resumeChangeEvents"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Turns sending of events back on, sending any events that were queued while the
events were paused.</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        resumeChangeEvents: function () {
            if (this._changeEventQueue) {
                this.trigger(PREFERENCE_CHANGE, {
                    ids: this._changeEventQueue
                });
                this._changeEventQueue = null;
            }
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        save 
        <a class="anchor" href="#PreferencesSystem-save" id="PreferencesSystem-save"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Saves the preferences. If a save is already in progress, a Promise is returned for
that save operation.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">Promise</span></dt>
    <dd>Resolved when the preferences are done saving.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        save: function () {
            if (this._saveInProgress) {
                if (!this._nextSaveDeferred) {
                    this._nextSaveDeferred = new $.Deferred();
                }
                return this._nextSaveDeferred.promise();
            }

            var deferred = this._nextSaveDeferred || (new $.Deferred());
            this._saveInProgress = true;
            this._nextSaveDeferred = null;

            Async.doInParallel(_.values(this._scopes), function (scope) {
                if (scope) {
                    return scope.save();
                } else {
                    return (new $.Deferred()).resolve().promise();
                }
            }.bind(this))
                .then(function () {
                    this._saveInProgress = false;
                    if (this._nextSaveDeferred) {
                        this.save();
                    }
                    deferred.resolve();
                }.bind(this))
                .fail(function (err) {
                    deferred.reject(err);
                });

            return deferred.promise();
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        set 
        <a class="anchor" href="#PreferencesSystem-set" id="PreferencesSystem-set"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Sets a preference and notifies listeners that there may
have been a change. By default, the preference is set in the same location in which
it was defined except for the &quot;default&quot; scope. If the current value of the preference
comes from the &quot;default&quot; scope, the new value will be set at the level just above
default.</p>
</div>
    
<dl>
    <dt>
        id
        <span class="label label-info">string</span>
    </dt>
    <dd>Identifier of the preference to set</dd>
    <dt>
        value
        <span class="label label-info">Object</span>
    </dt>
    <dd>New value for the preference</dd>
    <dt>
        options
        <span class="label label-optional">optional</span>
        <span class="label label-info">{location: ?Object, context: ?Object}</span>
    </dt>
    <dd>Specific location in which to set the value or the context to use when setting the value</dd>
    <dt>
        doNotSave
        <span class="label label-optional">optional</span>
        <span class="label label-info">boolean</span>
    </dt>
    <dd>True if the preference change should not be saved automatically.</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">valid: {boolean},true if no validator specified or if value is valid stored: {boolean}</span></dt>
    <dd>true if a value was stored</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        set: function (id, value, options, doNotSave) {
            options = options || {};
            var context = this._getContext(options.context),

                &#x2F;&#x2F; The case where the &quot;default&quot; scope was chosen specifically is special.
                &#x2F;&#x2F; Usually &quot;default&quot; would come up only when a preference did not have any
                &#x2F;&#x2F; user-set value, in which case we&#39;d want to set the value in a different scope.
                forceDefault = options.location &amp;&amp; options.location.scope === &quot;default&quot; ? true : false,
                location = options.location || this.getPreferenceLocation(id, context);

            if (!location || (location.scope === &quot;default&quot; &amp;&amp; !forceDefault)) {
                var scopeOrder = this._getScopeOrder(context);

                &#x2F;&#x2F; The default scope for setting a preference is the lowest priority
                &#x2F;&#x2F; scope after &quot;default&quot;.
                if (scopeOrder.length &gt; 1) {
                    location = {
                        scope: scopeOrder[scopeOrder.length - 2]
                    };
                } else {
                    return { valid: true, stored: false };
                }
            }

            var scope = this._scopes[location.scope];
            if (!scope) {
                return { valid: true, stored: false };
            }

            var pref      = this.getPreference(id),
                validator = pref &amp;&amp; pref.validator;
            if (validator &amp;&amp; !validator(value)) {
                return { valid: false, stored: false };
            }

            var wasSet = scope.set(id, value, context, location);
            if (wasSet) {
                if (!doNotSave) {
                    this.save();
                }
                this._triggerChange({
                    ids: [id]
                });
            }
            return { valid: true, stored: wasSet };
        },</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        signalContextChanged 
        <a class="anchor" href="#PreferencesSystem-signalContextChanged" id="PreferencesSystem-signalContextChanged"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Signals the context change to all the scopes within the preferences
layer.  PreferencesManager is in charge of computing the context and
signaling the changes to PreferencesSystem.</p>
</div>
    
<dl>
    <dt>
        oldContext
        <span class="label label-info">{path: string,language: string}</span>
    </dt>
    <dd>Old context</dd>
    <dt>
        newContext
        <span class="label label-info">{path: string,language: string}</span>
    </dt>
    <dd>New context</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        signalContextChanged: function (oldContext, newContext) {
            var changes = [];

            _.each(this._scopes, function (scope) {
                var changedInScope = scope.contextChanged(oldContext, newContext);
                if (changedInScope) {
                    changes.push(changedInScope);
                }
            });

            changes = _.union.apply(null, changes);
            if (changes.length &gt; 0) {
                this._triggerChange({
                    ids: changes
                });
            }
        },</code></pre></div>
        </section>

    </div>

</section>
        </div>
      </div>
    </div>

    <script type="text/javascript" src="../../assets/js/prism.js"></script>
  </body>
</html>
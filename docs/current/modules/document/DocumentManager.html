<!DOCTYPE html>
<html lang="en">
  <head>
    <title>DocumentManager - Brackets API</title>
    <link rel="stylesheet" href="../../assets/css/bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/typeahead.js-bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/font-awesome.css">
    <link rel="stylesheet" href="../../assets/css/prism.css">
    <link rel="stylesheet" href="../../assets/css/main.css">
    <!--[if IE 7]>
    <link rel="stylesheet" href="../assets/css/font-awesome-ie7.css">
    <![endif]-->
    <script type="text/javascript" src="../../assets/js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../../assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="../../assets/js/typeahead.js"></script>
    <script type="text/javascript" src="../../assets/js/main.js"></script>
    <script src="http://use.edgefonts.net/source-sans-pro:n3,i3,n4,i4;source-code-pro.js"></script>

    <!-- Control the Flash of Unstyled Text (or FOUT) -->
    <style type="text/css">
        .wf-loading h1, .wf-loading h2, .wf-loading h3, .wf-loading h4,
        .wf-loading h5, .wf-loading h6, .wf-loading p, .wf-loading a {
            visibility: hidden;
        }
    </style>
    
    <script>
      window.moduleLevel = "../..";
    </script>
  </head>
  
  <body>
    <div class="row-fluid">
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="../../index.html">Brackets API</a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li><a href="#dependencies">Dependencies</a></li>
                <li><a href="#variables">Variables</a></li>
                <li><a href="#functions">Functions</a></li>
                <li><a href="#classes">Classes</a></li>
              </ul>
            </div>
            <input class="typeahead" placeholder="Search..." type="text" >
          </div>
        </div>
      </div>    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="left-section">
            <h2 class="number-of-modules">Modules (159)</h2>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_"><i class="icon-folder-open"></i>[root]</a>
              </li>
            </ul>
            <ul id="package_" class="nav nav-list">
              <li><a href="../../modules/brackets.html">brackets</a></li>
              <li><a href="../../modules/dependencies.html">dependencies</a></li>
              <li><a href="../../modules/main.html">main</a></li>
              <li><a href="../../modules/strings.html">strings</a></li>
              <li><a href="../../modules/xorigin.html">xorigin</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_command"><i class="icon-folder-open"></i>command</a>
              </li>
            </ul>
            <ul id="package_command" class="nav nav-list">
              <li><a href="../../modules/command/CommandManager.html">CommandManager</a></li>
              <li><a href="../../modules/command/Commands.html">Commands</a></li>
              <li><a href="../../modules/command/DefaultMenus.html">DefaultMenus</a></li>
              <li><a href="../../modules/command/KeyBindingManager.html">KeyBindingManager</a></li>
              <li><a href="../../modules/command/Menus.html">Menus</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_document"><i class="icon-folder-open"></i>document</a>
              </li>
            </ul>
            <ul id="package_document" class="nav nav-list">
              <li><a href="../../modules/document/ChangedDocumentTracker.html">ChangedDocumentTracker</a></li>
              <li><a href="../../modules/document/Document.html">Document</a></li>
              <li><a href="../../modules/document/DocumentCommandHandlers.html">DocumentCommandHandlers</a></li>
              <li><a href="../../modules/document/DocumentManager.html">DocumentManager</a></li>
              <li><a href="../../modules/document/InMemoryFile.html">InMemoryFile</a></li>
              <li><a href="../../modules/document/TextRange.html">TextRange</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_editor"><i class="icon-folder-open"></i>editor</a>
              </li>
            </ul>
            <ul id="package_editor" class="nav nav-list">
              <li><a href="../../modules/editor/CodeHintList.html">CodeHintList</a></li>
              <li><a href="../../modules/editor/CodeHintManager.html">CodeHintManager</a></li>
              <li><a href="../../modules/editor/CSSInlineEditor.html">CSSInlineEditor</a></li>
              <li><a href="../../modules/editor/Editor.html">Editor</a></li>
              <li><a href="../../modules/editor/EditorCommandHandlers.html">EditorCommandHandlers</a></li>
              <li><a href="../../modules/editor/EditorManager.html">EditorManager</a></li>
              <li><a href="../../modules/editor/EditorOptionHandlers.html">EditorOptionHandlers</a></li>
              <li><a href="../../modules/editor/EditorStatusBar.html">EditorStatusBar</a></li>
              <li><a href="../../modules/editor/ImageViewer.html">ImageViewer</a></li>
              <li><a href="../../modules/editor/InlineTextEditor.html">InlineTextEditor</a></li>
              <li><a href="../../modules/editor/InlineWidget.html">InlineWidget</a></li>
              <li><a href="../../modules/editor/MultiRangeInlineEditor.html">MultiRangeInlineEditor</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_extensibility"><i class="icon-folder-open"></i>extensibility</a>
              </li>
            </ul>
            <ul id="package_extensibility" class="nav nav-list">
              <li><a href="../../modules/extensibility/ExtensionManager.html">ExtensionManager</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerDialog.html">ExtensionManagerDialog</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerView.html">ExtensionManagerView</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerViewModel.html">ExtensionManagerViewModel</a></li>
              <li><a href="../../modules/extensibility/InstallExtensionDialog.html">InstallExtensionDialog</a></li>
              <li><a href="../../modules/extensibility/Package.html">Package</a></li>
              <li><a href="../../modules/extensibility/registry_utils.html">registry_utils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_file"><i class="icon-folder-open"></i>file</a>
              </li>
            </ul>
            <ul id="package_file" class="nav nav-list">
              <li><a href="../../modules/file/FileUtils.html">FileUtils</a></li>
              <li><a href="../../modules/file/NativeFileError.html">NativeFileError</a></li>
              <li><a href="../../modules/file/NativeFileSystem.html">NativeFileSystem</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem"><i class="icon-folder-open"></i>filesystem</a>
              </li>
            </ul>
            <ul id="package_filesystem" class="nav nav-list">
              <li><a href="../../modules/filesystem/Directory.html">Directory</a></li>
              <li><a href="../../modules/filesystem/File.html">File</a></li>
              <li><a href="../../modules/filesystem/FileIndex.html">FileIndex</a></li>
              <li><a href="../../modules/filesystem/FileSystem.html">FileSystem</a></li>
              <li><a href="../../modules/filesystem/FileSystemEntry.html">FileSystemEntry</a></li>
              <li><a href="../../modules/filesystem/FileSystemError.html">FileSystemError</a></li>
              <li><a href="../../modules/filesystem/FileSystemStats.html">FileSystemStats</a></li>
              <li><a href="../../modules/filesystem/WatchedRoot.html">WatchedRoot</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell"><i class="icon-folder-open"></i>filesystem&#x2F;impls&#x2F;appshell</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/AppshellFileSystem.html">AppshellFileSystem</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell_node"><i class="icon-folder-open"></i>filesystem&#x2F;impls&#x2F;appshell&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell_node" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/node/FileWatcherDomain.html">FileWatcherDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_help"><i class="icon-folder-open"></i>help</a>
              </li>
            </ul>
            <ul id="package_help" class="nav nav-list">
              <li><a href="../../modules/help/HelpCommandHandlers.html">HelpCommandHandlers</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_language"><i class="icon-folder-open"></i>language</a>
              </li>
            </ul>
            <ul id="package_language" class="nav nav-list">
              <li><a href="../../modules/language/CodeInspection.html">CodeInspection</a></li>
              <li><a href="../../modules/language/CSSUtils.html">CSSUtils</a></li>
              <li><a href="../../modules/language/HTMLDOMDiff.html">HTMLDOMDiff</a></li>
              <li><a href="../../modules/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../modules/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
              <li><a href="../../modules/language/HTMLTokenizer.html">HTMLTokenizer</a></li>
              <li><a href="../../modules/language/HTMLUtils.html">HTMLUtils</a></li>
              <li><a href="../../modules/language/JSUtils.html">JSUtils</a></li>
              <li><a href="../../modules/language/LanguageManager.html">LanguageManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Agents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Agents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Agents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Agents/ConsoleAgent.html">ConsoleAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/CSSAgent.html">CSSAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMAgent.html">DOMAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMHelpers.html">DOMHelpers</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMNode.html">DOMNode</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/EditAgent.html">EditAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/GotoAgent.html">GotoAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/HighlightAgent.html">HighlightAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/NetworkAgent.html">NetworkAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteAgent.html">RemoteAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteFunctions.html">RemoteFunctions</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/ScriptAgent.html">ScriptAgent</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Documents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Documents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Documents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Documents/CSSDocument.html">CSSDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/CSSPreprocessorDocument.html">CSSPreprocessorDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/HTMLDocument.html">HTMLDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/JSDocument.html">JSDocument</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Inspector"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Inspector</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Inspector" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Inspector/Inspector.html">Inspector</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment"><i class="icon-folder-open"></i>LiveDevelopment</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/LiveDevelopment.html">LiveDevelopment</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevServerManager.html">LiveDevServerManager</a></li>
              <li><a href="../../modules/LiveDevelopment/main.html">main</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Servers"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Servers</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Servers" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Servers/BaseServer.html">BaseServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/FileServer.html">FileServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/UserServer.html">UserServer</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_preferences"><i class="icon-folder-open"></i>preferences</a>
              </li>
            </ul>
            <ul id="package_preferences" class="nav nav-list">
              <li><a href="../../modules/preferences/PreferencesBase.html">PreferencesBase</a></li>
              <li><a href="../../modules/preferences/PreferencesDialogs.html">PreferencesDialogs</a></li>
              <li><a href="../../modules/preferences/PreferencesImpl.html">PreferencesImpl</a></li>
              <li><a href="../../modules/preferences/PreferencesManager.html">PreferencesManager</a></li>
              <li><a href="../../modules/preferences/PreferenceStorage.html">PreferenceStorage</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_project"><i class="icon-folder-open"></i>project</a>
              </li>
            </ul>
            <ul id="package_project" class="nav nav-list">
              <li><a href="../../modules/project/FileIndexManager.html">FileIndexManager</a></li>
              <li><a href="../../modules/project/FileSyncManager.html">FileSyncManager</a></li>
              <li><a href="../../modules/project/FileTreeView.html">FileTreeView</a></li>
              <li><a href="../../modules/project/FileTreeViewModel.html">FileTreeViewModel</a></li>
              <li><a href="../../modules/project/FileViewController.html">FileViewController</a></li>
              <li><a href="../../modules/project/ProjectManager.html">ProjectManager</a></li>
              <li><a href="../../modules/project/ProjectModel.html">ProjectModel</a></li>
              <li><a href="../../modules/project/SidebarView.html">SidebarView</a></li>
              <li><a href="../../modules/project/WorkingSetSort.html">WorkingSetSort</a></li>
              <li><a href="../../modules/project/WorkingSetView.html">WorkingSetView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_search"><i class="icon-folder-open"></i>search</a>
              </li>
            </ul>
            <ul id="package_search" class="nav nav-list">
              <li><a href="../../modules/search/FileFilters.html">FileFilters</a></li>
              <li><a href="../../modules/search/FindBar.html">FindBar</a></li>
              <li><a href="../../modules/search/FindInFiles.html">FindInFiles</a></li>
              <li><a href="../../modules/search/FindInFilesUI.html">FindInFilesUI</a></li>
              <li><a href="../../modules/search/FindReplace.html">FindReplace</a></li>
              <li><a href="../../modules/search/FindUtils.html">FindUtils</a></li>
              <li><a href="../../modules/search/QuickOpen.html">QuickOpen</a></li>
              <li><a href="../../modules/search/ScrollTrackMarkers.html">ScrollTrackMarkers</a></li>
              <li><a href="../../modules/search/SearchModel.html">SearchModel</a></li>
              <li><a href="../../modules/search/SearchResultsView.html">SearchResultsView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_utils"><i class="icon-folder-open"></i>utils</a>
              </li>
            </ul>
            <ul id="package_utils" class="nav nav-list">
              <li><a href="../../modules/utils/AnimationUtils.html">AnimationUtils</a></li>
              <li><a href="../../modules/utils/AppInit.html">AppInit</a></li>
              <li><a href="../../modules/utils/Async.html">Async</a></li>
              <li><a href="../../modules/utils/BuildInfoUtils.html">BuildInfoUtils</a></li>
              <li><a href="../../modules/utils/CollectionUtils.html">CollectionUtils</a></li>
              <li><a href="../../modules/utils/ColorUtils.html">ColorUtils</a></li>
              <li><a href="../../modules/utils/Compatibility.html">Compatibility</a></li>
              <li><a href="../../modules/utils/DeprecationWarning.html">DeprecationWarning</a></li>
              <li><a href="../../modules/utils/DragAndDrop.html">DragAndDrop</a></li>
              <li><a href="../../modules/utils/DropdownEventHandler.html">DropdownEventHandler</a></li>
              <li><a href="../../modules/utils/ExtensionLoader.html">ExtensionLoader</a></li>
              <li><a href="../../modules/utils/ExtensionUtils.html">ExtensionUtils</a></li>
              <li><a href="../../modules/utils/Global.html">Global</a></li>
              <li><a href="../../modules/utils/KeyEvent.html">KeyEvent</a></li>
              <li><a href="../../modules/utils/LocalizationUtils.html">LocalizationUtils</a></li>
              <li><a href="../../modules/utils/NativeApp.html">NativeApp</a></li>
              <li><a href="../../modules/utils/NodeConnection.html">NodeConnection</a></li>
              <li><a href="../../modules/utils/NodeDomain.html">NodeDomain</a></li>
              <li><a href="../../modules/utils/PerfUtils.html">PerfUtils</a></li>
              <li><a href="../../modules/utils/Resizer.html">Resizer</a></li>
              <li><a href="../../modules/utils/ShellAPI.html">ShellAPI</a></li>
              <li><a href="../../modules/utils/StringMatch.html">StringMatch</a></li>
              <li><a href="../../modules/utils/StringUtils.html">StringUtils</a></li>
              <li><a href="../../modules/utils/TokenUtils.html">TokenUtils</a></li>
              <li><a href="../../modules/utils/UpdateNotification.html">UpdateNotification</a></li>
              <li><a href="../../modules/utils/UrlParams.html">UrlParams</a></li>
              <li><a href="../../modules/utils/ValidationUtils.html">ValidationUtils</a></li>
              <li><a href="../../modules/utils/ViewUtils.html">ViewUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_view"><i class="icon-folder-open"></i>view</a>
              </li>
            </ul>
            <ul id="package_view" class="nav nav-list">
              <li><a href="../../modules/view/MainViewFactory.html">MainViewFactory</a></li>
              <li><a href="../../modules/view/MainViewManager.html">MainViewManager</a></li>
              <li><a href="../../modules/view/Pane.html">Pane</a></li>
              <li><a href="../../modules/view/PanelManager.html">PanelManager</a></li>
              <li><a href="../../modules/view/ThemeManager.html">ThemeManager</a></li>
              <li><a href="../../modules/view/ThemeSettings.html">ThemeSettings</a></li>
              <li><a href="../../modules/view/ThemeView.html">ThemeView</a></li>
              <li><a href="../../modules/view/ViewCommandHandlers.html">ViewCommandHandlers</a></li>
              <li><a href="../../modules/view/ViewStateManager.html">ViewStateManager</a></li>
              <li><a href="../../modules/view/WorkspaceManager.html">WorkspaceManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_widgets"><i class="icon-folder-open"></i>widgets</a>
              </li>
            </ul>
            <ul id="package_widgets" class="nav nav-list">
              <li><a href="../../modules/widgets/bootstrap-alerts.html">bootstrap-alerts</a></li>
              <li><a href="../../modules/widgets/bootstrap-button.html">bootstrap-button</a></li>
              <li><a href="../../modules/widgets/bootstrap-dropdown.html">bootstrap-dropdown</a></li>
              <li><a href="../../modules/widgets/bootstrap-modal.html">bootstrap-modal</a></li>
              <li><a href="../../modules/widgets/bootstrap-popover.html">bootstrap-popover</a></li>
              <li><a href="../../modules/widgets/bootstrap-scrollspy.html">bootstrap-scrollspy</a></li>
              <li><a href="../../modules/widgets/bootstrap-tab.html">bootstrap-tab</a></li>
              <li><a href="../../modules/widgets/bootstrap-tooltip.html">bootstrap-tooltip</a></li>
              <li><a href="../../modules/widgets/bootstrap-twipsy-mod.html">bootstrap-twipsy-mod</a></li>
              <li><a href="../../modules/widgets/DefaultDialogs.html">DefaultDialogs</a></li>
              <li><a href="../../modules/widgets/Dialogs.html">Dialogs</a></li>
              <li><a href="../../modules/widgets/DropdownButton.html">DropdownButton</a></li>
              <li><a href="../../modules/widgets/ModalBar.html">ModalBar</a></li>
              <li><a href="../../modules/widgets/PopUpManager.html">PopUpManager</a></li>
              <li><a href="../../modules/widgets/StatusBar.html">StatusBar</a></li>
            </ul>
          </div>
        </div>
        <div class="module span9">
<h1>DocumentManager</h1>


<section class="description">
    <h3>Description</h3>
    
    <div><p>DocumentManager maintains a list of currently &#39;open&#39; Documents. The DocumentManager is responsible 
for coordinating document operations and dispatching certain document events.</p>
<p>Document is the model for a file&#39;s contents; it dispatches events whenever those contents change.
To transiently inspect a file&#39;s content, simply get a Document and call getText() on it. However,
to be notified of Document changes or to modify a Document, you MUST call addRef() to ensure the
Document instance &#39;stays alive&#39; and is shared by all other who read/modify that file. (&#39;Open&#39;
Documents are all Documents that are &#39;kept alive&#39;, i.e. have ref count &gt; 0).</p>
<p>To get a Document, call getDocumentForPath(); never new up a Document yourself.</p>
<p>Secretly, a Document may use an Editor instance to act as the model for its internal state. (This
is unavoidable because CodeMirror does not separate its model from its UI). Documents are not
modifiable until they have a backing &#39;master Editor&#39;. Creation of the backing Editor is owned by
EditorManager. A Document only gets a backing Editor if it opened in an editor.</p>
<p>A non-modifiable Document may still dispatch change notifications, if the Document was changed
externally on disk.</p>
<p>Aside from the text content, Document tracks a few pieces of metadata - notably, whether there are
any unsaved changes.</p>
<p>This module dispatches several events:</p>
<ul>
<li>dirtyFlagChange -- When any Document&#39;s isDirty flag changes. The 2nd arg to the listener is the
Document whose flag changed.</li>
<li>documentSaved -- When a Document&#39;s changes have been saved. The 2nd arg to the listener is the
Document that has been saved.</li>
<li>documentRefreshed -- When a Document&#39;s contents have been reloaded from disk. The 2nd arg to the
listener is the Document that has been refreshed.</li>
</ul>
<p>NOTE: WorkingSet APIs have been deprecated and have moved to MainViewManager as WorkingSet APIs
      Some WorkingSet APIs that have been identified as being used by 3rd party extensions will
      emit deprecation warnings and call the WorkingSet APIS to maintain backwards compatibility</p>
<ul>
<li><p>currentDocumentChange -- Deprecated: use EditorManager activeEditorChange (which covers all editors,
not just full-sized editors) or MainViewManager currentFileChange (which covers full-sized views
only, but is also triggered for non-editor views e.g. image files).</p>
</li>
<li><p>fileNameChange -- When the name of a file or folder has changed. The 2nd arg is the old name.
The 3rd arg is the new name.  Generally, however, file objects have already been changed by the 
time this event is dispatched so code that relies on matching the filename to a file object 
will need to compare the newname.</p>
</li>
<li><p>pathDeleted -- When a file or folder has been deleted. The 2nd arg is the path that was deleted.</p>
</li>
</ul>
<p>These are jQuery events, so to listen for them you do something like this:
   $(DocumentManager).on(&quot;eventname&quot;, handler);</p>
<p>Document objects themselves also dispatch some events - see Document docs for details.</p>
</div>
    
</section>

<section id="dependencies">
    <h3>Dependencies</h3>

    <ul class="nav nav-list">
        <li><a href="..&#x2F;../modules/utils/AppInit.html">AppInit</a></li>
        <li><a href="..&#x2F;../modules/command/CommandManager.html">CommandManager</a></li>
        <li><a href="..&#x2F;../modules/command/Commands.html">Commands</a></li>
        <li><a href="..&#x2F;../modules/utils/DeprecationWarning.html">DeprecationWarning</a></li>
        <li><a href="..&#x2F;../modules/document/Document.html">Document</a></li>
        <li><a href="..&#x2F;../modules/project/FileSyncManager.html">FileSyncManager</a></li>
        <li><a href="..&#x2F;../modules/filesystem/FileSystem.html">FileSystem</a></li>
        <li><a href="..&#x2F;../modules/file/FileUtils.html">FileUtils</a></li>
        <li><a href="..&#x2F;../modules/document/InMemoryFile.html">InMemoryFile</a></li>
        <li><a href="..&#x2F;../modules/language/LanguageManager.html">LanguageManager</a></li>
        <li><a href="..&#x2F;../modules/thirdparty/lodash.html">lodash</a></li>
        <li><a href="..&#x2F;../modules/view/MainViewFactory.html">MainViewFactory</a></li>
        <li><a href="..&#x2F;../modules/view/MainViewManager.html">MainViewManager</a></li>
        <li><a href="..&#x2F;../modules/utils/PerfUtils.html">PerfUtils</a></li>
        <li><a href="..&#x2F;../modules/preferences/PreferencesManager.html">PreferencesManager</a></li>
        <li><a href="..&#x2F;../modules/strings.html">strings</a></li>
    </ul>

</section>
<section id="variables">
    
    <h3>Variables 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>    </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _openDocuments 
        <a class="anchor" href="#-_openDocuments" id="-_openDocuments"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>All documents with refCount &gt; 0. Maps Document.file.id -&gt; Document.</p>
</div>
    
<dl>
    <dt>Type</dt>
    <dd>Object.&lt;string, Document&gt;</dd>
    <dt>Private</dt>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _openDocuments = {};</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _untitledDocumentPath 
        <a class="anchor" href="#-_untitledDocumentPath" id="-_untitledDocumentPath"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>Private</dt>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _untitledDocumentPath = &quot;&#x2F;_brackets_&quot; + _.random(10000000, 99999999);</code></pre></div>
</section>

<section id="functions">

    <h3>Functions 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>    </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _checkPreferencePrefix 
        <a class="anchor" href="#-_checkPreferencePrefix" id="-_checkPreferencePrefix"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        key
        <span class="label label-info">string</span>
    </dt>
    <dd>The key of the preference to be examined for migration of working set files.</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">?string</span>
</dt>
    <dd>- the scope to which the preference is to be migrated</dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _checkPreferencePrefix(key) {
        var pathPrefix = &quot;files_&quot;;
        if (key.indexOf(pathPrefix) === 0) {
            &#x2F;&#x2F; Get the project path from the old preference key by stripping &quot;files_&quot;.
            var projectPath = key.substr(pathPrefix.length);
            return &quot;user project.files &quot; + projectPath;
        }
        
        return null;
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _deprecateEvent 
        <a class="anchor" href="#-_deprecateEvent" id="-_deprecateEvent"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Creates a deprecation warning event handler</p>
</div>
    
<dl>
    <dt>
        eventName
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">string</span>
    </dt>
    <dd>- the event being deprecated. The Event Name doesn't change just which object dispatches it</dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _deprecateEvent(eventName) {
        DeprecationWarning.deprecateEvent(exports,
                                          MainViewManager,
                                          eventName,
                                          eventName,
                                          &quot;DocumentManager.&quot; + eventName,
                                          &quot;MainViewManager.&quot; + eventName);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _gcDocuments 
        <a class="anchor" href="#-_gcDocuments" id="-_gcDocuments"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Cleans up any loose Documents whose only ref is its own master Editor, and that Editor is not
rooted in the UI anywhere. This can happen if the Editor is auto-created via Document APIs that
trigger _ensureMasterEditor() without making it dirty. E.g. a command invoked on the focused
inline editor makes no-op edits or does a read-only operation.</p>
</div>
    
<dl>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _gcDocuments() {
        getAllOpenDocuments().forEach(function (doc) {
            &#x2F;&#x2F; Is the only ref to this document its own master Editor?
            if (doc._refCount === 1 &amp;&amp; doc._masterEditor) {
                &#x2F;&#x2F; Destroy the Editor if it&#39;s not being kept alive by the UI
                MainViewManager._destroyEditorIfNotNeeded(doc);
            }
        });
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _handleLanguageAdded 
        <a class="anchor" href="#-_handleLanguageAdded" id="-_handleLanguageAdded"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _handleLanguageAdded() {
        _.forEach(_openDocuments, function (doc) {
            &#x2F;&#x2F; No need to look at the new language if this document has one already
            if (doc.getLanguage().isFallbackLanguage()) {
                doc._updateLanguage();
            }
        });
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _handleLanguageModified 
        <a class="anchor" href="#-_handleLanguageModified" id="-_handleLanguageModified"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _handleLanguageModified(event, language) {
        _.forEach(_openDocuments, function (doc) {
            var docLanguage = doc.getLanguage();
            &#x2F;&#x2F; A modified language can affect a document
            &#x2F;&#x2F; - if its language was modified
            &#x2F;&#x2F; - if the document doesn&#39;t have a language yet and its file extension was added to the modified language
            if (docLanguage === language || docLanguage.isFallbackLanguage()) {
                doc._updateLanguage();
            }
        });
    }
    
    &#x2F;&#x2F; For compatibility
    $(DocumentModule)
        .on(&quot;_afterDocumentCreate&quot;, function (event, doc) {
            if (_openDocuments[doc.file.id]) {
                console.error(&quot;Document for this path already in _openDocuments!&quot;);
                return true;
            }

            _openDocuments[doc.file.id] = doc;
            $(exports).triggerHandler(&quot;afterDocumentCreate&quot;, doc);
        })
        .on(&quot;_beforeDocumentDelete&quot;, function (event, doc) {
            if (!_openDocuments[doc.file.id]) {
                console.error(&quot;Document with references was not in _openDocuments!&quot;);
                return true;
            }

            $(exports).triggerHandler(&quot;beforeDocumentDelete&quot;, doc);
            delete _openDocuments[doc.file.id];
        })
        .on(&quot;_documentRefreshed&quot;, function (event, doc) {
            $(exports).triggerHandler(&quot;documentRefreshed&quot;, doc);
        })
        .on(&quot;_dirtyFlagChange&quot;, function (event, doc) {
            $(exports).triggerHandler(&quot;dirtyFlagChange&quot;, doc);
            if (doc.isDirty) {
                MainViewManager.addToWorkingSet(MainViewManager.ACTIVE_PANE, doc.file);
            }
        })
        .on(&quot;_documentSaved&quot;, function (event, doc) {
            $(exports).triggerHandler(&quot;documentSaved&quot;, doc);
        });</code></pre></div><div class="member public deprecated">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
            <span class="label label-deprecated label-inverse">deprecated</span>
        addListToWorkingSet 
        <a class="anchor" href="#-addListToWorkingSet" id="-addListToWorkingSet"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        fileList
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">Array.&lt;File&gt;</span>
    </dt>
    <dd></dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function addListToWorkingSet(fileList) {
        DeprecationWarning.deprecationWarning(&quot;Use MainViewManager.addListToWorkingSet() instead of DocumentManager.addListToWorkingSet()&quot;, true);
        MainViewManager.addListToWorkingSet(MainViewManager.ACTIVE_PANE, fileList);
    }</code></pre></div><div class="member public deprecated">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
            <span class="label label-deprecated label-inverse">deprecated</span>
        addToWorkingSet 
        <a class="anchor" href="#-addToWorkingSet" id="-addToWorkingSet"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Adds the given file to the end of the working set list.</p>
</div>
    
<dl>
    <dt>
        file
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">File</span>
    </dt>
    <dd></dd>
    <dt>
        index
        <span class="label label-optional">optional</span>
        <span class="label label-info">number</span>
    </dt>
    <dd>Position to add to list (defaults to last); -1 is ignored</dd>
    <dt>
        forceRedraw
        <span class="label label-optional">optional</span>
        <span class="label label-info">boolean</span>
    </dt>
    <dd>If true, a working set change notification is always sent (useful if suppressRedraw was used with removeFromWorkingSet() earlier)</dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function addToWorkingSet(file, index, forceRedraw) {
        DeprecationWarning.deprecationWarning(&quot;Use MainViewManager.addToWorkingSet() instead of DocumentManager.addToWorkingSet()&quot;, true);
        MainViewManager.addToWorkingSet(MainViewManager.ACTIVE_PANE, file, index, forceRedraw);
    }</code></pre></div><div class="member public deprecated">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
            <span class="label label-deprecated label-inverse">deprecated</span>
        beginDocumentNavigation 
        <a class="anchor" href="#-beginDocumentNavigation" id="-beginDocumentNavigation"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>freezes the Working Set MRU list </p>
</div>
    
<dl>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function beginDocumentNavigation() {
        DeprecationWarning.deprecationWarning(&quot;Use MainViewManager.beginTraversal() instead of DocumentManager.beginDocumentNavigation()&quot;, true);
        MainViewManager.beginTraversal();
    }</code></pre></div><div class="member public deprecated">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
            <span class="label label-deprecated label-inverse">deprecated</span>
        closeAll 
        <a class="anchor" href="#-closeAll" id="-closeAll"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>closes all open files</p>
</div>
    
<dl>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function closeAll() {
        DeprecationWarning.deprecationWarning(&quot;Use CommandManager.execute(Commands.FILE_CLOSE_ALL,{PaneId: MainViewManager.ALL_PANES}) instead of DocumentManager.closeAll()&quot;, true);
        CommandManager.execute(Commands.FILE_CLOSE_ALL, {PaneId: MainViewManager.ALL_PANES});
    }</code></pre></div><div class="member public deprecated">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
            <span class="label label-deprecated label-inverse">deprecated</span>
        closeFullEditor 
        <a class="anchor" href="#-closeFullEditor" id="-closeFullEditor"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>closes the specified file file </p>
</div>
    
<dl>
    <dt>
        file
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">File</span>
    </dt>
    <dd>- the file to close</dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function closeFullEditor(file) {
        DeprecationWarning.deprecationWarning(&quot;Use CommandManager.execute(Commands.FILE_CLOSE, {File: file} instead of DocumentManager.closeFullEditor()&quot;, true);
        CommandManager.execute(Commands.FILE_CLOSE, {File: file});
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        createUntitledDocument 
        <a class="anchor" href="#-createUntitledDocument" id="-createUntitledDocument"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Creates an untitled document. The associated File has a fullPath that
looks like /some-random-string/Untitled-counter.fileExt.</p>
</div>
    
<dl>
    <dt>
        counter
        <span class="label label-info">number</span>
    </dt>
    <dd>- used in the name of the new Document's File</dd>
    <dt>
        fileExt
        <span class="label label-info">string</span>
    </dt>
    <dd>- file extension of the new Document's File, including "."</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">Document</span>
</dt>
    <dd>- a new untitled Document</dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function createUntitledDocument(counter, fileExt) {
        var filename = Strings.UNTITLED + &quot;-&quot; + counter + fileExt,
            fullPath = _untitledDocumentPath + &quot;&#x2F;&quot; + filename,
            now = new Date(),
            file = new InMemoryFile(fullPath, FileSystem);
        
        return new DocumentModule.Document(file, now, &quot;&quot;);
    }</code></pre></div><div class="member public deprecated">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
            <span class="label label-deprecated label-inverse">deprecated</span>
        finalizeDocumentNavigation 
        <a class="anchor" href="#-finalizeDocumentNavigation" id="-finalizeDocumentNavigation"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>ends document navigation and moves the current file to the front of the MRU list in the Working Set</p>
</div>
    
<dl>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function finalizeDocumentNavigation() {
        DeprecationWarning.deprecationWarning(&quot;Use MainViewManager.endTraversal() instead of DocumentManager.finalizeDocumentNavigation()&quot;, true);
        MainViewManager.endTraversal();
    }</code></pre></div><div class="member public deprecated">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
            <span class="label label-deprecated label-inverse">deprecated</span>
        findInWorkingSet 
        <a class="anchor" href="#-findInWorkingSet" id="-findInWorkingSet"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Returns the index of the file matching fullPath in the working set.</p>
</div>
    
<dl>
    <dt>
        fullPath
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">string</span>
    </dt>
    <dd></dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">number</span>
</dt>
    <dd>index, -1 if not found</dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function findInWorkingSet(fullPath) {
        DeprecationWarning.deprecationWarning(&quot;Use MainViewManager.findInWorkingSet() instead of DocumentManager.findInWorkingSet()&quot;, true);
        return MainViewManager.findInWorkingSet(MainViewManager.ACTIVE_PANE, fullPath);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        getAllOpenDocuments 
        <a class="anchor" href="#-getAllOpenDocuments" id="-getAllOpenDocuments"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Returns all Documents that are &#39;open&#39; in the UI somewhere (for now, this means open in an
inline editor and/or a full-size editor). Only these Documents can be modified, and only
these Documents are synced with external changes on disk.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">Array.&lt;Document&gt;</span>
</dt>
    <dd></dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getAllOpenDocuments() {
        var result = [];
        var id;
        for (id in _openDocuments) {
            if (_openDocuments.hasOwnProperty(id)) {
                result.push(_openDocuments[id]);
            }
        }
        return result;
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        getCurrentDocument 
        <a class="anchor" href="#-getCurrentDocument" id="-getCurrentDocument"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Returns the Document that is currently open in the editor UI. May be null.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">?Document</span>
</dt>
    <dd></dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getCurrentDocument() {
        var file = MainViewManager.getCurrentlyViewedFile(MainViewManager.ACTIVE_PANE);
        
        if (file) {
            return getOpenDocumentForPath(file.fullPath);
        }
        
        return null;
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        getDocumentForPath 
        <a class="anchor" href="#-getDocumentForPath" id="-getDocumentForPath"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Gets an existing open Document for the given file, or creates a new one if the Document is
not currently open (&#39;open&#39; means referenced by the UI somewhere). Always use this method to
get Documents; do not call the Document constructor directly. This method is safe to call
in parallel.</p>
<p>If you are going to hang onto the Document for more than just the duration of a command - e.g.
if you are going to display its contents in a piece of UI - then you must addRef() the Document
and listen for changes on it. (Note: opening the Document in an Editor automatically manages
refs and listeners for that Editor UI).</p>
<p>If all you need is the Document&#39;s getText() value, use the faster getDocumentText() instead.</p>
</div>
    
<dl>
    <dt>
        fullPath
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">string</span>
    </dt>
    <dd></dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">$.Promise</span>
</dt>
    <dd>A promise object that will be resolved with the Document, or rejected with a FileSystemError if the file is not yet open and can't be read from disk.</dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getDocumentForPath(fullPath) {
        var doc = getOpenDocumentForPath(fullPath);

        if (doc) {
            &#x2F;&#x2F; use existing document
            return new $.Deferred().resolve(doc).promise();
        } else {
            
            &#x2F;&#x2F; Should never get here if the fullPath refers to an Untitled document
            if (fullPath.indexOf(_untitledDocumentPath) === 0) {
                console.error(&quot;getDocumentForPath called for non-open untitled document: &quot; + fullPath);
                return new $.Deferred().reject().promise();
            }
            
            var file            = FileSystem.getFileForPath(fullPath),
                pendingPromise  = getDocumentForPath._pendingDocumentPromises[file.id];
            
            if (pendingPromise) {
                &#x2F;&#x2F; wait for the result of a previous request
                return pendingPromise;
            } else {
                var result = new $.Deferred(),
                    promise = result.promise();
                
                &#x2F;&#x2F; log this document&#39;s Promise as pending
                getDocumentForPath._pendingDocumentPromises[file.id] = promise;
    
                &#x2F;&#x2F; create a new document
                var perfTimerName = PerfUtils.markStart(&quot;getDocumentForPath:\t&quot; + fullPath);
    
                result.done(function () {
                    PerfUtils.addMeasurement(perfTimerName);
                }).fail(function () {
                    PerfUtils.finalizeMeasurement(perfTimerName);
                });
    
                FileUtils.readAsText(file)
                    .always(function () {
                        &#x2F;&#x2F; document is no longer pending
                        delete getDocumentForPath._pendingDocumentPromises[file.id];
                    })
                    .done(function (rawText, readTimestamp) {
                        doc = new DocumentModule.Document(file, readTimestamp, rawText);
                                
                        &#x2F;&#x2F; This is a good point to clean up any old dangling Documents
                        _gcDocuments();
                        
                        result.resolve(doc);
                    })
                    .fail(function (fileError) {
                        result.reject(fileError);
                    });
                
                return promise;
            }
        }
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        getDocumentText 
        <a class="anchor" href="#-getDocumentText" id="-getDocumentText"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Gets the text of a Document (including any unsaved changes), or would-be Document if the
file is not actually open. More efficient than getDocumentForPath(). Use when you&#39;re reading
document(s) but don&#39;t need to hang onto a Document object.</p>
<p>If the file is open this is equivalent to calling getOpenDocumentForPath().getText(). If the
file is NOT open, this is like calling getDocumentForPath()...getText() but more efficient.
Differs from plain FileUtils.readAsText() in two ways: (a) line endings are still normalized
as in Document.getText(); (b) unsaved changes are returned if there are any.</p>
</div>
    
<dl>
    <dt>
        file
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">File</span>
    </dt>
    <dd>The file to get the text for.</dd>
    <dt>
        checkLineEndings
        <span class="label label-optional">optional</span>
        <span class="label label-info">boolean</span>
    </dt>
    <dd>Whether to return line ending information. Default false (slightly more efficient).</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">$.Promise</span>
</dt>
    <dd>A promise that is resolved with three parameters: contents - string: the document's text timestamp - Date: the last time the document was changed on disk (might not be the same as the last time it was changed in memory) lineEndings - string: the original line endings of the file, one of the FileUtils.LINE_ENDINGS_* constants; will be null if checkLineEndings was false. or rejected with a filesystem error.</dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getDocumentText(file, checkLineEndings) {
        var result = new $.Deferred(),
            doc = getOpenDocumentForPath(file.fullPath);
        if (doc) {
            result.resolve(doc.getText(), doc.diskTimestamp, checkLineEndings ? doc._lineEndings : null);
        } else {
            file.read(function (err, contents, stat) {
                if (err) {
                    result.reject(err);
                } else {
                    &#x2F;&#x2F; Normalize line endings the same way Document would, but don&#39;t actually
                    &#x2F;&#x2F; new up a Document (which entails a bunch of object churn).
                    var originalLineEndings = checkLineEndings ? FileUtils.sniffLineEndings(contents) : null;
                    contents = DocumentModule.Document.normalizeText(contents);
                    result.resolve(contents, stat.mtime, originalLineEndings);
                }
            });
        }
        return result.promise();
    }</code></pre></div><div class="member public deprecated">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
            <span class="label label-deprecated label-inverse">deprecated</span>
        getNextPrevFile 
        <a class="anchor" href="#-getNextPrevFile" id="-getNextPrevFile"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Get the next or previous file in the working set, in MRU order (relative to currentDocument). May
return currentDocument itself if working set is length 1.</p>
</div>
    
<dl>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getNextPrevFile(inc) {
        DeprecationWarning.deprecationWarning(&quot;Use MainViewManager.traverseToNextViewByMRU() instead of DocumentManager.getNextPrevFile()&quot;, true);
        var result = MainViewManager.traverseToNextViewByMRU(inc);
        if (result) {
            return result.file;
        }
        return null;
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        getOpenDocumentForPath 
        <a class="anchor" href="#-getOpenDocumentForPath" id="-getOpenDocumentForPath"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Returns the existing open Document for the given file, or null if the file is not open (&#39;open&#39;
means referenced by the UI somewhere). If you will hang onto the Document, you must addRef()
it; see {@link getDocumentForPath()} for details.</p>
</div>
    
<dl>
    <dt>
        fullPath
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">string</span>
    </dt>
    <dd></dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">?Document</span>
</dt>
    <dd></dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getOpenDocumentForPath(fullPath) {
        var id;
        
        &#x2F;&#x2F; Need to walk all open documents and check for matching path. We can&#39;t
        &#x2F;&#x2F; use getFileForPath(fullPath).id since the file it returns won&#39;t match
        &#x2F;&#x2F; an Untitled document&#39;s InMemoryFile.
        for (id in _openDocuments) {
            if (_openDocuments.hasOwnProperty(id)) {
                if (_openDocuments[id].file.fullPath === fullPath) {
                    return _openDocuments[id];
                }
            }
        }
        return null;
    }</code></pre></div><div class="member public deprecated">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
            <span class="label label-deprecated label-inverse">deprecated</span>
        getWorkingSet 
        <a class="anchor" href="#-getWorkingSet" id="-getWorkingSet"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Returns a list of items in the working set in UI list order. May be 0-length, but never null.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">Array.&lt;File&gt;</span>
</dt>
    <dd></dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getWorkingSet() {
        DeprecationWarning.deprecationWarning(&quot;Use MainViewManager.getViews() instead of DocumentManager.getWorkingSet()&quot;, true);
        return MainViewManager.getWorkingSet(MainViewManager.ALL_PANES)
            .filter(function (file) {
                &#x2F;&#x2F; Legacy didn&#39;t allow for files with custom viewers
                return !MainViewFactory.findSuitableFactoryForPath(file.fullPath);
            });
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        notifyFileDeleted 
        <a class="anchor" href="#-notifyFileDeleted" id="-notifyFileDeleted"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Reacts to a file being deleted: if there is a Document for this file, causes it to dispatch a
&quot;deleted&quot; event; ensures it&#39;s not the currentDocument; and removes this file from the working
set. These actions in turn cause all open editors for this file to close. Discards any unsaved
changes - it is expected that the UI has already confirmed with the user before calling.</p>
<p>To simply close a main editor when the file hasn&#39;t been deleted, use closeFullEditor() or FILE_CLOSE.</p>
<p>FUTURE: Instead of an explicit notify, we should eventually listen for deletion events on some
sort of &quot;project file model,&quot; making this just a private event handler.</p>
<p>NOTE: This function is not for general consumption, is considered private and may be deprecated
       without warning in a future release.</p>
</div>
    
<dl>
    <dt>
        file
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">File</span>
    </dt>
    <dd></dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function notifyFileDeleted(file) {
        &#x2F;&#x2F; Notify all editors to close as well
        $(exports).triggerHandler(&quot;pathDeleted&quot;, file.fullPath);
        
        var doc = getOpenDocumentForPath(file.fullPath);
        
        if (doc) {
            $(doc).triggerHandler(&quot;deleted&quot;);
        }
        
        &#x2F;&#x2F; At this point, all those other views SHOULD have released the Doc
        if (doc &amp;&amp; doc._refCount &gt; 0) {
            console.warn(&quot;Deleted &quot; + file.fullPath + &quot; Document still has &quot; + doc._refCount + &quot; references. Did someone addRef() without listening for &#39;deleted&#39;?&quot;);
        }
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        notifyPathDeleted 
        <a class="anchor" href="#-notifyPathDeleted" id="-notifyPathDeleted"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Called after a file or folder has been deleted. This function is responsible
for updating underlying model data and notifying all views of the change.</p>
</div>
    
<dl>
    <dt>
        fullPath
        <span class="label label-info">string</span>
    </dt>
    <dd>The path of the file/folder that has been deleted</dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function notifyPathDeleted(fullPath) {
        &#x2F;&#x2F; FileSyncManager.syncOpenDocuments() does all the work prompting 
        &#x2F;&#x2F;  the user to save any unsaved changes and then calls us back
        &#x2F;&#x2F;  via notifyFileDeleted
        FileSyncManager.syncOpenDocuments(Strings.FILE_DELETED_TITLE);
        
        if (!getOpenDocumentForPath(fullPath) &amp;&amp;
                !MainViewManager.findInAllWorkingSets(fullPath).length) {
            &#x2F;&#x2F; For images not open in the workingset,
            &#x2F;&#x2F; FileSyncManager.syncOpenDocuments() will 
            &#x2F;&#x2F;  not tell us to close those views
            $(exports).triggerHandler(&quot;pathDeleted&quot;, fullPath);
        }
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        notifyPathNameChanged 
        <a class="anchor" href="#-notifyPathNameChanged" id="-notifyPathNameChanged"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Called after a file or folder name has changed. This function is responsible
for updating underlying model data and notifying all views of the change.</p>
</div>
    
<dl>
    <dt>
        oldName
        <span class="label label-info">string</span>
    </dt>
    <dd>The old name of the file/folder</dd>
    <dt>
        newName
        <span class="label label-info">string</span>
    </dt>
    <dd>The new name of the file/folder</dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function notifyPathNameChanged(oldName, newName) {
        &#x2F;&#x2F; Notify all open documents 
        _.forEach(_openDocuments, function (doc) {
            &#x2F;&#x2F; TODO: Only notify affected documents? For now _notifyFilePathChange 
            &#x2F;&#x2F; just updates the language if the extension changed, so it&#39;s fine
            &#x2F;&#x2F; to call for all open docs.
            doc._notifyFilePathChanged();
        });
        
        &#x2F;&#x2F; Send a &quot;fileNameChanged&quot; event. This will trigger the views to update.
        $(exports).triggerHandler(&quot;fileNameChange&quot;, [oldName, newName]);
    }</code></pre></div><div class="member public deprecated">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
            <span class="label label-deprecated label-inverse">deprecated</span>
        removeListFromWorkingSet 
        <a class="anchor" href="#-removeListFromWorkingSet" id="-removeListFromWorkingSet"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>closes a list of files </p>
</div>
    
<dl>
    <dt>
        list
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">Array.&lt;File&gt;</span>
    </dt>
    <dd>- list of File objectgs to close</dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function removeListFromWorkingSet(list) {
        DeprecationWarning.deprecationWarning(&quot;Use CommandManager.execute(Commands.FILE_CLOSE_LIST, {PaneId: MainViewManager.ALL_PANES, fileList: list}) instead of DocumentManager.removeListFromWorkingSet()&quot;, true);
        CommandManager.execute(Commands.FILE_CLOSE_LIST, {PaneId: MainViewManager.ALL_PANES, fileList: list});
    }</code></pre></div><div class="member public deprecated">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
            <span class="label label-deprecated label-inverse">deprecated</span>
        setCurrentDocument 
        <a class="anchor" href="#-setCurrentDocument" id="-setCurrentDocument"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>opens the specified document for editing in the currently active pane</p>
</div>
    
<dl>
    <dt>
        document
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">Document</span>
    </dt>
    <dd>The Document to make current.</dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function setCurrentDocument(doc) {
        DeprecationWarning.deprecationWarning(&quot;Use CommandManager.execute(Commands.CMD_OPEN) instead of DocumentManager.setCurrentDocument()&quot;, true);
        CommandManager.execute(Commands.CMD_OPEN, {fullPath: doc.file.fullPath});
    }</code></pre></div>
</section>

        </div>
      </div>
    </div>

    <script type="text/javascript" src="../../assets/js/prism.js"></script>
  </body>
</html>
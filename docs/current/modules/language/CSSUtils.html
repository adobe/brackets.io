<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
    <link rel="stylesheet" href="../../assets/css/bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/typeahead.js-bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/font-awesome.css">
    <link rel="stylesheet" href="../../assets/css/prism.css">
    <link rel="stylesheet" href="../../assets/css/main.css">
    <!--[if IE 7]>
    <link rel="stylesheet" href="../assets/css/font-awesome-ie7.css">
    <![endif]-->
    <script type="text/javascript" src="../../assets/js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../../assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="../../assets/js/typeahead.js"></script>
    <script type="text/javascript" src="../../assets/js/main.js"></script>
    
    <script>
      window.moduleLevel = "../..";
    </script>
  </head>
  <body>
    <div class="row-fluid">
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="../../index.html">Brackets API</a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li><a href="#dependencies">Dependencies</a></li>
                <li><a href="#variables">Variables</a></li>
                <li><a href="#functions">Functions</a></li>
                <li><a href="#classes">Classes</a></li>
              </ul>
            </div>
            <input class="typeahead" placeholder="Search..." type="text" >
          </div>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">
          <div class="page-header">
            <h1>CSSUtils</h1>
          </div>
        </div>
      </div>
      <div class="row-fluid">
        <div class="span3">
          <div class="left-section">
            <ul class="nav nav-list">
              <li class="nav-header">
                <a href="#" id="toggle-other-modules"><i class="icon-folder-close"></i> Modules (181)</a>
              </li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_"><i class="icon-folder-open"></i></a>
              </li>
            </ul>
            <ul id="package_" class="nav nav-list">
              <li><a href="../../modules/brackets.html">brackets</a></li>
              <li><a href="../../modules/dependencies.html">dependencies</a></li>
              <li><a href="../../modules/main.html">main</a></li>
              <li><a href="../../modules/strings.html">strings</a></li>
              <li><a href="../../modules/xorigin.html">xorigin</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_command"><i class="icon-folder-open"></i>command</a>
              </li>
            </ul>
            <ul id="package_command" class="nav nav-list">
              <li><a href="../../modules/command/CommandManager.html">CommandManager</a></li>
              <li><a href="../../modules/command/Commands.html">Commands</a></li>
              <li><a href="../../modules/command/DefaultMenus.html">DefaultMenus</a></li>
              <li><a href="../../modules/command/KeyBindingManager.html">KeyBindingManager</a></li>
              <li><a href="../../modules/command/Menus.html">Menus</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_document"><i class="icon-folder-open"></i>document</a>
              </li>
            </ul>
            <ul id="package_document" class="nav nav-list">
              <li><a href="../../modules/document/ChangedDocumentTracker.html">ChangedDocumentTracker</a></li>
              <li><a href="../../modules/document/Document.html">Document</a></li>
              <li><a href="../../modules/document/DocumentCommandHandlers.html">DocumentCommandHandlers</a></li>
              <li><a href="../../modules/document/DocumentManager.html">DocumentManager</a></li>
              <li><a href="../../modules/document/InMemoryFile.html">InMemoryFile</a></li>
              <li><a href="../../modules/document/TextRange.html">TextRange</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_editor"><i class="icon-folder-open"></i>editor</a>
              </li>
            </ul>
            <ul id="package_editor" class="nav nav-list">
              <li><a href="../../modules/editor/CodeHintList.html">CodeHintList</a></li>
              <li><a href="../../modules/editor/CodeHintManager.html">CodeHintManager</a></li>
              <li><a href="../../modules/editor/CSSInlineEditor.html">CSSInlineEditor</a></li>
              <li><a href="../../modules/editor/Editor.html">Editor</a></li>
              <li><a href="../../modules/editor/EditorCommandHandlers.html">EditorCommandHandlers</a></li>
              <li><a href="../../modules/editor/EditorManager.html">EditorManager</a></li>
              <li><a href="../../modules/editor/EditorOptionHandlers.html">EditorOptionHandlers</a></li>
              <li><a href="../../modules/editor/EditorStatusBar.html">EditorStatusBar</a></li>
              <li><a href="../../modules/editor/ImageViewer.html">ImageViewer</a></li>
              <li><a href="../../modules/editor/InlineTextEditor.html">InlineTextEditor</a></li>
              <li><a href="../../modules/editor/InlineWidget.html">InlineWidget</a></li>
              <li><a href="../../modules/editor/MultiRangeInlineEditor.html">MultiRangeInlineEditor</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_extensibility"><i class="icon-folder-open"></i>extensibility</a>
              </li>
            </ul>
            <ul id="package_extensibility" class="nav nav-list">
              <li><a href="../../modules/extensibility/ExtensionManager.html">ExtensionManager</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerDialog.html">ExtensionManagerDialog</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerView.html">ExtensionManagerView</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerViewModel.html">ExtensionManagerViewModel</a></li>
              <li><a href="../../modules/extensibility/InstallExtensionDialog.html">InstallExtensionDialog</a></li>
              <li><a href="../../modules/extensibility/Package.html">Package</a></li>
              <li><a href="../../modules/extensibility/registry_utils.html">registry_utils</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_file"><i class="icon-folder-open"></i>file</a>
              </li>
            </ul>
            <ul id="package_file" class="nav nav-list">
              <li><a href="../../modules/file/FileUtils.html">FileUtils</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem"><i class="icon-folder-open"></i>filesystem</a>
              </li>
            </ul>
            <ul id="package_filesystem" class="nav nav-list">
              <li><a href="../../modules/filesystem/Directory.html">Directory</a></li>
              <li><a href="../../modules/filesystem/File.html">File</a></li>
              <li><a href="../../modules/filesystem/FileIndex.html">FileIndex</a></li>
              <li><a href="../../modules/filesystem/FileSystem.html">FileSystem</a></li>
              <li><a href="../../modules/filesystem/FileSystemEntry.html">FileSystemEntry</a></li>
              <li><a href="../../modules/filesystem/FileSystemError.html">FileSystemError</a></li>
              <li><a href="../../modules/filesystem/FileSystemStats.html">FileSystemStats</a></li>
              <li><a href="../../modules/filesystem/WatchedRoot.html">WatchedRoot</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell"><i class="icon-folder-open"></i>filesystem.impls.appshell</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/AppshellFileSystem.html">AppshellFileSystem</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell_node"><i class="icon-folder-open"></i>filesystem.impls.appshell.node</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell_node" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/node/ChokidarWatcher.html">ChokidarWatcher</a></li>
              <li><a href="../../modules/filesystem/impls/appshell/node/CSharpWatcher.html">CSharpWatcher</a></li>
              <li><a href="../../modules/filesystem/impls/appshell/node/FileWatcherDomain.html">FileWatcherDomain</a></li>
              <li><a href="../../modules/filesystem/impls/appshell/node/FileWatcherManager.html">FileWatcherManager</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_help"><i class="icon-folder-open"></i>help</a>
              </li>
            </ul>
            <ul id="package_help" class="nav nav-list">
              <li><a href="../../modules/help/HelpCommandHandlers.html">HelpCommandHandlers</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_language"><i class="icon-folder-open"></i>language</a>
              </li>
            </ul>
            <ul id="package_language" class="nav nav-list">
              <li><a href="../../modules/language/CodeInspection.html">CodeInspection</a></li>
              <li><a href="../../modules/language/CSSUtils.html">CSSUtils</a></li>
              <li><a href="../../modules/language/HTMLDOMDiff.html">HTMLDOMDiff</a></li>
              <li><a href="../../modules/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../modules/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
              <li><a href="../../modules/language/HTMLTokenizer.html">HTMLTokenizer</a></li>
              <li><a href="../../modules/language/HTMLUtils.html">HTMLUtils</a></li>
              <li><a href="../../modules/language/JSONUtils.html">JSONUtils</a></li>
              <li><a href="../../modules/language/JSUtils.html">JSUtils</a></li>
              <li><a href="../../modules/language/LanguageManager.html">LanguageManager</a></li>
              <li><a href="../../modules/language/XMLUtils.html">XMLUtils</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Agents"><i class="icon-folder-open"></i>LiveDevelopment.Agents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Agents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Agents/ConsoleAgent.html">ConsoleAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/CSSAgent.html">CSSAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMAgent.html">DOMAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMHelpers.html">DOMHelpers</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMNode.html">DOMNode</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/EditAgent.html">EditAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/GotoAgent.html">GotoAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/HighlightAgent.html">HighlightAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/NetworkAgent.html">NetworkAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteAgent.html">RemoteAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteFunctions.html">RemoteFunctions</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/ScriptAgent.html">ScriptAgent</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Documents"><i class="icon-folder-open"></i>LiveDevelopment.Documents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Documents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Documents/CSSDocument.html">CSSDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/CSSPreprocessorDocument.html">CSSPreprocessorDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/HTMLDocument.html">HTMLDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/JSDocument.html">JSDocument</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Inspector"><i class="icon-folder-open"></i>LiveDevelopment.Inspector</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Inspector" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Inspector/Inspector.html">Inspector</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment"><i class="icon-folder-open"></i>LiveDevelopment</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/LiveDevelopment.html">LiveDevelopment</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevelopmentUtils.html">LiveDevelopmentUtils</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevMultiBrowser.html">LiveDevMultiBrowser</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevServerManager.html">LiveDevServerManager</a></li>
              <li><a href="../../modules/LiveDevelopment/main.html">main</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_documents"><i class="icon-folder-open"></i>LiveDevelopment.MultiBrowserImpl.documents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_documents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/documents/LiveCSSDocument.html">LiveCSSDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/documents/LiveDocument.html">LiveDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/documents/LiveHTMLDocument.html">LiveHTMLDocument</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_language"><i class="icon-folder-open"></i>LiveDevelopment.MultiBrowserImpl.language</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_language" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_launchers"><i class="icon-folder-open"></i>LiveDevelopment.MultiBrowserImpl.launchers</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_launchers" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/launchers/Launcher.html">Launcher</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_launchers_node"><i class="icon-folder-open"></i>LiveDevelopment.MultiBrowserImpl.launchers.node</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_launchers_node" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/launchers/node/LauncherDomain.html">LauncherDomain</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_protocol"><i class="icon-folder-open"></i>LiveDevelopment.MultiBrowserImpl.protocol</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_protocol" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/protocol/LiveDevProtocol.html">LiveDevProtocol</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_protocol_remote"><i class="icon-folder-open"></i>LiveDevelopment.MultiBrowserImpl.protocol.remote</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_protocol_remote" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/protocol/remote/DocumentObserver.html">DocumentObserver</a></li>
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/protocol/remote/LiveDevProtocolRemote.html">LiveDevProtocolRemote</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_transports_node"><i class="icon-folder-open"></i>LiveDevelopment.MultiBrowserImpl.transports.node</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_transports_node" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/transports/node/NodeSocketTransportDomain.html">NodeSocketTransportDomain</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_transports"><i class="icon-folder-open"></i>LiveDevelopment.MultiBrowserImpl.transports</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_transports" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/transports/NodeSocketTransport.html">NodeSocketTransport</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_transports_remote"><i class="icon-folder-open"></i>LiveDevelopment.MultiBrowserImpl.transports.remote</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_transports_remote" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/MultiBrowserImpl/transports/remote/NodeSocketTransportRemote.html">NodeSocketTransportRemote</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Servers"><i class="icon-folder-open"></i>LiveDevelopment.Servers</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Servers" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Servers/BaseServer.html">BaseServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/FileServer.html">FileServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/UserServer.html">UserServer</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_transports_node"><i class="icon-folder-open"></i>LiveDevelopment.transports.node</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_transports_node" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/transports/node/WebSocketTransportDomain.html">WebSocketTransportDomain</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_transports"><i class="icon-folder-open"></i>LiveDevelopment.transports</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_transports" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/transports/WebSocketTransport.html">WebSocketTransport</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_preferences"><i class="icon-folder-open"></i>preferences</a>
              </li>
            </ul>
            <ul id="package_preferences" class="nav nav-list">
              <li><a href="../../modules/preferences/PreferencesBase.html">PreferencesBase</a></li>
              <li><a href="../../modules/preferences/PreferencesDialogs.html">PreferencesDialogs</a></li>
              <li><a href="../../modules/preferences/PreferencesImpl.html">PreferencesImpl</a></li>
              <li><a href="../../modules/preferences/PreferencesManager.html">PreferencesManager</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_project"><i class="icon-folder-open"></i>project</a>
              </li>
            </ul>
            <ul id="package_project" class="nav nav-list">
              <li><a href="../../modules/project/FileSyncManager.html">FileSyncManager</a></li>
              <li><a href="../../modules/project/FileTreeView.html">FileTreeView</a></li>
              <li><a href="../../modules/project/FileTreeViewModel.html">FileTreeViewModel</a></li>
              <li><a href="../../modules/project/FileViewController.html">FileViewController</a></li>
              <li><a href="../../modules/project/ProjectManager.html">ProjectManager</a></li>
              <li><a href="../../modules/project/ProjectModel.html">ProjectModel</a></li>
              <li><a href="../../modules/project/SidebarView.html">SidebarView</a></li>
              <li><a href="../../modules/project/WorkingSetSort.html">WorkingSetSort</a></li>
              <li><a href="../../modules/project/WorkingSetView.html">WorkingSetView</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_search"><i class="icon-folder-open"></i>search</a>
              </li>
            </ul>
            <ul id="package_search" class="nav nav-list">
              <li><a href="../../modules/search/FileFilters.html">FileFilters</a></li>
              <li><a href="../../modules/search/FindBar.html">FindBar</a></li>
              <li><a href="../../modules/search/FindInFiles.html">FindInFiles</a></li>
              <li><a href="../../modules/search/FindInFilesUI.html">FindInFilesUI</a></li>
              <li><a href="../../modules/search/FindReplace.html">FindReplace</a></li>
              <li><a href="../../modules/search/FindUtils.html">FindUtils</a></li>
              <li><a href="../../modules/search/QuickOpen.html">QuickOpen</a></li>
              <li><a href="../../modules/search/QuickOpenHelper.html">QuickOpenHelper</a></li>
              <li><a href="../../modules/search/QuickSearchField.html">QuickSearchField</a></li>
              <li><a href="../../modules/search/ScrollTrackMarkers.html">ScrollTrackMarkers</a></li>
              <li><a href="../../modules/search/SearchModel.html">SearchModel</a></li>
              <li><a href="../../modules/search/SearchResultsView.html">SearchResultsView</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_search_node"><i class="icon-folder-open"></i>search.node</a>
              </li>
            </ul>
            <ul id="package_search_node" class="nav nav-list">
              <li><a href="../../modules/search/node/FindInFilesDomain.html">FindInFilesDomain</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_utils"><i class="icon-folder-open"></i>utils</a>
              </li>
            </ul>
            <ul id="package_utils" class="nav nav-list">
              <li><a href="../../modules/utils/AnimationUtils.html">AnimationUtils</a></li>
              <li><a href="../../modules/utils/AppInit.html">AppInit</a></li>
              <li><a href="../../modules/utils/Async.html">Async</a></li>
              <li><a href="../../modules/utils/BuildInfoUtils.html">BuildInfoUtils</a></li>
              <li><a href="../../modules/utils/ColorUtils.html">ColorUtils</a></li>
              <li><a href="../../modules/utils/Compatibility.html">Compatibility</a></li>
              <li><a href="../../modules/utils/DeprecationWarning.html">DeprecationWarning</a></li>
              <li><a href="../../modules/utils/DragAndDrop.html">DragAndDrop</a></li>
              <li><a href="../../modules/utils/DropdownEventHandler.html">DropdownEventHandler</a></li>
              <li><a href="../../modules/utils/EventDispatcher.html">EventDispatcher</a></li>
              <li><a href="../../modules/utils/ExtensionLoader.html">ExtensionLoader</a></li>
              <li><a href="../../modules/utils/ExtensionUtils.html">ExtensionUtils</a></li>
              <li><a href="../../modules/utils/Global.html">Global</a></li>
              <li><a href="../../modules/utils/HealthLogger.html">HealthLogger</a></li>
              <li><a href="../../modules/utils/KeyEvent.html">KeyEvent</a></li>
              <li><a href="../../modules/utils/LocalizationUtils.html">LocalizationUtils</a></li>
              <li><a href="../../modules/utils/NativeApp.html">NativeApp</a></li>
              <li><a href="../../modules/utils/NodeConnection.html">NodeConnection</a></li>
              <li><a href="../../modules/utils/NodeDomain.html">NodeDomain</a></li>
              <li><a href="../../modules/utils/PerfUtils.html">PerfUtils</a></li>
              <li><a href="../../modules/utils/Resizer.html">Resizer</a></li>
              <li><a href="../../modules/utils/ShellAPI.html">ShellAPI</a></li>
              <li><a href="../../modules/utils/StringMatch.html">StringMatch</a></li>
              <li><a href="../../modules/utils/StringUtils.html">StringUtils</a></li>
              <li><a href="../../modules/utils/TokenUtils.html">TokenUtils</a></li>
              <li><a href="../../modules/utils/UpdateNotification.html">UpdateNotification</a></li>
              <li><a href="../../modules/utils/UrlParams.html">UrlParams</a></li>
              <li><a href="../../modules/utils/ValidationUtils.html">ValidationUtils</a></li>
              <li><a href="../../modules/utils/ViewUtils.html">ViewUtils</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_view"><i class="icon-folder-open"></i>view</a>
              </li>
            </ul>
            <ul id="package_view" class="nav nav-list">
              <li><a href="../../modules/view/MainViewFactory.html">MainViewFactory</a></li>
              <li><a href="../../modules/view/MainViewManager.html">MainViewManager</a></li>
              <li><a href="../../modules/view/Pane.html">Pane</a></li>
              <li><a href="../../modules/view/PanelManager.html">PanelManager</a></li>
              <li><a href="../../modules/view/ThemeManager.html">ThemeManager</a></li>
              <li><a href="../../modules/view/ThemeSettings.html">ThemeSettings</a></li>
              <li><a href="../../modules/view/ThemeView.html">ThemeView</a></li>
              <li><a href="../../modules/view/ViewCommandHandlers.html">ViewCommandHandlers</a></li>
              <li><a href="../../modules/view/ViewStateManager.html">ViewStateManager</a></li>
              <li><a href="../../modules/view/WorkspaceManager.html">WorkspaceManager</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_widgets"><i class="icon-folder-open"></i>widgets</a>
              </li>
            </ul>
            <ul id="package_widgets" class="nav nav-list">
              <li><a href="../../modules/widgets/bootstrap-alerts.html">bootstrap-alerts</a></li>
              <li><a href="../../modules/widgets/bootstrap-button.html">bootstrap-button</a></li>
              <li><a href="../../modules/widgets/bootstrap-dropdown.html">bootstrap-dropdown</a></li>
              <li><a href="../../modules/widgets/bootstrap-modal.html">bootstrap-modal</a></li>
              <li><a href="../../modules/widgets/bootstrap-popover.html">bootstrap-popover</a></li>
              <li><a href="../../modules/widgets/bootstrap-scrollspy.html">bootstrap-scrollspy</a></li>
              <li><a href="../../modules/widgets/bootstrap-tab.html">bootstrap-tab</a></li>
              <li><a href="../../modules/widgets/bootstrap-tooltip.html">bootstrap-tooltip</a></li>
              <li><a href="../../modules/widgets/bootstrap-twipsy-mod.html">bootstrap-twipsy-mod</a></li>
              <li><a href="../../modules/widgets/DefaultDialogs.html">DefaultDialogs</a></li>
              <li><a href="../../modules/widgets/Dialogs.html">Dialogs</a></li>
              <li><a href="../../modules/widgets/DropdownButton.html">DropdownButton</a></li>
              <li><a href="../../modules/widgets/ModalBar.html">ModalBar</a></li>
              <li><a href="../../modules/widgets/PopUpManager.html">PopUpManager</a></li>
              <li><a href="../../modules/widgets/StatusBar.html">StatusBar</a></li>
            </ul>
            
          </div>
        </div>
        <div class="module span9">
          <section class="description">
            <h3>Description</h3>
            <div>
              <p>Set of utilities for simple parsing of CSS text.</p>

            </div>
          </section>
    
          <section class="dependencies">
            <h3>Dependencies</h3>
            
            <ul class="nav nav-list">
              <li><a href="..&#x2F;../modules/utils/Async.html">Async</a></li>
              <li><a href="..&#x2F;../modules/thirdparty/CodeMirror/lib/codemirror.html">codemirror</a></li>
              <li><a href="..&#x2F;../modules/document/DocumentManager.html">DocumentManager</a></li>
              <li><a href="..&#x2F;../modules/editor/EditorManager.html">EditorManager</a></li>
              <li><a href="..&#x2F;../modules/language/HTMLUtils.html">HTMLUtils</a></li>
              <li><a href="..&#x2F;../modules/language/LanguageManager.html">LanguageManager</a></li>
              <li><a href="..&#x2F;../modules/thirdparty/lodash.html">lodash</a></li>
              <li><a href="..&#x2F;../modules/project/ProjectManager.html">ProjectManager</a></li>
              <li><a href="..&#x2F;../modules/utils/TokenUtils.html">TokenUtils</a></li>
            </ul>
            
            
          </section>
    
            <section class="variables">
              <h3>Variables 
                <label class="checkbox">
                  <input class="toggle-public" type="checkbox"> Show Private Members
                </label>
              </h3>
              
              <div class="member private">
      
                <span class="pull-right scope">
                  Private
                  
                </span>
                <h4>_bracketPairs</h4>
                <dl>
                    <dt>Type</dt>
                      <dd>{string: string}</dd>
                    <dt>Private</dt>
                </dl>
                <div class="description"><p>List of all bracket pairs that is keyed by opening brackets, and the inverted list
that is keyed by closing brackets.</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">    var _bracketPairs = { &quot;{&quot;: &quot;}&quot;,
                          &quot;[&quot;: &quot;]&quot;,
                          &quot;(&quot;: &quot;)&quot; },
        _invertedBracketPairs = _.invert(_bracketPairs);</code></pre>
              </div>
              <div class="member private">
      
                <span class="pull-right scope">
                  Private
                  
                </span>
                <h4>_contextCM</h4>
                <dl>
                    <dt>Private</dt>
                </dl>
                <div class="description"><p>We will use this CM to cook css context in case of style attribute value
as CM in htmlmixed mode doesn&#39;t yet identify this as css context. We provide
a no-op display function to run CM without a DOM head.</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">            var _contextCM = new CodeMirror(function () {}, {
                value: &quot;{&quot; + tagInfo.attr.value.replace(&#x2F;(^&quot;)|(&quot;$)&#x2F;g, &quot;&quot;),
                mode:  &quot;css&quot;
            });

            ctx = TokenUtils.getInitialContext(_contextCM, {line: 0, ch: offset + 1});
        }
        
        if (_isInPropName(ctx)) {
            return _getPropNameInfo(ctx, ctx.editor);
        }
        
        if (_isInPropValue(ctx)) {
            return _getRuleInfoStartingFromPropValue(ctx, ctx.editor);
        }

        return createInfo();
    }</code></pre>
              </div>
              
            </section>
    
          <section class="functions">
            <h3>Functions 
              <label class="checkbox">
                <input class="toggle-public" type="checkbox"> Show Private Members
              </label>
            </h3>
            
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_addSelectorsToResults</h4>
              <div class="description"><p>Converts the results of _findAllMatchingSelectorsInText() into a simpler bag of data and
appends those new objects to the given &#39;resultSelectors&#39; Array.</p>
</div>
              <dl>
                  <dt>resultSelectors</dt>
                  <dd class="label label-info pull-left">Array.&lt;{document:Document,lineStart:number,lineEnd:number}&gt;</dd>
                  <dd></dd>
                  <dt>selectorsToAdd</dt>
                  <dd class="label label-info pull-left">Array.&lt;SelectorInfo&gt;</dd>
                  <dd></dd>
                  <dt>sourceDoc</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">Document</dd>
                  <dd></dd>
                  <dt>lineOffset</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">number</dd>
                  <dd>Amount to offset all line number info by. Used if the first line of the parsed CSS text is not the first line of the sourceDoc.</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _addSelectorsToResults(resultSelectors, selectorsToAdd, sourceDoc, lineOffset) {
        selectorsToAdd.forEach(function (selectorInfo) {
            resultSelectors.push({
                name: getCompleteSelectors(selectorInfo),
                document: sourceDoc,
                lineStart: selectorInfo.ruleStartLine + lineOffset,
                lineEnd: selectorInfo.declListEndLine + lineOffset,
                selectorGroup: selectorInfo.selectorGroup
            });
        });
    }</code></pre>
            </div>
            <div class="member private public">
              <span class="pull-right scope">
                Private
                Public API
              </span>
              <h4>_findAllMatchingSelectorsInText</h4>
              <div class="description"><p>Finds all instances of the specified selector in &quot;text&quot;.
Returns an Array of Objects with start and end properties.</p>
<p>For now, we only support simple selectors. This function will need to change
dramatically to support full selectors.</p>
<p>FUTURE: (JRB) It would be nice to eventually use the browser/jquery to do the selector evaluation.
One way to do this would be to take the user&#39;s HTML, add a special attribute to every tag with a UID,
and then construct a DOM (using the commented out code above). Then, give this DOM and the selector to
jquery and ask what matches. If the node that the user&#39;s cursor is in comes back from jquery, then
we know the selector applies.</p>
</div>
              <dl>
                  <dt>text</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>CSS text to search</dd>
                  <dt>selector</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>selector to search for</dd>
                  <dt>mode</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>language mode of the document that text belongs to</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _findAllMatchingSelectorsInText(text, selector, mode) {
        var allSelectors = extractAllSelectors(text, mode);
        var result = [];

        &#x2F;&#x2F; For now, we only match the rightmost simple selector, and ignore
        &#x2F;&#x2F; attribute selectors and pseudo selectors
        var classOrIdSelector = selector[0] === &quot;.&quot; || selector[0] === &quot;#&quot;;

        &#x2F;&#x2F; Escape initial &quot;.&quot; in selector, if present.
        if (selector[0] === &quot;.&quot;) {
            selector = &quot;\\&quot; + selector;
        }

        if (!classOrIdSelector) {
            &#x2F;&#x2F; Tag selectors must have nothing, whitespace, or a combinator before it.
            selector = &quot;(^|[\\s&gt;+~])&quot; + selector;
        }

        var re = new RegExp(selector + &quot;(\\[[^\\]]*\\]|:{1,2}[\\w-()]+|\\.[\\w-]+|#[\\w-]+)*\\s*$&quot;, classOrIdSelector ? &quot;&quot; : &quot;i&quot;);
        allSelectors.forEach(function (entry) {
            var actualSelector = entry.selector;
            if (entry.selector.indexOf(&quot;&amp;&quot;) !== -1 &amp;&amp; entry.parentSelectors) {
                var selectorArray = entry.parentSelectors.split(&quot; &#x2F; &quot;);
                selectorArray.push(entry.selector);
                actualSelector = _getSelectorInFinalCSSForm(selectorArray);
            }
            if (actualSelector.search(re) !== -1) {
                result.push(entry);
            } else if (!classOrIdSelector) {
                &#x2F;&#x2F; Special case for tag selectors - match &quot;*&quot; as the rightmost character
                if (&#x2F;\*\s*$&#x2F;.test(actualSelector)) {
                    result.push(entry);
                }
            }
        });

        return result;
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_findMatchingRulesInCSSFiles</h4>
              <div class="description"><p>Finds matching selectors in CSS files; adds them to &#39;resultSelectors&#39;</p>
</div>
              <dl>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _findMatchingRulesInCSSFiles(selector, resultSelectors) {
        var result          = new $.Deferred();

        &#x2F;&#x2F; Load one CSS file and search its contents
        function _loadFileAndScan(fullPath, selector) {
            var oneFileResult = new $.Deferred();

            DocumentManager.getDocumentForPath(fullPath)
                .done(function (doc) {
                    &#x2F;&#x2F; Find all matching rules for the given CSS file&#39;s content, and add them to the
                    &#x2F;&#x2F; overall search result
                    var oneCSSFileMatches = _findAllMatchingSelectorsInText(doc.getText(), selector, doc.getLanguage().getMode());
                    _addSelectorsToResults(resultSelectors, oneCSSFileMatches, doc, 0);

                    oneFileResult.resolve();
                })
                .fail(function (error) {
                    console.warn(&quot;Unable to read &quot; + fullPath + &quot; during CSS rule search:&quot;, error);
                    oneFileResult.resolve();  &#x2F;&#x2F; still resolve, so the overall result doesn&#39;t reject
                });

            return oneFileResult.promise();
        }

        ProjectManager.getAllFiles(ProjectManager.getLanguageFilter([&quot;css&quot;, &quot;less&quot;, &quot;scss&quot;]))
            .done(function (cssFiles) {
                &#x2F;&#x2F; Load index of all CSS files; then process each CSS file in turn (see above)
                Async.doInParallel(cssFiles, function (fileInfo, number) {
                    return _loadFileAndScan(fileInfo.fullPath, selector);
                })
                    .then(result.resolve, result.reject);
            });

        return result.promise();
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_findMatchingRulesInStyleBlocks</h4>
              <div class="description"><p>Finds matching selectors in the &lt;style&gt; block of a single HTML file; adds them to &#39;resultSelectors&#39;</p>
</div>
              <dl>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _findMatchingRulesInStyleBlocks(htmlDocument, selector, resultSelectors) {
        &#x2F;&#x2F; HTMLUtils requires a real CodeMirror instance; make sure we can give it the right Editor
        var htmlEditor = EditorManager.getCurrentFullEditor();
        if (htmlEditor.document !== htmlDocument) {
            console.error(&quot;Cannot search for &lt;style&gt; blocks in HTML file other than current editor&quot;);
            return;
        }

        &#x2F;&#x2F; Find all &lt;style&gt; blocks in the HTML file
        var styleBlocks = HTMLUtils.findStyleBlocks(htmlEditor);

        styleBlocks.forEach(function (styleBlockInfo) {
            &#x2F;&#x2F; Search this one &lt;style&gt; block&#39;s content, appending results to &#39;resultSelectors&#39;
            var oneStyleBlockMatches = _findAllMatchingSelectorsInText(styleBlockInfo.text, selector);
            _addSelectorsToResults(resultSelectors, oneStyleBlockMatches, htmlDocument, styleBlockInfo.start.line);
        });
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_getContextState</h4>
              <div class="description"></div>
              <dl>
                  <dt>ctx</dt>
                  <dd class="label label-info pull-left">{editor:{CodeMirror},pos:{ch:{string},line:{number}},token:{object}}</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _getContextState(ctx) {
        if (!ctx || !ctx.token) {
            return null;
        }
        var state = ctx.token.state.localState || ctx.token.state;
        &#x2F;&#x2F; if state contains a valid html inner state use that first
        if (state.htmlState) {
            state = ctx.token.state.htmlState;
        } else {
            if (!state.context &amp;&amp; ctx.token.state.html &amp;&amp; ctx.token.state.html.localState) {
                state = ctx.token.state.html.localState;
            }
        }
        return state;
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_getImportUrlInfo</h4>
              <div class="description"></div>
              <dl>
                  <dt>context</dt>
                  <dd class="label label-info pull-left">editor:{CodeMirror},pos:{ch:{string},line:{number}},token:{object}</dd>
                  <dd></dd>
                  <dt>editor</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">Editor</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _getImportUrlInfo(ctx, editor) {
        var backwardPos = $.extend({}, ctx.pos),
            forwardPos  = $.extend({}, ctx.pos),
            backwardCtx,
            forwardCtx,
            index = 0,
            propValues = [],
            offset = TokenUtils.offsetInToken(ctx);

        &#x2F;&#x2F; Currently only support url. May be null if starting to type
        if (ctx.token.type &amp;&amp; ctx.token.type !== &quot;string&quot;) {
            return createInfo();
        }

        &#x2F;&#x2F; Move backward to @import and collect data as we go. We return propValues
        &#x2F;&#x2F; array, but we can only have 1 value, so put all data in first item
        backwardCtx = TokenUtils.getInitialContext(editor._codeMirror, backwardPos);
        propValues[0] = backwardCtx.token.string;

        while (TokenUtils.movePrevToken(backwardCtx)) {
            if (backwardCtx.token.type === &quot;def&quot; &amp;&amp; backwardCtx.token.string === &quot;@import&quot;) {
                break;
            }

            if (backwardCtx.token.type &amp;&amp; backwardCtx.token.type !== &quot;atom&quot; &amp;&amp; backwardCtx.token.string !== &quot;url&quot;) {
                &#x2F;&#x2F; Previous token may be white-space
                &#x2F;&#x2F; Otherwise, previous token may only be &quot;url(&quot;
                break;
            }

            propValues[0] = backwardCtx.token.string + propValues[0];
            offset += backwardCtx.token.string.length;
        }

        if (backwardCtx.token.type !== &quot;def&quot; || backwardCtx.token.string !== &quot;@import&quot;) {
            &#x2F;&#x2F; Not in url
            return createInfo();
        }

        &#x2F;&#x2F; Get value after cursor up until closing paren or newline
        forwardCtx = TokenUtils.getInitialContext(editor._codeMirror, forwardPos);
        do {
            if (!TokenUtils.moveNextToken(forwardCtx)) {
                if (forwardCtx.token.string === &quot;(&quot;) {
                    break;
                } else {
                    return createInfo();
                }
            }
            propValues[0] += forwardCtx.token.string;
        } while (forwardCtx.token.string !== &quot;)&quot; &amp;&amp; forwardCtx.token.string !== &quot;&quot;);

        return createInfo(IMPORT_URL, offset, &quot;&quot;, index, propValues, false);
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_getPrecedingPropValues</h4>
              <div class="description"></div>
              <dl>
                  <dt>context</dt>
                  <dd class="label label-info pull-left">editor:{CodeMirror},pos:{ch:{string},line:{number}},token:{object}</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _getPrecedingPropValues(ctx) {
        var lastValue = &quot;&quot;,
            curValue,
            propValues = [];
        while (ctx.token.string !== &quot;:&quot; &amp;&amp; TokenUtils.movePrevToken(ctx)) {
            if (ctx.token.string === &quot;:&quot; || !_isInPropValue(ctx)) {
                break;
            }

            curValue = ctx.token.string;
            if (lastValue !== &quot;&quot;) {
                curValue += lastValue;
            }

            if ((ctx.token.string.length &gt; 0 &amp;&amp; !ctx.token.string.match(&#x2F;\S&#x2F;)) ||
                    ctx.token.string === &quot;,&quot;) {
                lastValue = curValue;
            } else {
                lastValue = &quot;&quot;;
                if (propValues.length === 0 || curValue.match(&#x2F;,\s*$&#x2F;)) {
                    &#x2F;&#x2F; stack is empty, or current value ends with a comma
                    &#x2F;&#x2F; (and optional whitespace), so push it on the stack
                    propValues.push(curValue);
                } else {
                    &#x2F;&#x2F; current value does not end with a comma (and optional ws) so prepend
                    &#x2F;&#x2F; to last stack item (e.g. &quot;rgba(50&quot; get broken into 2 tokens)
                    propValues[propValues.length - 1] = curValue + propValues[propValues.length - 1];
                }
            }
        }
        if (propValues.length &gt; 0) {
            propValues.reverse();
        }

        return propValues;
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_getPropNameInfo</h4>
              <div class="description"></div>
              <dl>
                  <dt>ctx</dt>
                  <dd class="label label-info pull-left">editor:{CodeMirror},pos:{ch:{string},line:{number}},token:{object}</dd>
                  <dd>context</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _getPropNameInfo(ctx) {
        var propName = &quot;&quot;,
            offset = TokenUtils.offsetInToken(ctx),
            tokenString = ctx.token.string,
            excludedCharacters = [&quot;;&quot;, &quot;{&quot;, &quot;}&quot;];

        if (ctx.token.type === &quot;property&quot; || ctx.token.type === &quot;property error&quot; ||
                ctx.token.type === &quot;tag&quot;) {
            propName = tokenString;
            if (TokenUtils.movePrevToken(ctx) &amp;&amp; _hasNonWhitespace(ctx.token.string) &amp;&amp;
                    excludedCharacters.indexOf(ctx.token.string) === -1) {
                propName = ctx.token.string + tokenString;
                offset += ctx.token.string.length;
            }
        } else if (ctx.token.type === &quot;meta&quot; || tokenString === &quot;-&quot;) {
            propName = tokenString;
            if (TokenUtils.moveNextToken(ctx) &amp;&amp;
                    (ctx.token.type === &quot;property&quot; || ctx.token.type === &quot;property error&quot; ||
                    ctx.token.type === &quot;tag&quot;)) {
                propName += ctx.token.string;
            }
        } else if (_hasNonWhitespace(tokenString) &amp;&amp; excludedCharacters.indexOf(tokenString) === -1) {
            &#x2F;&#x2F; We&#39;re not inside the property name context.
            return createInfo();
        } else {
            var testPos = {ch: ctx.pos.ch + 1, line: ctx.pos.line},
                testToken = ctx.editor.getTokenAt(testPos, true);

            if (testToken.type === &quot;property&quot; || testToken.type === &quot;property error&quot; ||
                    testToken.type === &quot;tag&quot;) {
                propName = testToken.string;
                offset = 0;
            } else if (testToken.type === &quot;meta&quot; || testToken.string === &quot;-&quot;) {
                ctx.pos = testPos;
                ctx.token = testToken;
                return _getPropNameInfo(ctx);
            }
        }

        &#x2F;&#x2F; If we&#39;re in the property name context but not in an existing property name,
        &#x2F;&#x2F; then reset offset to zero.
        if (propName === &quot;&quot;) {
            offset = 0;
        }

        return createInfo(PROP_NAME, offset, propName);
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_getPropNameStartingFromPropValue</h4>
              <div class="description"></div>
              <dl>
                  <dt>context</dt>
                  <dd class="label label-info pull-left">editor:{CodeMirror},pos:{ch:{string},line:{number}},token:{object}</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _getPropNameStartingFromPropValue(ctx) {
        var ctxClone = $.extend({}, ctx),
            propName = &quot;&quot;;
        do {
            &#x2F;&#x2F; If we&#39;re no longer in the property value before seeing a colon, then we don&#39;t
            &#x2F;&#x2F; have a valid property name. Just return an empty string.
            if (ctxClone.token.string !== &quot;:&quot; &amp;&amp; !_isInPropValue(ctxClone)) {
                return &quot;&quot;;
            }
        } while (ctxClone.token.string !== &quot;:&quot; &amp;&amp; TokenUtils.moveSkippingWhitespace(TokenUtils.movePrevToken, ctxClone));

        if (ctxClone.token.string === &quot;:&quot; &amp;&amp; TokenUtils.moveSkippingWhitespace(TokenUtils.movePrevToken, ctxClone) &amp;&amp;
                (ctxClone.token.type === &quot;property&quot; || ctxClone.token.type === &quot;property error&quot;)) {
            propName = ctxClone.token.string;
            if (TokenUtils.movePrevToken(ctxClone) &amp;&amp; ctxClone.token.type === &quot;meta&quot;) {
                propName = ctxClone.token.string + propName;
            }
        }

        return propName;
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_getRangeForPropValue</h4>
              <div class="description"></div>
              <dl>
                  <dt>startCtx</dt>
                  <dd class="label label-info pull-left">editor:{CodeMirror},pos:{ch:{string},line:{number}},token:{object}</dd>
                  <dd>context</dd>
                  <dt>endCtx</dt>
                  <dd class="label label-info pull-left">editor:{CodeMirror},pos:{ch:{string},line:{number}},token:{object}</dd>
                  <dd>context</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _getRangeForPropValue(startCtx, endCtx) {
        var range = { &quot;start&quot;: {},
                      &quot;end&quot;: {} };

        &#x2F;&#x2F; Skip the &quot;:&quot; and any leading whitespace
        while (TokenUtils.moveNextToken(startCtx)) {
            if (_hasNonWhitespace(startCtx.token.string)) {
                break;
            }
        }

        &#x2F;&#x2F; Skip the trailing whitespace and property separators.
        while (endCtx.token.string === &quot;;&quot; || endCtx.token.string === &quot;}&quot; ||
                !_hasNonWhitespace(endCtx.token.string)) {
            TokenUtils.movePrevToken(endCtx);
        }

        range.start = _.clone(startCtx.pos);
        range.start.ch = startCtx.token.start;

        range.end = _.clone(endCtx.pos);
        range.end.ch = endCtx.token.end;

        return range;
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_getRuleInfoStartingFromPropValue</h4>
              <div class="description"></div>
              <dl>
                  <dt>context</dt>
                  <dd class="label label-info pull-left">editor:{CodeMirror},pos:{ch:{string},line:{number}},token:{object}</dd>
                  <dd></dd>
                  <dt>editor</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">Editor</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _getRuleInfoStartingFromPropValue(ctx, editorParam) {
        var editor      = editorParam._codeMirror || editorParam,
            contextDoc  = editor.document || editor.doc,
            propNamePos = $.extend({}, ctx.pos),
            backwardPos = $.extend({}, ctx.pos),
            forwardPos  = $.extend({}, ctx.pos),
            propNameCtx = TokenUtils.getInitialContext(editor, propNamePos),
            backwardCtx,
            forwardCtx,
            lastValue = &quot;&quot;,
            propValues = [],
            index = -1,
            offset = TokenUtils.offsetInToken(ctx),
            canAddNewOne = false,
            testPos = {ch: ctx.pos.ch + 1, line: ctx.pos.line},
            testToken = editor.getTokenAt(testPos, true),
            propName,
            range;

        &#x2F;&#x2F; Get property name first. If we don&#39;t have a valid property name, then
        &#x2F;&#x2F; return a default rule info.
        propName = _getPropNameStartingFromPropValue(propNameCtx);
        if (!propName) {
            return createInfo();
        }

        &#x2F;&#x2F; Scan backward to collect all preceding property values
        backwardCtx = TokenUtils.getInitialContext(editor, backwardPos);
        propValues = _getPrecedingPropValues(backwardCtx);

        lastValue = &quot;&quot;;
        if (ctx.token.string === &quot;:&quot;) {
            index = 0;
            canAddNewOne = true;
        } else {
            index = propValues.length - 1;
            if (ctx.token.string === &quot;,&quot;) {
                propValues[index] += ctx.token.string;
                index++;
                canAddNewOne = true;
            } else {
                index = (index &lt; 0) ? 0 : index + 1;
                if (ctx.token.string.match(&#x2F;\S&#x2F;)) {
                    lastValue = ctx.token.string;
                } else {
                    &#x2F;&#x2F; Last token is all whitespace
                    canAddNewOne = true;
                    if (index &gt; 0) {
                        &#x2F;&#x2F; Append all spaces before the cursor to the previous value in values array
                        propValues[index - 1] += ctx.token.string.substr(0, offset);
                    }
                }
            }
        }

        if (canAddNewOne) {
            offset = 0;

            &#x2F;&#x2F; If pos is at EOL, then there&#39;s implied whitespace (newline).
            if (contextDoc.getLine(ctx.pos.line).length &gt; ctx.pos.ch  &amp;&amp;
                    (testToken.string.length === 0 || testToken.string.match(&#x2F;\S&#x2F;))) {
                canAddNewOne = false;
            }
        }

        &#x2F;&#x2F; Scan forward to collect all succeeding property values and append to all propValues.
        forwardCtx = TokenUtils.getInitialContext(editor, forwardPos);
        propValues = propValues.concat(_getSucceedingPropValues(forwardCtx, lastValue));

        if (propValues.length) {
            range = _getRangeForPropValue(backwardCtx, forwardCtx);
        } else {
            &#x2F;&#x2F; No property value, so just return the cursor pos as range
            range = { &quot;start&quot;: _.clone(ctx.pos),
                      &quot;end&quot;: _.clone(ctx.pos) };
        }

        &#x2F;&#x2F; If current index is more than the propValues size, then the cursor is
        &#x2F;&#x2F; at the end of the existing property values and is ready for adding another one.
        if (index === propValues.length) {
            canAddNewOne = true;
        }

        return createInfo(PROP_VALUE, offset, propName, index, propValues, canAddNewOne, range);
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_getSelectorInFinalCSSForm</h4>
              <div class="description"><p>Converts the given selector array into the actual CSS selectors similar to
those generated by a CSS preprocessor.</p>
</div>
              <dl>
                  <dt>selectorArray</dt>
                  <dd class="label label-info pull-left">Array.&lt;string&gt;</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _getSelectorInFinalCSSForm(selectorArray) {
        var finalSelectorArray = [&quot;&quot;],
            parentSelectorArray = [],
            group = [];
        _.forEach(selectorArray, function (selector) {
            selector = _stripAtRules(selector);
            group = selector.split(&quot;,&quot;);
            parentSelectorArray = [];
            _.forEach(group, function (cs) {
                var ampersandIndex = cs.indexOf(&quot;&amp;&quot;);
                _.forEach(finalSelectorArray, function (ps) {
                    if (ampersandIndex === -1) {
                        cs = _stripAtRules(cs);
                        if (ps.length &amp;&amp; cs.length) {
                            ps += &quot; &quot;;
                        }
                        ps += cs;
                    } else {
                        &#x2F;&#x2F; Replace all instances of &amp; with regexp
                        ps = _stripAtRules(cs.replace(&#x2F;&amp;&#x2F;g, ps));
                    }
                    parentSelectorArray.push(ps);
                });
            });
            finalSelectorArray = parentSelectorArray;
        });
        return finalSelectorArray.join(&quot;, &quot;);
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_getSucceedingPropValues</h4>
              <div class="description"></div>
              <dl>
                  <dt>context</dt>
                  <dd class="label label-info pull-left">editor:{CodeMirror},pos:{ch:{string},line:{number}},token:{object}</dd>
                  <dd></dd>
                  <dt>currentValue</dt>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>The token string at the current cursor position</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _getSucceedingPropValues(ctx, currentValue) {
        var lastValue = currentValue,
            propValues = [];

        while (ctx.token.string !== &quot;;&quot; &amp;&amp; ctx.token.string !== &quot;}&quot; &amp;&amp; TokenUtils.moveNextToken(ctx)) {
            if (ctx.token.string === &quot;;&quot; || ctx.token.string === &quot;}&quot;) {
                break;
            }
            if (!_isInPropValue(ctx)) {
                lastValue = &quot;&quot;;
                break;
            }

            if (lastValue === &quot;&quot;) {
                lastValue = ctx.token.string.trim();
            } else if (lastValue.length &gt; 0) {
                if (ctx.token.string.length &gt; 0 &amp;&amp; !ctx.token.string.match(&#x2F;\S&#x2F;)) {
                    lastValue += ctx.token.string;
                    propValues.push(lastValue);
                    lastValue = &quot;&quot;;
                } else if (ctx.token.string === &quot;,&quot;) {
                    lastValue += ctx.token.string;
                } else if (lastValue &amp;&amp; lastValue.match(&#x2F;,$&#x2F;)) {
                    propValues.push(lastValue);
                    if (ctx.token.string.length &gt; 0) {
                        lastValue = ctx.token.string;
                    } else {
                        lastValue = &quot;&quot;;
                    }
                } else {
                    &#x2F;&#x2F; e.g. &quot;rgba(50&quot; gets broken into 2 tokens
                    lastValue += ctx.token.string;
                }
            }
        }
        if (lastValue.length &gt; 0) {
            propValues.push(lastValue);
        }

        return propValues;
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_hasNonWhitespace</h4>
              <div class="description"></div>
              <dl>
                  <dt>text</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">string</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _hasNonWhitespace(text) {
        return (&#x2F;\S&#x2F;.test(text));
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_isInAtRule</h4>
              <div class="description"></div>
              <dl>
                  <dt>context</dt>
                  <dd class="label label-info pull-left">editor:{CodeMirror},pos:{ch:{string},line:{number}},token:{object}</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _isInAtRule(ctx) {
        var state = _getContextState(ctx);
        if (!state || !state.context) {
            return false;
        }
        return (state.context.type === &quot;atBlock_parens&quot;);
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_isInPropName</h4>
              <div class="description"></div>
              <dl>
                  <dt>context</dt>
                  <dd class="label label-info pull-left">editor:{CodeMirror},pos:{ch:{string},line:{number}},token:{object}</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _isInPropName(ctx) {
        var state = _getContextState(ctx),
            lastToken;
        if (!state || !state.context || ctx.token.type === &quot;comment&quot;) {
            return false;
        }

        lastToken = state.context.type;
        return (lastToken === &quot;{&quot; || lastToken === &quot;rule&quot; || lastToken === &quot;block&quot;);
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_isInPropValue</h4>
              <div class="description"></div>
              <dl>
                  <dt>context</dt>
                  <dd class="label label-info pull-left">editor:{CodeMirror},pos:{ch:{string},line:{number}},token:{object}</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _isInPropValue(ctx) {

        function isInsideParens(context) {
            if (context.type !== &quot;parens&quot; || !context.prev) {
                return false;
            }

            if (context.prev.type === &quot;prop&quot;) {
                return true;
            }

            return isInsideParens(context.prev);
        }

        var state = _getContextState(ctx);
        if (!state || !state.context || !state.context.prev || ctx.token.type === &quot;comment&quot;) {
            return false;
        }

        return ((state.context.type === &quot;prop&quot; &amp;&amp;
                    (state.context.prev.type === &quot;rule&quot; || state.context.prev.type === &quot;block&quot;)) ||
                    isInsideParens(state.context));
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_removeComments</h4>
              <div class="description"><p>removes CSS comments from the content</p>
</div>
              <dl>
                  <dt>content</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>to reduce</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _removeComments(content) {
        return content.replace(&#x2F;\&#x2F;\*(?:(?!\*\&#x2F;)[\s\S])*\*\&#x2F;&#x2F;g, &quot;&quot;);
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_removeStrings</h4>
              <div class="description"><p>removes strings from the content</p>
</div>
              <dl>
                  <dt>content</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>to reduce</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _removeStrings(content) {
        &#x2F;&#x2F; First remove escaped quotes so we can balance unescaped quotes
        &#x2F;&#x2F; since JavaScript doesn&#39;t support negative lookbehind
        var s = content.replace(&#x2F;\\\&quot;|\\\&#39;&#x2F;g, &quot;&quot;);

        &#x2F;&#x2F; Now remove strings
        return s.replace(&#x2F;\&quot;(.*?)\&quot;|\&#39;(.*?)\&#39;&#x2F;g, &quot;&quot;);
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_stripAtRules</h4>
              <div class="description"><p>Helper function to remove whitespaces before and after a selector
Returns trimmed selector if it is not an at-rule, or null if it starts with @.</p>
</div>
              <dl>
                  <dt>selector</dt>
                  <dd class="label label-info pull-left">string</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function _stripAtRules(selector) {
        selector = selector.trim();
        if (selector.indexOf(&quot;@&quot;) === 0) {
            return &quot;&quot;;
        }
        return selector;
    }</code></pre>
            </div>
            <div class="member public">
              <span class="pull-right scope">
                
                Public API
              </span>
              <h4>addRuleToDocument</h4>
              <div class="description"><p>Adds a new rule to the end of the given document, and returns the range of the added rule
and the position of the cursor on the indented blank line within it. Note that the range will
not include all the inserted text (we insert extra newlines before and after the rule).</p>
</div>
              <dl>
                  <dt>doc</dt>
                  <dd class="label label-info pull-left">Document</dd>
                  <dd>The document to insert the rule into.</dd>
                  <dt>selector</dt>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>The selector to use for the given rule.</dd>
                  <dt>useTabChar</dt>
                  <dd class="label label-info pull-left">boolean</dd>
                  <dd>Whether to indent with a tab.</dd>
                  <dt>indentUnit</dt>
                  <dd class="label label-info pull-left">number</dd>
                  <dd>If useTabChar is false, how many spaces to indent with.</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function addRuleToDocument(doc, selector, useTabChar, indentUnit) {
        var newRule = &quot;\n&quot; + selector + &quot; {\n&quot;,
            blankLineOffset;
        if (useTabChar) {
            newRule += &quot;\t&quot;;
            blankLineOffset = 1;
        } else {
            var i;
            for (i = 0; i &lt; indentUnit; i++) {
                newRule += &quot; &quot;;
            }
            blankLineOffset = indentUnit;
        }
        newRule += &quot;\n}\n&quot;;

        var docLines = doc.getText().split(&quot;\n&quot;),
            lastDocLine = docLines.length - 1,
            lastDocChar = docLines[docLines.length - 1].length;
        doc.replaceRange(newRule, {line: lastDocLine, ch: lastDocChar});
        return {
            range: {
                from: {line: lastDocLine + 1, ch: 0},
                to: {line: lastDocLine + 3, ch: 1}
            },
            pos: {line: lastDocLine + 2, ch: blankLineOffset}
        };
    }</code></pre>
            </div>
            <div class="member public">
              <span class="pull-right scope">
                
                Public API
              </span>
              <h4>consolidateRules</h4>
              <div class="description"><p>In the given rule array (as returned by <code>findMatchingRules()</code>), if multiple rules in a row
refer to the same rule (because there were multiple matching selectors), eliminate the redundant
rules. Also, always use the selector group if available instead of the original matching selector.</p>
</div>
              <dl>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function consolidateRules(rules) {
        var newRules = [], lastRule;
        rules.forEach(function (rule) {
            if (rule.selectorGroup) {
                rule.name = rule.selectorGroup;
            }
            &#x2F;&#x2F; Push the entry unless it refers to the same rule as the previous entry.
            if (!(lastRule &amp;&amp;
                     rule.document === lastRule.document &amp;&amp;
                     rule.lineStart === lastRule.lineStart &amp;&amp;
                     rule.lineEnd === lastRule.lineEnd &amp;&amp;
                     rule.selectorGroup === lastRule.selectorGroup)) {
                newRules.push(rule);
            }
            lastRule = rule;
        });
        return newRules;
    }</code></pre>
            </div>
            <div class="member private public">
              <span class="pull-right scope">
                Private
                Public API
              </span>
              <h4>createInfo</h4>
              <div class="description"></div>
              <dl>
                  <dt>context</dt>
                    <span class="label label-optional pull-left">optional</span>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>A constant string</dd>
                  <dt>offset</dt>
                    <span class="label label-optional pull-left">optional</span>
                  <dd class="label label-info pull-left">number</dd>
                  <dd>The offset of the token for a given cursor position</dd>
                  <dt>name</dt>
                    <span class="label label-optional pull-left">optional</span>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>Property name of the context</dd>
                  <dt>index</dt>
                    <span class="label label-optional pull-left">optional</span>
                  <dd class="label label-info pull-left">number</dd>
                  <dd>The index of the property value for a given cursor position</dd>
                  <dt>values</dt>
                    <span class="label label-optional pull-left">optional</span>
                  <dd class="label label-info pull-left">Array.&lt;string&gt;</dd>
                  <dd>An array of property values</dd>
                  <dt>isNewItem</dt>
                    <span class="label label-optional pull-left">optional</span>
                  <dd class="label label-info pull-left">boolean</dd>
                  <dd>If this is true, then the value in index refers to the index at which a new item is going to be inserted and should not be used for accessing an existing value in values array.</dd>
                  <dt>range</dt>
                    <span class="label label-optional pull-left">optional</span>
                  <dd class="label label-info pull-left">{start: {line: number, ch: number}, end: {line: number, ch: number}}</dd>
                  <dd>A range object with a start position and an end position</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function createInfo(context, offset, name, index, values, isNewItem, range) {
        var ruleInfo = { context: context || &quot;&quot;,
                         offset: offset || 0,
                         name: name || &quot;&quot;,
                         index: -1,
                         values: [],
                         isNewItem: (isNewItem === true),
                         range: range };

        if (context === PROP_VALUE || context === SELECTOR || context === IMPORT_URL) {
            ruleInfo.index = index;
            ruleInfo.values = values;
        }

        return ruleInfo;
    }</code></pre>
            </div>
            <div class="member public">
              <span class="pull-right scope">
                
                Public API
              </span>
              <h4>extractAllNamedFlows</h4>
              <div class="description"><p>Extracts all named flow instances</p>
</div>
              <dl>
                  <dt>text</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>to extract from</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function extractAllNamedFlows(text) {
        var namedFlowRegEx = &#x2F;(?:flow\-(into|from)\:\s*)([\w\-]+)(?:\s*;)&#x2F;gi,
            result = [],
            names = {},
            thisMatch;

        &#x2F;&#x2F; Reduce the content so that matches
        &#x2F;&#x2F; inside strings and comments are ignored
        text = reduceStyleSheetForRegExParsing(text);

        &#x2F;&#x2F; Find the first match
        thisMatch = namedFlowRegEx.exec(text);

        &#x2F;&#x2F; Iterate over the matches and add them to result
        while (thisMatch) {
            var thisName = thisMatch[2];

            if (IGNORED_FLOW_NAMES.indexOf(thisName) === -1 &amp;&amp; !names.hasOwnProperty(thisName)) {
                names[thisName] = result.push(thisName);
            }
            thisMatch = namedFlowRegEx.exec(text);
        }

        return result;
    }</code></pre>
            </div>
            <div class="member public">
              <span class="pull-right scope">
                
                Public API
              </span>
              <h4>extractAllSelectors</h4>
              <div class="description"><p>Extracts all CSS selectors from the given text
Returns an array of SelectorInfo. Each SelectorInfo is an object with the following properties:
         selector:                 the text of the selector (note: comma separated selector groups like
                                   &quot;h1, h2&quot; are broken into separate selectors)
         ruleStartLine:            line in the text where the rule (including preceding comment) appears
         ruleStartChar:            column in the line where the rule (including preceding comment) starts
         selectorStartLine:        line in the text where the selector appears
         selectorStartChar:        column in the line where the selector starts
         selectorEndLine:          line where the selector ends
         selectorEndChar:          column where the selector ends
         selectorGroupStartLine:   line where the comma-separated selector group (e.g. .foo, .bar, .baz)
                                   starts that this selector (e.g. .baz) is part of. Particularly relevant for
                                   groups that are on multiple lines.
         selectorGroupStartChar:   column in line where the selector group starts.
         selectorGroup:            the entire selector group containing this selector, or undefined if there
                                   is only one selector in the rule.
         declListStartLine:        line where the declaration list for the rule starts
         declListStartChar:        column in line where the declaration list for the rule starts
         declListEndLine:          line where the declaration list for the rule ends
         declListEndChar:          column in the line where the declaration list for the rule ends
         level:                    the level of the current selector including any containing @media block in the
                                   nesting level count. Use this property with caution since it is primarily for internal
                                   parsing use. For example, two sibling selectors may have different levels if one
                                   of them is nested inside an @media block and it should not be used for sibling info.
         parentSelectors:          all ancestor selectors separated with &#39;/&#39; if the current selector is a nested one</p>
</div>
              <dl>
                  <dt>text</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>CSS text to extract from</dd>
                  <dt>documentMode</dt>
                    <span class="label label-nullable pull-left">nullable</span>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>language mode of the document that text belongs to, default to css if undefined.</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function extractAllSelectors(text, documentMode) {
        var state, lines, lineCount,
            token, style, stream, line,
            selectors              = [],
            mode                   = CodeMirror.getMode({indentUnit: 2}, documentMode || &quot;css&quot;),
            currentSelector        = &quot;&quot;,
            currentLevel           = 0,
            ruleStartChar          = -1,
            ruleStartLine          = -1,
            selectorStartChar      = -1,
            selectorStartLine      = -1,
            selectorGroupStartLine = -1,
            selectorGroupStartChar = -1,
            declListStartLine      = -1,
            declListStartChar      = -1,
            escapePattern          = new RegExp(&quot;\\\\[^\\\\]+&quot;, &quot;g&quot;),
            validationPattern      = new RegExp(&quot;\\\\([a-f0-9]{6}|[a-f0-9]{4}(\\s|\\\\|$)|[a-f0-9]{2}(\\s|\\\\|$)|.)&quot;, &quot;i&quot;),
            _parseRuleList;

        &#x2F;&#x2F; implement _firstToken()&#x2F;_nextToken() methods to
        &#x2F;&#x2F; provide a single stream of tokens

        function _hasStream() {
            while (stream.eol()) {
                line++;
                if (line &gt;= lineCount) {
                    return false;
                }
                if (_hasNonWhitespace(currentSelector)) {
                    &#x2F;&#x2F; If we are in a current selector and starting a newline,
                    &#x2F;&#x2F; make sure there is whitespace in the selector
                    currentSelector += &quot; &quot;;
                }
                stream = new CodeMirror.StringStream(lines[line]);
            }
            return true;
        }

        function _firstToken() {
            state = CodeMirror.startState(mode);
            lines = CodeMirror.splitLines(text);
            lineCount = lines.length;
            if (lineCount === 0) {
                return false;
            }
            line = 0;
            stream = new CodeMirror.StringStream(lines[line]);
            if (!_hasStream()) {
                return false;
            }
            style = mode.token(stream, state);
            token = stream.current();
            return true;
        }

        function _nextToken() {
            &#x2F;&#x2F; advance the stream past this token
            stream.start = stream.pos;
            if (!_hasStream()) {
                return false;
            }
            style = mode.token(stream, state);
            token = stream.current();
            return true;
        }

        function _firstTokenSkippingWhitespace() {
            if (!_firstToken()) {
                return false;
            }
            while (!_hasNonWhitespace(token)) {
                if (!_nextToken()) {
                    return false;
                }
            }
            return true;
        }

        function _nextTokenSkippingWhitespace() {
            if (!_nextToken()) {
                return false;
            }
            while (!_hasNonWhitespace(token)) {
                if (!_nextToken()) {
                    return false;
                }
            }
            return true;
        }

        function _isStartComment() {
            &#x2F;&#x2F; Also check for line comments used in LESS and SASS.
            return (&#x2F;^\&#x2F;[\&#x2F;\*]&#x2F;.test(token));
        }

        function _parseComment() {
            &#x2F;&#x2F; If it is a line comment, then do nothing and just return. Unlike block
            &#x2F;&#x2F; comment, a line comment is just one single token and the caller always
            &#x2F;&#x2F; has to find the next token by skipping the current token. So leaving
            &#x2F;&#x2F; it for the caller to skip the current token.
            if (&#x2F;^\&#x2F;\&#x2F;&#x2F;.test(token)) {
                return;
            }
            while (!&#x2F;\*\&#x2F;$&#x2F;.test(token)) {
                if (!_nextToken()) {
                    break;
                }
            }
        }

        function _nextTokenSkippingComments() {
            if (!_nextToken()) {
                return false;
            }
            while (_isStartComment()) {
                _parseComment();
                if (!_nextToken()) {
                    return false;
                }
            }
            return true;
        }

        function _skipToClosingBracket(startChar) {
            var skippedText = &quot;&quot;,
                unmatchedBraces = 0;
            if (!startChar) {
                startChar = &quot;{&quot;;
            }
            while (true) {
                if (token.indexOf(startChar) !== -1 &amp;&amp; token.indexOf(_bracketPairs[startChar]) === -1) {
                    &#x2F;&#x2F; Found an opening bracket but not the matching closing bracket in the same token
                    unmatchedBraces++;
                } else if (token === _bracketPairs[startChar]) {
                    unmatchedBraces--;
                    if (unmatchedBraces &lt;= 0) {
                        skippedText += token;
                        return skippedText;
                    }
                }
                skippedText += token;

                if (!_nextTokenSkippingComments()) {
                    return skippedText; &#x2F;&#x2F; eof
                }
            }
        }

        function _maybeProperty() {
            return (&#x2F;^-(moz|ms|o|webkit)-$&#x2F;.test(token) ||
                    (state.state !== &quot;top&quot; &amp;&amp; state.state !== &quot;block&quot; &amp;&amp; state.state !== &quot;pseudo&quot; &amp;&amp;
                    &#x2F;&#x2F; Has a semicolon as in &quot;rgb(0,0,0);&quot;, but not one of those after a LESS
                    &#x2F;&#x2F; mixin parameter variable as in &quot;.size(@width; @height)&quot;
                    stream.string.indexOf(&quot;;&quot;) !== -1 &amp;&amp; !&#x2F;\([^)]+;&#x2F;.test(stream.string)));
        }

        function _skipProperty() {
            var prevToken = &quot;&quot;;
            while (token !== &quot;;&quot;) {
                &#x2F;&#x2F; Skip tokens until the closing brace if we find an interpolated variable.
                if (&#x2F;[#@]\{$&#x2F;.test(token) || (token === &quot;{&quot; &amp;&amp; &#x2F;[#@]$&#x2F;.test(prevToken))) {
                    _skipToClosingBracket(&quot;{&quot;);
                    if (token === &quot;}&quot;) {
                        _nextToken();   &#x2F;&#x2F; Skip the closing brace
                    }
                    if (token === &quot;;&quot;) {
                        break;
                    }
                }
                &#x2F;&#x2F; If there is a &#39;{&#39; or &#39;}&#39; before the &#39;;&#39;,
                &#x2F;&#x2F; then stop skipping.
                if (token === &quot;{&quot; || token === &quot;}&quot;) {
                    return false;   &#x2F;&#x2F; can&#39;t tell if the entire property is skipped
                }
                prevToken = token;
                if (!_nextTokenSkippingComments()) {
                    break;
                }
            }
            return true;    &#x2F;&#x2F; skip the entire property
        }

        function _getParentSelectors() {
            var j;
            for (j = selectors.length - 1; j &gt;= 0; j--) {
                if (selectors[j].declListEndLine === -1 &amp;&amp; selectors[j].level &lt; currentLevel) {
                    return getCompleteSelectors(selectors[j], true);
                }
            }
            return &quot;&quot;;
        }

        function _parseSelector(start, level) {

            currentSelector = &quot;&quot;;
            selectorStartChar = start;
            selectorStartLine = line;

            &#x2F;&#x2F; Everything until the next &#39;,&#39; or &#39;{&#39; is part of the current selector
            while ((token !== &quot;,&quot; &amp;&amp; token !== &quot;{&quot;) ||
                    (token === &quot;{&quot; &amp;&amp; &#x2F;[#@]$&#x2F;.test(currentSelector)) ||
                    (token === &quot;,&quot; &amp;&amp; !_hasNonWhitespace(currentSelector))) {
                if (token === &quot;{&quot;) {
                    &#x2F;&#x2F; Append the interpolated variable to selector
                    currentSelector += _skipToClosingBracket(&quot;{&quot;);
                    _nextToken();  &#x2F;&#x2F; skip the closing brace
                } else if (token === &quot;}&quot; &amp;&amp;
                        (!currentSelector || &#x2F;:\s*\S&#x2F;.test(currentSelector) || !&#x2F;[#@]\{.+&#x2F;.test(currentSelector))) {
                    &#x2F;&#x2F; Either empty currentSelector or currentSelector is a CSS property
                    &#x2F;&#x2F; but not a selector that is in the form of #{$class} or @{class}
                    return false;
                }
                &#x2F;&#x2F; Clear currentSelector if we&#39;re in a property, but make sure we don&#39;t treat
                &#x2F;&#x2F; the semicolors inside a parameter as a property separators.
                if ((token === &quot;;&quot; &amp;&amp; state.state !== &quot;parens&quot;) ||
                        &#x2F;&#x2F; Make sure that something like `&gt; li &gt; a {` is not identified as a property
                        (state.state === &quot;prop&quot; &amp;&amp; !&#x2F;\{&#x2F;.test(stream.string))) {
                    currentSelector = &quot;&quot;;
                } else if (token === &quot;(&quot;) {
                    &#x2F;&#x2F; Collect everything inside the parentheses as a whole chunk so that
                    &#x2F;&#x2F; commas inside the parentheses won&#39;t be identified as selector separators
                    &#x2F;&#x2F; by while loop.
                    if (_hasNonWhitespace(currentSelector)) {
                        currentSelector += _skipToClosingBracket(&quot;(&quot;);
                    } else {
                        &#x2F;&#x2F; Nothing in currentSelector yet. Skip to the closing parenthesis
                        &#x2F;&#x2F; without collecting the selector since a selector cannot start with
                        &#x2F;&#x2F; an opening parenthesis.
                        _skipToClosingBracket(&quot;(&quot;);
                    }
                } else if (_hasNonWhitespace(token) || _hasNonWhitespace(currentSelector)) {
                    currentSelector += token;
                }
                if (!_nextTokenSkippingComments()) {
                    return false; &#x2F;&#x2F; eof
                }
            }

            if (!currentSelector) {
                return false;
            }

            &#x2F;&#x2F; Unicode character replacement as defined in http:&#x2F;&#x2F;www.w3.org&#x2F;TR&#x2F;CSS21&#x2F;syndata.html#characters
            if (&#x2F;\\&#x2F;.test(currentSelector)) {
                &#x2F;&#x2F; Double replace in case of pattern overlapping (regex improvement?)
                currentSelector = currentSelector.replace(escapePattern, function (escapedToken) {
                    return escapedToken.replace(validationPattern, function (unicodeChar) {
                        unicodeChar = unicodeChar.substr(1);
                        if (unicodeChar.length === 1) {
                            return unicodeChar;
                        } else {
                            if (parseInt(unicodeChar, 16) &lt; 0x10FFFF) {
                                return String.fromCharCode(parseInt(unicodeChar, 16));
                            } else { return String.fromCharCode(0xFFFD); }
                        }
                    });
                });
            }

            currentSelector = currentSelector.trim();
            var startChar = (selectorGroupStartLine === -1) ? selectorStartChar : selectorStartChar + 1;
            var selectorStart = (stream.string.indexOf(currentSelector, selectorStartChar) !== -1) ? stream.string.indexOf(currentSelector, selectorStartChar - currentSelector.length) : startChar;

            if (currentSelector !== &quot;&quot;) {
                if (currentLevel &lt; level) {
                    currentLevel++;
                }
                if (ruleStartLine === -1) {
                    ruleStartLine = line;
                    ruleStartChar = stream.start - currentSelector.length;
                }
                var parentSelectors = _getParentSelectors();
                selectors.push({selector: currentSelector,
                                ruleStartLine: ruleStartLine,
                                ruleStartChar: ruleStartChar,
                                selectorStartLine: selectorStartLine,
                                selectorStartChar: selectorStart,
                                declListEndLine: -1,
                                selectorEndLine: line,
                                selectorEndChar: selectorStart + currentSelector.length,
                                selectorGroupStartLine: selectorGroupStartLine,
                                selectorGroupStartChar: selectorGroupStartChar,
                                level: currentLevel,
                                parentSelectors: parentSelectors
                               });
                currentSelector = &quot;&quot;;
            }
            selectorStartChar = -1;

            return true;
        }

        function _parseSelectorList(level) {
            selectorGroupStartLine = (stream.string.indexOf(&quot;,&quot;) !== -1) ? line : -1;
            selectorGroupStartChar = stream.start;

            if (!_parseSelector(stream.start, level)) {
                return false;
            }

            while (token === &quot;,&quot;) {
                if (!_nextTokenSkippingComments()) {
                    return false; &#x2F;&#x2F; eof
                }
                if (!_parseSelector(stream.start, level)) {
                    return false;
                }
            }

            return true;
        }

        function _parseDeclarationList(level) {

            var j;
            declListStartLine = Math.min(line, lineCount - 1);
            declListStartChar = stream.start;

            &#x2F;&#x2F; Extract the entire selector group we just saw.
            var selectorGroup, sgLine;
            if (selectorGroupStartLine !== -1) {
                selectorGroup = &quot;&quot;;
                for (sgLine = selectorGroupStartLine; sgLine &lt;= declListStartLine; sgLine++) {
                    var startChar = 0, endChar = lines[sgLine].length;
                    if (sgLine === selectorGroupStartLine) {
                        startChar = selectorGroupStartChar;
                    } else {
                        selectorGroup += &quot; &quot;; &#x2F;&#x2F; replace the newline with a single space
                    }
                    if (sgLine === declListStartLine) {
                        endChar = declListStartChar;
                    }
                    selectorGroup += lines[sgLine].substring(startChar, endChar).trim();
                }
                selectorGroup = selectorGroup.trim();
            }

            &#x2F;&#x2F; assign this declaration list position and selector group to every selector on the stack
            &#x2F;&#x2F; that doesn&#39;t have a declaration list start and end line
            for (j = selectors.length - 1; j &gt;= 0; j--) {
                if (selectors[j].level === level) {
                    if (selectors[j].declListEndLine !== -1) {
                        break;
                    } else {
                        selectors[j].declListStartLine = declListStartLine;
                        selectors[j].declListStartChar = declListStartChar;
                        if (selectorGroup) {
                            selectors[j].selectorGroup = selectorGroup;
                        }
                    }
                }
            }

            var nested = true;
            do {
                &#x2F;&#x2F; Since we&#39;re now in a declaration list, that means we also finished
                &#x2F;&#x2F; parsing the whole selector group. Therefore, reset selectorGroupStartLine
                &#x2F;&#x2F; so that next time we parse a selector we know it&#39;s a new group
                selectorGroupStartLine = -1;
                selectorGroupStartChar = -1;
                ruleStartLine = -1;
                ruleStartChar = -1;

                if (!nested) {
                    if (currentLevel &gt; 0 &amp;&amp; currentLevel === level) {
                        currentLevel--;
                        &#x2F;&#x2F; Skip past &#39;}&#39;
                        if (token === &quot;}&quot;) {
                            _nextTokenSkippingWhitespace();
                        }
                    }
                }
                &#x2F;&#x2F; Skip past &#39;{&#39; before parsing nested rule list.
                if (token === &quot;{&quot;) {
                    _nextTokenSkippingWhitespace();
                }
                nested = _parseRuleList(undefined, currentLevel + 1);

                &#x2F;&#x2F; assign this declaration list position to every selector on the stack
                &#x2F;&#x2F; that doesn&#39;t have a declaration list end line
                for (j = selectors.length - 1; j &gt;= 0; j--) {
                    if (selectors[j].level &lt; currentLevel) {
                        break;
                    }
                    if (selectors[j].declListEndLine === -1) {
                        selectors[j].declListEndLine = line;
                        selectors[j].declListEndChar = stream.pos - 1; &#x2F;&#x2F; stream.pos actually points to the char after the }
                    }
                }
            } while (currentLevel &gt; 0 &amp;&amp; currentLevel === level);
        }

        function includeCommentInNextRule() {
            if (ruleStartChar !== -1) {
                return false;       &#x2F;&#x2F; already included
            }
            if (stream.start &gt; 0 &amp;&amp; lines[line].substr(0, stream.start).indexOf(&quot;}&quot;) !== -1) {
                return false;       &#x2F;&#x2F; on same line as &#39;}&#39;, so it&#39;s for previous rule
            }
            return true;
        }

        function _isStartAtRule() {
            &#x2F;&#x2F; Exclude @mixin from at-rule so that we can parse it like a normal rule list
            return (&#x2F;^@&#x2F;.test(token) &amp;&amp; !&#x2F;^@mixin&#x2F;i.test(token) &amp;&amp; token !== &quot;@&quot;);
        }

        function _followedByPseudoSelector() {
            return (&#x2F;\}:(enabled|disabled|checked|indeterminate|link|visited|hover|active|focus|target|lang|root|nth-|first-|last-|only-|empty|not)&#x2F;.test(stream.string));
        }

        function _isVariableInterpolatedProperty() {
            return (&#x2F;[@#]\{\S+\}(\s*:|.*;)&#x2F;.test(stream.string) &amp;&amp; !_followedByPseudoSelector());
        }

        function _parseAtRule(level) {

            &#x2F;&#x2F; reset these fields to ignore comments preceding @rules
            ruleStartLine = -1;
            ruleStartChar = -1;
            selectorStartLine = -1;
            selectorStartChar = -1;
            selectorGroupStartLine = -1;
            selectorGroupStartChar = -1;

            if (&#x2F;@media&#x2F;i.test(token)) {
                &#x2F;&#x2F; @media rule holds a rule list

                &#x2F;&#x2F; Skip everything until the opening &#39;{&#39;
                while (token !== &quot;{&quot;) {
                    if (!_nextTokenSkippingComments()) {
                        return; &#x2F;&#x2F; eof
                    }
                }

                &#x2F;&#x2F; skip past &#39;{&#39;, to next non-ws token
                if (!_nextTokenSkippingWhitespace()) {
                    return; &#x2F;&#x2F; eof
                }

                if (currentLevel &lt;= level) {
                    currentLevel++;
                }

                &#x2F;&#x2F; Parse rules until we see &#39;}&#39;
                &#x2F;&#x2F; Treat media rule as one nested level by
                &#x2F;&#x2F; calling _parseRuleList with next level.
                _parseRuleList(&quot;}&quot;, currentLevel + 1);

                if (currentLevel &gt; 0) {
                    currentLevel--;
                }

            } else {
                &#x2F;&#x2F; This code handles @rules in this format:
                &#x2F;&#x2F;   @rule ... ;
                &#x2F;&#x2F; Or any less variable that starts with @var ... ;
                &#x2F;&#x2F; Skip everything until the next &#39;;&#39;
                while (token !== &quot;;&quot;) {
                    &#x2F;&#x2F; This code handle @rules that use this format:
                    &#x2F;&#x2F;    @rule ... { ... }
                    &#x2F;&#x2F; such as @page, @keyframes (also -webkit-keyframes, etc.), and @font-face.
                    &#x2F;&#x2F; Skip everything including nested braces until the next matching &#39;}&#39;
                    if (token === &quot;{&quot;) {
                        _skipToClosingBracket(&quot;{&quot;);
                        return;
                    }
                    if (!_nextTokenSkippingComments()) {
                        return; &#x2F;&#x2F; eof
                    }
                }
            }
        }

        &#x2F;&#x2F; parse a style rule
        function _parseRule(level) {
            if (!_parseSelectorList(level)) {
                return false;
            }

            _parseDeclarationList(level);
            return true;
        }

        _parseRuleList = function (escapeToken, level) {
            while ((!escapeToken) || token !== escapeToken) {
                if (_isVariableInterpolatedProperty()) {
                    if (!_skipProperty()) {
                        &#x2F;&#x2F; We found a &quot;{&quot; or &quot;}&quot; while skipping a property. Return false to handle the
                        &#x2F;&#x2F; opening or closing of a block properly.
                        return false;
                    }
                } else if (_isStartAtRule()) {
                    &#x2F;&#x2F; @rule
                    _parseAtRule(level);
                } else if (_isStartComment()) {
                    &#x2F;&#x2F; comment - make this part of style rule
                    if (includeCommentInNextRule()) {
                        ruleStartChar = stream.start;
                        ruleStartLine = line;
                    }
                    _parseComment();
                } else if (_maybeProperty()) {
                    &#x2F;&#x2F; Skip the property.
                    if (!_skipProperty()) {
                        &#x2F;&#x2F; We found a &quot;{&quot; or &quot;}&quot; while skipping a property. Return false to handle the
                        &#x2F;&#x2F; opening or closing of a block properly.
                        return false;
                    }
                } else {
                    &#x2F;&#x2F; Otherwise, it&#39;s style rule
                    if (!_parseRule(level === undefined ? 0 : level) &amp;&amp; level &gt; 0) {
                        return false;
                    }
                    if (level &gt; 0) {
                        return true;
                    }
                    &#x2F;&#x2F; Clear ruleStartChar and ruleStartLine in case we have a comment
                    &#x2F;&#x2F; at the end of previous rule in level 0.
                    ruleStartChar = -1;
                    ruleStartLine = -1;
                }

                if (!_nextTokenSkippingWhitespace()) {
                    break;
                }
            }

            return true;
        };

        &#x2F;&#x2F; Do parsing

        if (_firstTokenSkippingWhitespace()) {

            &#x2F;&#x2F; Style sheet is a rule list
            _parseRuleList();
        }

        return selectors;
    }</code></pre>
            </div>
            <div class="member public">
              <span class="pull-right scope">
                
                Public API
              </span>
              <h4>findMatchingRules</h4>
              <div class="description"><p>Return all rules matching the specified selector.
For now, we only look at the rightmost simple selector. For example, searching for &quot;.foo&quot; will
match these rules:
 .foo {}
 div .foo {}
 div.foo {}
 div .foo[bar=&quot;42&quot;] {}
 div .foo:hovered {}
 div .foo::first-child
but will <em>not</em> match these rules:
 .foobar {}
 .foo .bar {}
 div .foo .bar {}
 .foo.bar {}</p>
</div>
              <dl>
                  <dt>selector</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>The selector to match. This can be a tag selector, class selector or id selector</dd>
                  <dt>htmlDocument</dt>
                    <span class="label label-nullable pull-left">nullable</span>
                  <dd class="label label-info pull-left">Document</dd>
                  <dd>An HTML file for context (so we can search <style> blocks)</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function findMatchingRules(selector, htmlDocument) {
        var result          = new $.Deferred(),
            resultSelectors = [];

        &#x2F;&#x2F; Synchronously search for matches in &lt;style&gt; blocks
        if (htmlDocument) {
            _findMatchingRulesInStyleBlocks(htmlDocument, selector, resultSelectors);
        }

        &#x2F;&#x2F; Asynchronously search for matches in all the project&#39;s CSS files
        &#x2F;&#x2F; (results are appended together in same &#39;resultSelectors&#39; array)
        _findMatchingRulesInCSSFiles(selector, resultSelectors)
            .done(function () {
                result.resolve(resultSelectors);
            })
            .fail(function (error) {
                result.reject(error);
            });

        return result.promise();
    }</code></pre>
            </div>
            <div class="member public">
              <span class="pull-right scope">
                
                Public API
              </span>
              <h4>findSelectorAtDocumentPos</h4>
              <div class="description"><p>Returns the selector(s) of the rule at the specified document pos, or &quot;&quot; if the position is
is not within a style rule.</p>
</div>
              <dl>
                  <dt>editor</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">Editor</dd>
                  <dd>Editor to search</dd>
                  <dt>pos</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">{line: number, ch: number}</dd>
                  <dd>Position to search</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function findSelectorAtDocumentPos(editor, pos) {
        var cm = editor._codeMirror;
        var ctx = TokenUtils.getInitialContext(cm, $.extend({}, pos));
        var selector = &quot;&quot;, foundChars = false;
        var isPreprocessorDoc = isCSSPreprocessorFile(editor.document.file.fullPath);
        var selectorArray = [];

        function _skipToOpeningBracket(ctx, startChar) {
            var unmatchedBraces = 0;
            if (!startChar) {
                startChar = &quot;}&quot;;
            }
            while (true) {
                if (startChar === ctx.token.string) {
                    unmatchedBraces++;
                } else if (ctx.token.string.match(_invertedBracketPairs[startChar])) {
                    unmatchedBraces--;
                    if (unmatchedBraces &lt;= 0) {
                        return;
                    }
                }

                if (!TokenUtils.movePrevToken(ctx)) {
                    return;
                }
            }
        }

        &#x2F;&#x2F; Parse a selector. Assumes ctx is pointing at the opening
        &#x2F;&#x2F; { that is after the selector name.
        function _parseSelector(ctx) {
            var selector = &quot;&quot;;

            &#x2F;&#x2F; Skip over {
            TokenUtils.movePrevToken(ctx);

            while (true) {
                if (ctx.token.type !== &quot;comment&quot;) {
                    &#x2F;&#x2F; Stop once we&#39;ve reached a {, }, or ;
                    if (&#x2F;[\{\}\;]&#x2F;.test(ctx.token.string)) {
                        break;
                    }

                    &#x2F;&#x2F; Stop once we&#39;ve reached a &lt;style ...&gt; tag
                    if (ctx.token.string === &quot;style&quot; &amp;&amp; ctx.token.type === &quot;tag&quot;) {
                        &#x2F;&#x2F; Remove everything up to end-of-tag from selector
                        var eotIndex = selector.indexOf(&quot;&gt;&quot;);
                        if (eotIndex !== -1) {
                            selector = selector.substring(eotIndex + 1);
                        }
                        break;
                    }

                    selector = ctx.token.string + selector;
                }
                if (!TokenUtils.movePrevToken(ctx)) {
                    break;
                }
            }

            return selector;
        }

        var skipPrevSibling = false,
            state           = _getContextState(ctx);

        &#x2F;&#x2F; If the cursor is inside a non-whitespace token with &quot;block&quot; or &quot;top&quot; state, then it is inside a
        &#x2F;&#x2F; selector. The only exception is when it is immediately after the &#39;{&#39;.
        if (isPreprocessorDoc &amp;&amp; _hasNonWhitespace(ctx.token.string) &amp;&amp; ctx.token.string !== &quot;{&quot; &amp;&amp;
                (state.state === &quot;block&quot; || state.state === &quot;top&quot;)) {
            foundChars = true;
        }

        &#x2F;&#x2F; scan backwards to see if the cursor is in a rule
        do {
            if (ctx.token.type !== &quot;comment&quot;) {
                if (ctx.token.string === &quot;}&quot;) {
                    if (isPreprocessorDoc) {
                        if (state.state === &quot;top&quot;) {
                            break;
                        }
                        skipPrevSibling = true;
                        &#x2F;&#x2F; Skip past the entire preceding block until the matching &quot;{&quot;
                        _skipToOpeningBracket(ctx, &quot;}&quot;);
                    } else {
                        break;
                    }
                } else if (ctx.token.string === &quot;{&quot;) {
                    selector = _parseSelector(ctx);
                    if (isPreprocessorDoc) {
                        if (!skipPrevSibling &amp;&amp; !&#x2F;^\s*@&#x2F;.test(selector)) {
                            selectorArray.unshift(selector);
                        }
                        if (skipPrevSibling) {
                            skipPrevSibling = false;
                        }
                    } else {
                        break;
                    }
                } else {
                    if (!isPreprocessorDoc &amp;&amp; _hasNonWhitespace(ctx.token.string)) {
                        foundChars = true;
                    }
                    TokenUtils.movePrevToken(ctx);
                }
            } else {
                TokenUtils.movePrevToken(ctx);
            }
        } while (!TokenUtils.isAtStart(ctx));

        selector = _stripAtRules(selector);

        &#x2F;&#x2F; Reset the context to original scan position
        ctx = TokenUtils.getInitialContext(cm, $.extend({}, pos));

        &#x2F;&#x2F; special case - we aren&#39;t in a selector and haven&#39;t found any chars,
        &#x2F;&#x2F; look at the next immediate token to see if it is non-whitespace.
        &#x2F;&#x2F; For preprocessor documents we need to move the cursor to next non-whitespace
        &#x2F;&#x2F; token so that we can collect the current selector if the cursor is inside it.
        if ((!selector &amp;&amp; !foundChars &amp;&amp; !isPreprocessorDoc) ||
                (isPreprocessorDoc &amp;&amp; (ctx.token.string === &quot;&quot; || &#x2F;\s+&#x2F;.test(ctx.token.string)))) {
            if (TokenUtils.moveNextToken(ctx) &amp;&amp; ctx.token.type !== &quot;comment&quot; &amp;&amp; _hasNonWhitespace(ctx.token.string)) {
                foundChars = true;
                ctx = TokenUtils.getInitialContext(cm, $.extend({}, pos));
            }
        }

        &#x2F;&#x2F; At this point if we haven&#39;t found a selector, but have seen chars when
        &#x2F;&#x2F; scanning, assume we are in the middle of a selector. For a preprocessor
        &#x2F;&#x2F; document we also need to collect the current selector if the cursor is
        &#x2F;&#x2F; within the selector or whitespaces immediately before or after it.
        if ((!selector || isPreprocessorDoc) &amp;&amp; foundChars) {
            &#x2F;&#x2F; scan forward to see if the cursor is in a selector
            while (true) {
                if (ctx.token.type !== &quot;comment&quot;) {
                    if (ctx.token.string === &quot;{&quot;) {
                        selector = _parseSelector(ctx);
                        if (isPreprocessorDoc &amp;&amp; !&#x2F;^\s*@&#x2F;.test(selector)) {
                            selectorArray.push(selector);
                        }
                        break;
                    } else if (ctx.token.string === &quot;}&quot; || ctx.token.string === &quot;;&quot;) {
                        break;
                    }
                }
                if (!TokenUtils.moveNextToken(ctx)) {
                    break;
                }
            }
        }

        if (isPreprocessorDoc) {
            return _getSelectorInFinalCSSForm(selectorArray);
        }

        return _stripAtRules(selector);
    }</code></pre>
            </div>
            <div class="member public">
              <span class="pull-right scope">
                
                Public API
              </span>
              <h4>getCompleteSelectors</h4>
              <div class="description"><p>Return a string that shows the literal parent hierarchy of the selector
in info.</p>
</div>
              <dl>
                  <dt>info</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">SelectorInfo</dd>
                  <dd></dd>
                  <dt>useGroup</dt>
                    <span class="label label-optional pull-left">optional</span>
                  <dd class="label label-info pull-left">boolean</dd>
                  <dd>true to append selectorGroup instead of selector</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function getCompleteSelectors(info, useGroup) {
        if (info.parentSelectors) {
            &#x2F;&#x2F; Show parents with &#x2F; separators.
            var completeSelectors = info.parentSelectors + &quot; &#x2F; &quot;;
            if (useGroup &amp;&amp; info.selectorGroup) {
                completeSelectors += info.selectorGroup;
            } else {
                completeSelectors += info.selector;
            }
            return completeSelectors;
        } else if (useGroup &amp;&amp; info.selectorGroup) {
            return info.selectorGroup;
        }

        return info.selector;
    }</code></pre>
            </div>
            <div class="member public">
              <span class="pull-right scope">
                
                Public API
              </span>
              <h4>getInfoAtPos</h4>
              <div class="description"><p>Returns a context info object for the given cursor position</p>
</div>
              <dl>
                  <dt>editor</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">Editor</dd>
                  <dd></dd>
                  <dt>constPos</dt>
                  <dd class="label label-info pull-left">{ch: number,line: number}</dd>
                  <dd>A CM pos (likely from editor.getCursorPos())</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function getInfoAtPos(editor, constPos) {
        &#x2F;&#x2F; We&#39;re going to be changing pos a lot, but we don&#39;t want to mess up
        &#x2F;&#x2F; the pos the caller passed in so we use extend to make a safe copy of it.
        var pos = $.extend({}, constPos),
            ctx = TokenUtils.getInitialContext(editor._codeMirror, pos),
            mode = editor.getModeForSelection();

        &#x2F;&#x2F; Check if this is inside a style block or in a css&#x2F;less document.
        if (mode !== &quot;css&quot; &amp;&amp; mode !== &quot;text&#x2F;x-scss&quot; &amp;&amp; mode !== &quot;text&#x2F;x-less&quot;) {
            return createInfo();
        }

        &#x2F;&#x2F; Context from the current editor will have htmlState if we are in css mode
        &#x2F;&#x2F; and in attribute value state of a tag with attribute name style
        if (ctx.token.state.htmlState &amp;&amp; (!ctx.token.state.localMode || ctx.token.state.localMode.name !== &quot;css&quot;)) {

            &#x2F;&#x2F; tagInfo is required to aquire the style attr value
            var tagInfo = HTMLUtils.getTagInfo(editor, pos, true),
                &#x2F;&#x2F; To be used as relative character position
                offset = tagInfo.position.offset;</code></pre>
            </div>
            <div class="member public">
              <span class="pull-right scope">
                
                Public API
              </span>
              <h4>getRangeSelectors</h4>
              <div class="description"><p>Given a TextRange, extracts the selector(s) for the rule in the range and returns it.
Assumes the range only contains one rule; if there&#39;s more than one, it will return the
selector(s) for the first rule.</p>
</div>
              <dl>
                  <dt>range</dt>
                  <dd class="label label-info pull-left">TextRange</dd>
                  <dd>The range to extract the selector(s) from.</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function getRangeSelectors(range) {
        &#x2F;&#x2F; There&#39;s currently no immediate way to access a given line in a Document, because it&#39;s just
        &#x2F;&#x2F; stored as a string. Eventually, we should have Documents cache the lines in the document
        &#x2F;&#x2F; as well, or make them use CodeMirror documents which do the same thing.
        var i, startIndex = 0, endIndex, text = range.document.getText();
        for (i = 0; i &lt; range.startLine; i++) {
            startIndex = text.indexOf(&quot;\n&quot;, startIndex) + 1;
        }
        endIndex = startIndex;
        &#x2F;&#x2F; Go one line past the end line. We&#39;ll extract text up to but not including the last newline.
        for (i = range.startLine + 1; i &lt;= range.endLine + 1; i++) {
            endIndex = text.indexOf(&quot;\n&quot;, endIndex) + 1;
        }
        var allSelectors = extractAllSelectors(text.substring(startIndex, endIndex));

        &#x2F;&#x2F; There should only be one rule in the range, and if there are multiple selectors for
        &#x2F;&#x2F; the first rule, they&#39;ll all be recorded in the &quot;selectorGroup&quot; for the first selector,
        &#x2F;&#x2F; so we only need to look at the first one.
        return (allSelectors.length ? allSelectors[0].selectorGroup || allSelectors[0].selector : &quot;&quot;);
    }

    exports._findAllMatchingSelectorsInText = _findAllMatchingSelectorsInText; &#x2F;&#x2F; For testing only
    exports.findMatchingRules = findMatchingRules;
    exports.extractAllSelectors = extractAllSelectors;
    exports.extractAllNamedFlows = extractAllNamedFlows;
    exports.findSelectorAtDocumentPos = findSelectorAtDocumentPos;
    exports.reduceStyleSheetForRegExParsing = reduceStyleSheetForRegExParsing;
    exports.addRuleToDocument = addRuleToDocument;
    exports.consolidateRules = consolidateRules;
    exports.getRangeSelectors = getRangeSelectors;
    exports.getCompleteSelectors = getCompleteSelectors;
    exports.isCSSPreprocessorFile = isCSSPreprocessorFile;

    exports.SELECTOR = SELECTOR;
    exports.PROP_NAME = PROP_NAME;
    exports.PROP_VALUE = PROP_VALUE;
    exports.IMPORT_URL = IMPORT_URL;

    exports.getInfoAtPos = getInfoAtPos;

    &#x2F;&#x2F; The createInfo is really only for the unit tests so they can make the same
    &#x2F;&#x2F; structure to compare results with.
    exports.createInfo = createInfo;
});</code></pre>
            </div>
            <div class="member public">
              <span class="pull-right scope">
                
                Public API
              </span>
              <h4>isCSSPreprocessorFile</h4>
              <div class="description"><p>Determines if the given path is a CSS preprocessor file that CSSUtils supports.</p>
</div>
              <dl>
                  <dt>filePath</dt>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>Absolute path to the file.</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function isCSSPreprocessorFile(filePath) {
        var languageId = LanguageManager.getLanguageForPath(filePath).getId();
        return (languageId === &quot;less&quot; || languageId === &quot;scss&quot;);
    }</code></pre>
            </div>
            <div class="member public">
              <span class="pull-right scope">
                
                Public API
              </span>
              <h4>reduceStyleSheetForRegExParsing</h4>
              <div class="description"><p>Reduces the style sheet by removing comments and strings
so that the content can be parsed using a regular expression</p>
</div>
              <dl>
                  <dt>content</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>to reduce</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">    function reduceStyleSheetForRegExParsing(content) {
        return _removeStrings(_removeComments(content));
    }</code></pre>
            </div>
            
          </section>
          
          
        </div>
      </div>
    </div>

    <script type="text/javascript" src="../../assets/js/prism.js"></script>
  </body>
</html>
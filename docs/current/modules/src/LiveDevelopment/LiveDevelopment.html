<!DOCTYPE html>
<html lang="en">
  <head>
    <title>LiveDevelopment - Brackets API</title>
    <link rel="stylesheet" href="../../../assets/css/bootstrap.css">
    <link rel="stylesheet" href="../../../assets/css/typeahead.js-bootstrap.css">
    <link rel="stylesheet" href="../../../assets/css/font-awesome.css">
    <link rel="stylesheet" href="../../../assets/css/prism.css">
    <link rel="stylesheet" href="../../../assets/css/main.css">
    <!--[if IE 7]>
    <link rel="stylesheet" href="../assets/css/font-awesome-ie7.css">
    <![endif]-->
    <script type="text/javascript" src="../../../assets/js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../../../assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="../../../assets/js/typeahead.js"></script>
    <script type="text/javascript" src="../../../assets/js/main.js"></script>
    <script src="http://use.edgefonts.net/source-sans-pro:n3,i3,n4,i4;source-code-pro.js"></script>

    <!-- Control the Flash of Unstyled Text (or FOUT) -->
    <style type="text/css">
        .wf-loading h1, .wf-loading h2, .wf-loading h3, .wf-loading h4,
        .wf-loading h5, .wf-loading h6, .wf-loading p, .wf-loading a {
            visibility: hidden;
        }
    </style>
    
    <script>
      window.moduleLevel = "../../..";
    </script>
  </head>
  
  <body>
    <div class="row-fluid">
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="../../../index.html">Brackets API</a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li><a href="#dependencies">Dependencies</a></li>
                <li><a href="#variables">Variables</a></li>
                <li><a href="#functions">Functions</a></li>
                <li><a href="#classes">Classes</a></li>
              </ul>
            </div>
            <input class="typeahead" placeholder="Search..." type="text" >
          </div>
        </div>
      </div>    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="left-section">
            <h2 class="number-of-modules">Modules (188)</h2>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src"><i class="icon-folder-open"></i>src</a>
              </li>
            </ul>
            <ul id="package_src" class="nav nav-list">
              <li><a href="../../../modules/src/brackets.html">brackets</a></li>
              <li><a href="../../../modules/src/dependencies.html">dependencies</a></li>
              <li><a href="../../../modules/src/main.html">main</a></li>
              <li><a href="../../../modules/src/strings.html">strings</a></li>
              <li><a href="../../../modules/src/xorigin.html">xorigin</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_command"><i class="icon-folder-open"></i>src\command</a>
              </li>
            </ul>
            <ul id="package_src_command" class="nav nav-list">
              <li><a href="../../../modules/src/command/CommandManager.html">CommandManager</a></li>
              <li><a href="../../../modules/src/command/Commands.html">Commands</a></li>
              <li><a href="../../../modules/src/command/DefaultMenus.html">DefaultMenus</a></li>
              <li><a href="../../../modules/src/command/KeyBindingManager.html">KeyBindingManager</a></li>
              <li><a href="../../../modules/src/command/Menus.html">Menus</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_document"><i class="icon-folder-open"></i>src\document</a>
              </li>
            </ul>
            <ul id="package_src_document" class="nav nav-list">
              <li><a href="../../../modules/src/document/ChangedDocumentTracker.html">ChangedDocumentTracker</a></li>
              <li><a href="../../../modules/src/document/Document.html">Document</a></li>
              <li><a href="../../../modules/src/document/DocumentCommandHandlers.html">DocumentCommandHandlers</a></li>
              <li><a href="../../../modules/src/document/DocumentManager.html">DocumentManager</a></li>
              <li><a href="../../../modules/src/document/InMemoryFile.html">InMemoryFile</a></li>
              <li><a href="../../../modules/src/document/TextRange.html">TextRange</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_editor"><i class="icon-folder-open"></i>src\editor</a>
              </li>
            </ul>
            <ul id="package_src_editor" class="nav nav-list">
              <li><a href="../../../modules/src/editor/CodeHintList.html">CodeHintList</a></li>
              <li><a href="../../../modules/src/editor/CodeHintManager.html">CodeHintManager</a></li>
              <li><a href="../../../modules/src/editor/CSSInlineEditor.html">CSSInlineEditor</a></li>
              <li><a href="../../../modules/src/editor/Editor.html">Editor</a></li>
              <li><a href="../../../modules/src/editor/EditorCommandHandlers.html">EditorCommandHandlers</a></li>
              <li><a href="../../../modules/src/editor/EditorManager.html">EditorManager</a></li>
              <li><a href="../../../modules/src/editor/EditorOptionHandlers.html">EditorOptionHandlers</a></li>
              <li><a href="../../../modules/src/editor/EditorStatusBar.html">EditorStatusBar</a></li>
              <li><a href="../../../modules/src/editor/ImageViewer.html">ImageViewer</a></li>
              <li><a href="../../../modules/src/editor/InlineTextEditor.html">InlineTextEditor</a></li>
              <li><a href="../../../modules/src/editor/InlineWidget.html">InlineWidget</a></li>
              <li><a href="../../../modules/src/editor/MultiRangeInlineEditor.html">MultiRangeInlineEditor</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_extensibility"><i class="icon-folder-open"></i>src\extensibility</a>
              </li>
            </ul>
            <ul id="package_src_extensibility" class="nav nav-list">
              <li><a href="../../../modules/src/extensibility/ExtensionManager.html">ExtensionManager</a></li>
              <li><a href="../../../modules/src/extensibility/ExtensionManagerDialog.html">ExtensionManagerDialog</a></li>
              <li><a href="../../../modules/src/extensibility/ExtensionManagerView.html">ExtensionManagerView</a></li>
              <li><a href="../../../modules/src/extensibility/ExtensionManagerViewModel.html">ExtensionManagerViewModel</a></li>
              <li><a href="../../../modules/src/extensibility/InstallExtensionDialog.html">InstallExtensionDialog</a></li>
              <li><a href="../../../modules/src/extensibility/Package.html">Package</a></li>
              <li><a href="../../../modules/src/extensibility/registry_utils.html">registry_utils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_file"><i class="icon-folder-open"></i>src\file</a>
              </li>
            </ul>
            <ul id="package_src_file" class="nav nav-list">
              <li><a href="../../../modules/src/file/FileUtils.html">FileUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_filesystem"><i class="icon-folder-open"></i>src\filesystem</a>
              </li>
            </ul>
            <ul id="package_src_filesystem" class="nav nav-list">
              <li><a href="../../../modules/src/filesystem/Directory.html">Directory</a></li>
              <li><a href="../../../modules/src/filesystem/File.html">File</a></li>
              <li><a href="../../../modules/src/filesystem/FileIndex.html">FileIndex</a></li>
              <li><a href="../../../modules/src/filesystem/FileSystem.html">FileSystem</a></li>
              <li><a href="../../../modules/src/filesystem/FileSystemEntry.html">FileSystemEntry</a></li>
              <li><a href="../../../modules/src/filesystem/FileSystemError.html">FileSystemError</a></li>
              <li><a href="../../../modules/src/filesystem/FileSystemStats.html">FileSystemStats</a></li>
              <li><a href="../../../modules/src/filesystem/WatchedRoot.html">WatchedRoot</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_filesystem_impls_appshell"><i class="icon-folder-open"></i>src\filesystem\impls\appshell</a>
              </li>
            </ul>
            <ul id="package_src_filesystem_impls_appshell" class="nav nav-list">
              <li><a href="../../../modules/src/filesystem/impls/appshell/AppshellFileSystem.html">AppshellFileSystem</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_filesystem_impls_appshell_node"><i class="icon-folder-open"></i>src\filesystem\impls\appshell\node</a>
              </li>
            </ul>
            <ul id="package_src_filesystem_impls_appshell_node" class="nav nav-list">
              <li><a href="../../../modules/src/filesystem/impls/appshell/node/ChokidarWatcher.html">ChokidarWatcher</a></li>
              <li><a href="../../../modules/src/filesystem/impls/appshell/node/CSharpWatcher.html">CSharpWatcher</a></li>
              <li><a href="../../../modules/src/filesystem/impls/appshell/node/FileWatcherDomain.html">FileWatcherDomain</a></li>
              <li><a href="../../../modules/src/filesystem/impls/appshell/node/FileWatcherManager.html">FileWatcherManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_help"><i class="icon-folder-open"></i>src\help</a>
              </li>
            </ul>
            <ul id="package_src_help" class="nav nav-list">
              <li><a href="../../../modules/src/help/HelpCommandHandlers.html">HelpCommandHandlers</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_JSUtils"><i class="icon-folder-open"></i>src\JSUtils</a>
              </li>
            </ul>
            <ul id="package_src_JSUtils" class="nav nav-list">
              <li><a href="../../../modules/src/JSUtils/HintUtils.html">HintUtils</a></li>
              <li><a href="../../../modules/src/JSUtils/MessageIds.html">MessageIds</a></li>
              <li><a href="../../../modules/src/JSUtils/Preferences.html">Preferences</a></li>
              <li><a href="../../../modules/src/JSUtils/ScopeManager.html">ScopeManager</a></li>
              <li><a href="../../../modules/src/JSUtils/Session.html">Session</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_JSUtils_node"><i class="icon-folder-open"></i>src\JSUtils\node</a>
              </li>
            </ul>
            <ul id="package_src_JSUtils_node" class="nav nav-list">
              <li><a href="../../../modules/src/JSUtils/node/ExtractFileContent.html">ExtractFileContent</a></li>
              <li><a href="../../../modules/src/JSUtils/node/TernNodeDomain.html">TernNodeDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_language"><i class="icon-folder-open"></i>src\language</a>
              </li>
            </ul>
            <ul id="package_src_language" class="nav nav-list">
              <li><a href="../../../modules/src/language/CodeInspection.html">CodeInspection</a></li>
              <li><a href="../../../modules/src/language/CSSUtils.html">CSSUtils</a></li>
              <li><a href="../../../modules/src/language/HTMLDOMDiff.html">HTMLDOMDiff</a></li>
              <li><a href="../../../modules/src/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../../modules/src/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
              <li><a href="../../../modules/src/language/HTMLTokenizer.html">HTMLTokenizer</a></li>
              <li><a href="../../../modules/src/language/HTMLUtils.html">HTMLUtils</a></li>
              <li><a href="../../../modules/src/language/JSONUtils.html">JSONUtils</a></li>
              <li><a href="../../../modules/src/language/JSUtils.html">JSUtils</a></li>
              <li><a href="../../../modules/src/language/LanguageManager.html">LanguageManager</a></li>
              <li><a href="../../../modules/src/language/XMLUtils.html">XMLUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_LiveDevelopment_Agents"><i class="icon-folder-open"></i>src\LiveDevelopment\Agents</a>
              </li>
            </ul>
            <ul id="package_src_LiveDevelopment_Agents" class="nav nav-list">
              <li><a href="../../../modules/src/LiveDevelopment/Agents/ConsoleAgent.html">ConsoleAgent</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/Agents/CSSAgent.html">CSSAgent</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/Agents/DOMAgent.html">DOMAgent</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/Agents/DOMHelpers.html">DOMHelpers</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/Agents/DOMNode.html">DOMNode</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/Agents/EditAgent.html">EditAgent</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/Agents/GotoAgent.html">GotoAgent</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/Agents/HighlightAgent.html">HighlightAgent</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/Agents/NetworkAgent.html">NetworkAgent</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/Agents/RemoteAgent.html">RemoteAgent</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/Agents/RemoteFunctions.html">RemoteFunctions</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/Agents/ScriptAgent.html">ScriptAgent</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_LiveDevelopment_Documents"><i class="icon-folder-open"></i>src\LiveDevelopment\Documents</a>
              </li>
            </ul>
            <ul id="package_src_LiveDevelopment_Documents" class="nav nav-list">
              <li><a href="../../../modules/src/LiveDevelopment/Documents/CSSDocument.html">CSSDocument</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/Documents/CSSPreprocessorDocument.html">CSSPreprocessorDocument</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/Documents/HTMLDocument.html">HTMLDocument</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/Documents/JSDocument.html">JSDocument</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_LiveDevelopment_Inspector"><i class="icon-folder-open"></i>src\LiveDevelopment\Inspector</a>
              </li>
            </ul>
            <ul id="package_src_LiveDevelopment_Inspector" class="nav nav-list">
              <li><a href="../../../modules/src/LiveDevelopment/Inspector/Inspector.html">Inspector</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_LiveDevelopment"><i class="icon-folder-open"></i>src\LiveDevelopment</a>
              </li>
            </ul>
            <ul id="package_src_LiveDevelopment" class="nav nav-list">
              <li><a href="../../../modules/src/LiveDevelopment/LiveDevelopment.html">LiveDevelopment</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/LiveDevelopmentUtils.html">LiveDevelopmentUtils</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/LiveDevMultiBrowser.html">LiveDevMultiBrowser</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/LiveDevServerManager.html">LiveDevServerManager</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/main.html">main</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_LiveDevelopment_MultiBrowserImpl_documents"><i class="icon-folder-open"></i>src\LiveDevelopment\MultiBrowserImpl\documents</a>
              </li>
            </ul>
            <ul id="package_src_LiveDevelopment_MultiBrowserImpl_documents" class="nav nav-list">
              <li><a href="../../../modules/src/LiveDevelopment/MultiBrowserImpl/documents/LiveCSSDocument.html">LiveCSSDocument</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/MultiBrowserImpl/documents/LiveDocument.html">LiveDocument</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/MultiBrowserImpl/documents/LiveHTMLDocument.html">LiveHTMLDocument</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_LiveDevelopment_MultiBrowserImpl_language"><i class="icon-folder-open"></i>src\LiveDevelopment\MultiBrowserImpl\language</a>
              </li>
            </ul>
            <ul id="package_src_LiveDevelopment_MultiBrowserImpl_language" class="nav nav-list">
              <li><a href="../../../modules/src/LiveDevelopment/MultiBrowserImpl/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/MultiBrowserImpl/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_LiveDevelopment_MultiBrowserImpl_launchers"><i class="icon-folder-open"></i>src\LiveDevelopment\MultiBrowserImpl\launchers</a>
              </li>
            </ul>
            <ul id="package_src_LiveDevelopment_MultiBrowserImpl_launchers" class="nav nav-list">
              <li><a href="../../../modules/src/LiveDevelopment/MultiBrowserImpl/launchers/Launcher.html">Launcher</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_LiveDevelopment_MultiBrowserImpl_launchers_node"><i class="icon-folder-open"></i>src\LiveDevelopment\MultiBrowserImpl\launchers\node</a>
              </li>
            </ul>
            <ul id="package_src_LiveDevelopment_MultiBrowserImpl_launchers_node" class="nav nav-list">
              <li><a href="../../../modules/src/LiveDevelopment/MultiBrowserImpl/launchers/node/LauncherDomain.html">LauncherDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_LiveDevelopment_MultiBrowserImpl_protocol"><i class="icon-folder-open"></i>src\LiveDevelopment\MultiBrowserImpl\protocol</a>
              </li>
            </ul>
            <ul id="package_src_LiveDevelopment_MultiBrowserImpl_protocol" class="nav nav-list">
              <li><a href="../../../modules/src/LiveDevelopment/MultiBrowserImpl/protocol/LiveDevProtocol.html">LiveDevProtocol</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_LiveDevelopment_MultiBrowserImpl_protocol_remote"><i class="icon-folder-open"></i>src\LiveDevelopment\MultiBrowserImpl\protocol\remote</a>
              </li>
            </ul>
            <ul id="package_src_LiveDevelopment_MultiBrowserImpl_protocol_remote" class="nav nav-list">
              <li><a href="../../../modules/src/LiveDevelopment/MultiBrowserImpl/protocol/remote/DocumentObserver.html">DocumentObserver</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/MultiBrowserImpl/protocol/remote/LiveDevProtocolRemote.html">LiveDevProtocolRemote</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_LiveDevelopment_MultiBrowserImpl_transports_node"><i class="icon-folder-open"></i>src\LiveDevelopment\MultiBrowserImpl\transports\node</a>
              </li>
            </ul>
            <ul id="package_src_LiveDevelopment_MultiBrowserImpl_transports_node" class="nav nav-list">
              <li><a href="../../../modules/src/LiveDevelopment/MultiBrowserImpl/transports/node/NodeSocketTransportDomain.html">NodeSocketTransportDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_LiveDevelopment_MultiBrowserImpl_transports"><i class="icon-folder-open"></i>src\LiveDevelopment\MultiBrowserImpl\transports</a>
              </li>
            </ul>
            <ul id="package_src_LiveDevelopment_MultiBrowserImpl_transports" class="nav nav-list">
              <li><a href="../../../modules/src/LiveDevelopment/MultiBrowserImpl/transports/NodeSocketTransport.html">NodeSocketTransport</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_LiveDevelopment_MultiBrowserImpl_transports_remote"><i class="icon-folder-open"></i>src\LiveDevelopment\MultiBrowserImpl\transports\remote</a>
              </li>
            </ul>
            <ul id="package_src_LiveDevelopment_MultiBrowserImpl_transports_remote" class="nav nav-list">
              <li><a href="../../../modules/src/LiveDevelopment/MultiBrowserImpl/transports/remote/NodeSocketTransportRemote.html">NodeSocketTransportRemote</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_LiveDevelopment_Servers"><i class="icon-folder-open"></i>src\LiveDevelopment\Servers</a>
              </li>
            </ul>
            <ul id="package_src_LiveDevelopment_Servers" class="nav nav-list">
              <li><a href="../../../modules/src/LiveDevelopment/Servers/BaseServer.html">BaseServer</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/Servers/FileServer.html">FileServer</a></li>
              <li><a href="../../../modules/src/LiveDevelopment/Servers/UserServer.html">UserServer</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_LiveDevelopment_transports_node"><i class="icon-folder-open"></i>src\LiveDevelopment\transports\node</a>
              </li>
            </ul>
            <ul id="package_src_LiveDevelopment_transports_node" class="nav nav-list">
              <li><a href="../../../modules/src/LiveDevelopment/transports/node/WebSocketTransportDomain.html">WebSocketTransportDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_LiveDevelopment_transports"><i class="icon-folder-open"></i>src\LiveDevelopment\transports</a>
              </li>
            </ul>
            <ul id="package_src_LiveDevelopment_transports" class="nav nav-list">
              <li><a href="../../../modules/src/LiveDevelopment/transports/WebSocketTransport.html">WebSocketTransport</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_preferences"><i class="icon-folder-open"></i>src\preferences</a>
              </li>
            </ul>
            <ul id="package_src_preferences" class="nav nav-list">
              <li><a href="../../../modules/src/preferences/PreferencesBase.html">PreferencesBase</a></li>
              <li><a href="../../../modules/src/preferences/PreferencesDialogs.html">PreferencesDialogs</a></li>
              <li><a href="../../../modules/src/preferences/PreferencesImpl.html">PreferencesImpl</a></li>
              <li><a href="../../../modules/src/preferences/PreferencesManager.html">PreferencesManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_project"><i class="icon-folder-open"></i>src\project</a>
              </li>
            </ul>
            <ul id="package_src_project" class="nav nav-list">
              <li><a href="../../../modules/src/project/FileSyncManager.html">FileSyncManager</a></li>
              <li><a href="../../../modules/src/project/FileTreeView.html">FileTreeView</a></li>
              <li><a href="../../../modules/src/project/FileTreeViewModel.html">FileTreeViewModel</a></li>
              <li><a href="../../../modules/src/project/FileViewController.html">FileViewController</a></li>
              <li><a href="../../../modules/src/project/ProjectManager.html">ProjectManager</a></li>
              <li><a href="../../../modules/src/project/ProjectModel.html">ProjectModel</a></li>
              <li><a href="../../../modules/src/project/SidebarView.html">SidebarView</a></li>
              <li><a href="../../../modules/src/project/WorkingSetSort.html">WorkingSetSort</a></li>
              <li><a href="../../../modules/src/project/WorkingSetView.html">WorkingSetView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_search"><i class="icon-folder-open"></i>src\search</a>
              </li>
            </ul>
            <ul id="package_src_search" class="nav nav-list">
              <li><a href="../../../modules/src/search/FileFilters.html">FileFilters</a></li>
              <li><a href="../../../modules/src/search/FindBar.html">FindBar</a></li>
              <li><a href="../../../modules/src/search/FindInFiles.html">FindInFiles</a></li>
              <li><a href="../../../modules/src/search/FindInFilesUI.html">FindInFilesUI</a></li>
              <li><a href="../../../modules/src/search/FindReplace.html">FindReplace</a></li>
              <li><a href="../../../modules/src/search/FindUtils.html">FindUtils</a></li>
              <li><a href="../../../modules/src/search/QuickOpen.html">QuickOpen</a></li>
              <li><a href="../../../modules/src/search/QuickOpenHelper.html">QuickOpenHelper</a></li>
              <li><a href="../../../modules/src/search/QuickSearchField.html">QuickSearchField</a></li>
              <li><a href="../../../modules/src/search/ScrollTrackMarkers.html">ScrollTrackMarkers</a></li>
              <li><a href="../../../modules/src/search/SearchModel.html">SearchModel</a></li>
              <li><a href="../../../modules/src/search/SearchResultsView.html">SearchResultsView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_search_node"><i class="icon-folder-open"></i>src\search\node</a>
              </li>
            </ul>
            <ul id="package_src_search_node" class="nav nav-list">
              <li><a href="../../../modules/src/search/node/FindInFilesDomain.html">FindInFilesDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_utils"><i class="icon-folder-open"></i>src\utils</a>
              </li>
            </ul>
            <ul id="package_src_utils" class="nav nav-list">
              <li><a href="../../../modules/src/utils/AnimationUtils.html">AnimationUtils</a></li>
              <li><a href="../../../modules/src/utils/AppInit.html">AppInit</a></li>
              <li><a href="../../../modules/src/utils/Async.html">Async</a></li>
              <li><a href="../../../modules/src/utils/BuildInfoUtils.html">BuildInfoUtils</a></li>
              <li><a href="../../../modules/src/utils/ColorUtils.html">ColorUtils</a></li>
              <li><a href="../../../modules/src/utils/Compatibility.html">Compatibility</a></li>
              <li><a href="../../../modules/src/utils/DeprecationWarning.html">DeprecationWarning</a></li>
              <li><a href="../../../modules/src/utils/DragAndDrop.html">DragAndDrop</a></li>
              <li><a href="../../../modules/src/utils/DropdownEventHandler.html">DropdownEventHandler</a></li>
              <li><a href="../../../modules/src/utils/EventDispatcher.html">EventDispatcher</a></li>
              <li><a href="../../../modules/src/utils/ExtensionLoader.html">ExtensionLoader</a></li>
              <li><a href="../../../modules/src/utils/ExtensionUtils.html">ExtensionUtils</a></li>
              <li><a href="../../../modules/src/utils/Global.html">Global</a></li>
              <li><a href="../../../modules/src/utils/HealthLogger.html">HealthLogger</a></li>
              <li><a href="../../../modules/src/utils/KeyEvent.html">KeyEvent</a></li>
              <li><a href="../../../modules/src/utils/LocalizationUtils.html">LocalizationUtils</a></li>
              <li><a href="../../../modules/src/utils/NativeApp.html">NativeApp</a></li>
              <li><a href="../../../modules/src/utils/NodeConnection.html">NodeConnection</a></li>
              <li><a href="../../../modules/src/utils/NodeDomain.html">NodeDomain</a></li>
              <li><a href="../../../modules/src/utils/PerfUtils.html">PerfUtils</a></li>
              <li><a href="../../../modules/src/utils/Resizer.html">Resizer</a></li>
              <li><a href="../../../modules/src/utils/ShellAPI.html">ShellAPI</a></li>
              <li><a href="../../../modules/src/utils/StringMatch.html">StringMatch</a></li>
              <li><a href="../../../modules/src/utils/StringUtils.html">StringUtils</a></li>
              <li><a href="../../../modules/src/utils/TokenUtils.html">TokenUtils</a></li>
              <li><a href="../../../modules/src/utils/UpdateNotification.html">UpdateNotification</a></li>
              <li><a href="../../../modules/src/utils/UrlParams.html">UrlParams</a></li>
              <li><a href="../../../modules/src/utils/ValidationUtils.html">ValidationUtils</a></li>
              <li><a href="../../../modules/src/utils/ViewUtils.html">ViewUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_view"><i class="icon-folder-open"></i>src\view</a>
              </li>
            </ul>
            <ul id="package_src_view" class="nav nav-list">
              <li><a href="../../../modules/src/view/MainViewFactory.html">MainViewFactory</a></li>
              <li><a href="../../../modules/src/view/MainViewManager.html">MainViewManager</a></li>
              <li><a href="../../../modules/src/view/Pane.html">Pane</a></li>
              <li><a href="../../../modules/src/view/ThemeManager.html">ThemeManager</a></li>
              <li><a href="../../../modules/src/view/ThemeSettings.html">ThemeSettings</a></li>
              <li><a href="../../../modules/src/view/ThemeView.html">ThemeView</a></li>
              <li><a href="../../../modules/src/view/ViewCommandHandlers.html">ViewCommandHandlers</a></li>
              <li><a href="../../../modules/src/view/ViewStateManager.html">ViewStateManager</a></li>
              <li><a href="../../../modules/src/view/WorkspaceManager.html">WorkspaceManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_src_widgets"><i class="icon-folder-open"></i>src\widgets</a>
              </li>
            </ul>
            <ul id="package_src_widgets" class="nav nav-list">
              <li><a href="../../../modules/src/widgets/bootstrap-alerts.html">bootstrap-alerts</a></li>
              <li><a href="../../../modules/src/widgets/bootstrap-button.html">bootstrap-button</a></li>
              <li><a href="../../../modules/src/widgets/bootstrap-dropdown.html">bootstrap-dropdown</a></li>
              <li><a href="../../../modules/src/widgets/bootstrap-modal.html">bootstrap-modal</a></li>
              <li><a href="../../../modules/src/widgets/bootstrap-popover.html">bootstrap-popover</a></li>
              <li><a href="../../../modules/src/widgets/bootstrap-scrollspy.html">bootstrap-scrollspy</a></li>
              <li><a href="../../../modules/src/widgets/bootstrap-tab.html">bootstrap-tab</a></li>
              <li><a href="../../../modules/src/widgets/bootstrap-tooltip.html">bootstrap-tooltip</a></li>
              <li><a href="../../../modules/src/widgets/bootstrap-twipsy-mod.html">bootstrap-twipsy-mod</a></li>
              <li><a href="../../../modules/src/widgets/DefaultDialogs.html">DefaultDialogs</a></li>
              <li><a href="../../../modules/src/widgets/Dialogs.html">Dialogs</a></li>
              <li><a href="../../../modules/src/widgets/DropdownButton.html">DropdownButton</a></li>
              <li><a href="../../../modules/src/widgets/InlineMenu.html">InlineMenu</a></li>
              <li><a href="../../../modules/src/widgets/ModalBar.html">ModalBar</a></li>
              <li><a href="../../../modules/src/widgets/PopUpManager.html">PopUpManager</a></li>
              <li><a href="../../../modules/src/widgets/StatusBar.html">StatusBar</a></li>
            </ul>
          </div>
        </div>
        <div class="module span9">
<h1>LiveDevelopment</h1>


<section class="description">
    <h3>Description</h3>
    
    <div><p>LiveDevelopment manages the Inspector, all Agents, and the active LiveDocument</p>
<p><strong>STARTING</strong></p>
<p>To start a session call <code>open</code>. This will read the currentDocument from brackets,
launch the LiveBrowser (currently Chrome) with the remote debugger port open,
establish the Inspector connection to the remote debugger, and finally load all
agents.</p>
<p><strong>STOPPING</strong></p>
<p>To stop a session call <code>close</code>. This will close the active browser window,
disconnect the Inspector, unload all agents, and clean up.</p>
<p><strong>STATUS</strong></p>
<p>Status updates are dispatched as <code>statusChange</code> jQuery events. The status
is passed as the first parameter and the reason for the change as the second
parameter. Currently only the &quot;Inactive&quot; status supports the reason parameter.
The status codes are:</p>
<pre><code>-1: Error
 0: Inactive
 1: Connecting to the remote debugger
 2: Loading agents
 3: Active
 4: Out of sync
 5: Sync error
</code></pre><p>The reason codes are:</p>
<ul>
<li>null (Unknown reason)</li>
<li>&quot;explicit_close&quot; (LiveDevelopment.close() was called)</li>
<li>&quot;navigated_away&quot; (The browser changed to a location outside of the project)</li>
<li>&quot;detached_target_closed&quot; (The tab or window was closed)</li>
<li>&quot;detached_replaced_with_devtools&quot; (The developer tools were opened in the browser)</li>
</ul>
</div>
    
</section>

<section id="dependencies">
    <h3>Dependencies</h3>

    <ul class="nav nav-list">
        <li><a href="..&#x2F;..&#x2F;../modules/utils/Async.html">Async</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/Agents/ConsoleAgent.html">ConsoleAgent</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/Agents/CSSAgent.html">CSSAgent</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/Documents/CSSDocument.html">CSSDocument</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/Documents/CSSPreprocessorDocument.html">CSSPreprocessorDocument</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/language/CSSUtils.html">CSSUtils</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/widgets/DefaultDialogs.html">DefaultDialogs</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/widgets/Dialogs.html">Dialogs</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/document/DocumentManager.html">DocumentManager</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/Agents/DOMAgent.html">DOMAgent</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/Agents/EditAgent.html">EditAgent</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/editor/EditorManager.html">EditorManager</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/utils/EventDispatcher.html">EventDispatcher</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/Servers/FileServer.html">FileServer</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/filesystem/FileSystemError.html">FileSystemError</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/file/FileUtils.html">FileUtils</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/utils/Global.html">Global</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/Agents/GotoAgent.html">GotoAgent</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/Agents/HighlightAgent.html">HighlightAgent</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/Documents/HTMLDocument.html">HTMLDocument</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/Inspector/Inspector.html">Inspector</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/Documents/JSDocument.html">JSDocument</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/LiveDevelopmentUtils.html">LiveDevelopmentUtils</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/LiveDevServerManager.html">LiveDevServerManager</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/thirdparty/lodash.html">lodash</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/view/MainViewManager.html">MainViewManager</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/utils/NativeApp.html">NativeApp</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/Agents/NetworkAgent.html">NetworkAgent</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/preferences/PreferencesDialogs.html">PreferencesDialogs</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/preferences/PreferencesManager.html">PreferencesManager</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/project/ProjectManager.html">ProjectManager</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/Agents/RemoteAgent.html">RemoteAgent</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/Agents/ScriptAgent.html">ScriptAgent</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/strings.html">strings</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/utils/StringUtils.html">StringUtils</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/Servers/UserServer.html">UserServer</a></li>
        <li><a href="..&#x2F;..&#x2F;../modules/LiveDevelopment/transports/WebSocketTransport.html">WebSocketTransport</a></li>
    </ul>

</section>
<section id="variables">
    
    <h3>Variables 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>    </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _closeDeferred 
        <a class="anchor" href="#-_closeDeferred" id="-_closeDeferred"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Promise returned for each call to close()</p>
</div>
    
<dl>
    <dt>Type</dt>
    <dd>jQuery.Deferred</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _closeDeferred;

    &#x2F;&#x2F; Disallow re-entrancy of loadAgents()
    var _loadAgentsPromise;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _liveDocument 
        <a class="anchor" href="#-_liveDocument" id="-_liveDocument"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Live Preview current Document info</p>
</div>
    
<dl>
    <dt>Type</dt>
    <dd>HTMLDocument</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _liveDocument;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _loadedAgentNames 
        <a class="anchor" href="#-_loadedAgentNames" id="-_loadedAgentNames"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Store the names (matching property names in the &#39;agent&#39; object) of agents that we&#39;ve loaded</p>
</div>
    
<dl>
    <dt>Type</dt>
    <dd>string</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _loadedAgentNames = [];</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _openDeferred 
        <a class="anchor" href="#-_openDeferred" id="-_openDeferred"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Promise returned for each call to open()</p>
</div>
    
<dl>
    <dt>Type</dt>
    <dd>jQuery.Deferred</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _openDeferred;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _regServers 
        <a class="anchor" href="#-_regServers" id="-_regServers"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _regServers = [];
    
    PreferencesManager.definePreference(&quot;livedev.wsPort&quot;, &quot;number&quot;, 8125, {
        description: Strings.DESCRIPTION_LIVEDEV_WEBSOCKET_PORT
    });
    
    PreferencesManager.definePreference(&quot;livedev.enableReverseInspect&quot;, &quot;boolean&quot;, true, {
        description: Strings.DESCRIPTION_LIVEDEV_ENABLE_REVERSE_INSPECT
    });

    function _isPromisePending(promise) {
        return promise &amp;&amp; promise.state() === &quot;pending&quot;;
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _relatedDocuments 
        <a class="anchor" href="#-_relatedDocuments" id="-_relatedDocuments"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Related Live Documents</p>
</div>
    
<dl>
    <dt>Type</dt>
    <dd>Object.&lt;string: (HTMLDocument, CSSDocument)&gt;</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _relatedDocuments = {};</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _server 
        <a class="anchor" href="#-_server" id="-_server"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Current live preview server</p>
</div>
    
<dl>
    <dt>Type</dt>
    <dd>BaseServer</dd>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _server;</code></pre></div>
</section>

<section id="functions">

    <h3>Functions 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>    </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _classForDocument 
        <a class="anchor" href="#-_classForDocument" id="-_classForDocument"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Determine which document class should be used for a given document</p>
</div>
    
<dl>
    <dt>
        document
        <span class="label label-info">Document</span>
    </dt>
    <dd></dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _classForDocument(doc) {
        switch (doc.getLanguage().getId()) {
        case &quot;less&quot;:
        case &quot;scss&quot;:
            return CSSPreprocessorDocument;
        case &quot;css&quot;:
            return CSSDocument;
        case &quot;javascript&quot;:
            return exports.config.experimental ? JSDocument : null;
        }

        if (LiveDevelopmentUtils.isHtmlFileExt(doc.file.fullPath)) {
            return HTMLDocument;
        }

        return null;
    }

    function getLiveDocForPath(path) {
        if (!_server) {
            return undefined;
        }

        return _server.get(path);
    }

    function getLiveDocForEditor(editor) {
        if (!editor) {
            return null;
        }
        return getLiveDocForPath(editor.document.file.fullPath);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _close 
        <a class="anchor" href="#-_close" id="-_close"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        doCloseWindow
        <span class="label label-info">boolean</span>
    </dt>
    <dd>Use true to close the window/tab in the browser</dd>
    <dt>
        reason
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">string</span>
    </dt>
    <dd>Optional string key suffix to display to user (see LIVE_DEV_* keys)</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">jQuery.Promise</span></dt>
    <dd>Always return a resolved promise once the connection is closed</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _close(doCloseWindow, reason) {
        WebSocketTransport.closeWebSocketServer();
        if (_closeDeferred) {
            return _closeDeferred;
        } else {
            _closeDeferred = new $.Deferred();
            _closeDeferred.always(function () {
                _closeDeferred = null;
            });
        }

        var promise = _closeDeferred.promise();</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _closeDocument 
        <a class="anchor" href="#-_closeDocument" id="-_closeDocument"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _closeDocument(liveDocument) {
        _doClearErrors(liveDocument);
        liveDocument.close();

        if (liveDocument.editor) {
            liveDocument.editor.off(&quot;.livedev&quot;);
        }

        liveDocument.off(&quot;.livedev&quot;);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _closeDocuments 
        <a class="anchor" href="#-_closeDocuments" id="-_closeDocuments"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _closeDocuments() {
        if (_liveDocument) {
            _closeDocument(_liveDocument);
            _liveDocument = undefined;
        }

        Object.keys(_relatedDocuments).forEach(function (url) {
            _closeDocument(_relatedDocuments[url]);
            delete _relatedDocuments[url];
        });

        &#x2F;&#x2F; Clear all documents from request filtering
        if (_server) {
            _server.clear();
        }
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _closeRelatedDocument 
        <a class="anchor" href="#-_closeRelatedDocument" id="-_closeRelatedDocument"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Removes the given CSS/JSDocument from _relatedDocuments. Signals that the
given file is no longer associated with the HTML document that is live (e.g.
if the related file has been deleted on disk).</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _closeRelatedDocument(liveDoc) {
        if (_relatedDocuments[liveDoc.doc.url]) {
            delete _relatedDocuments[liveDoc.doc.url];
        }

        if (_server) {
            _server.remove(liveDoc);
        }

        _closeDocument(liveDoc);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _createDocument 
        <a class="anchor" href="#-_createDocument" id="-_createDocument"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        doc
        <span class="label label-info">Document</span>
    </dt>
    <dd>Current document</dd>
    <dt>
        editor
        <span class="label label-info">Editor</span>
    </dt>
    <dd>Current editor</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">?(HTMLDocument,CSSDocument)</span></dt>
    <dd></dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _createDocument(doc, editor) {
        var DocClass        = _classForDocument(doc),
            liveDocument    = new DocClass(doc, editor);

        if (!DocClass) {
            return null;
        }

        liveDocument.on(&quot;statusChanged.livedev&quot;, function () {
            _handleLiveDocumentStatusChanged(liveDocument);
        });

        return liveDocument;
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _createLiveDocumentForFrame 
        <a class="anchor" href="#-_createLiveDocumentForFrame" id="-_createLiveDocumentForFrame"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        doc
        <span class="label label-info">Document</span>
    </dt>
    <dd>Current document</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _createLiveDocumentForFrame(doc) {
        &#x2F;&#x2F; create live document
        doc._ensureMasterEditor();
        _liveDocument = _createDocument(doc, doc._masterEditor);
        _server.add(_liveDocument);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _doClearErrors 
        <a class="anchor" href="#-_doClearErrors" id="-_doClearErrors"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        liveDocument
        <span class="label label-info">HTMLDocument,CSSDocument</span>
    </dt>
    <dd></dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _doClearErrors(liveDocument) {
        var lineHandle;

        if (!liveDocument.editor ||
                !liveDocument._errorLineHandles ||
                !liveDocument._errorLineHandles.length) {
            return;
        }

        liveDocument.editor._codeMirror.operation(function () {
            while (true) {
                &#x2F;&#x2F; Iterate over all lines that were previously marked with an error
                lineHandle = liveDocument._errorLineHandles.pop();

                if (!lineHandle) {
                    break;
                }

                liveDocument.editor._codeMirror.removeLineClass(lineHandle, &quot;wrap&quot;, SYNC_ERROR_CLASS);
            }
        });
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _doInspectorDisconnect 
        <a class="anchor" href="#-_doInspectorDisconnect" id="-_doInspectorDisconnect"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        doCloseWindow
        <span class="label label-info">boolean</span>
    </dt>
    <dd>Use true to close the window/tab in the browser</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">jQuery.Promise</span></dt>
    <dd>A promise that is always resolved</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _doInspectorDisconnect(doCloseWindow) {
        var closePromise,
            deferred    = new $.Deferred(),
            connected   = Inspector.connected();

        EditorManager.off(&quot;activeEditorChange&quot;, onActiveEditorChange);

        Inspector.Page.off(&quot;.livedev&quot;);
        Inspector.off(&quot;.livedev&quot;);

        &#x2F;&#x2F; Wait if agents are loading
        if (_loadAgentsPromise) {
            _loadAgentsPromise.always(unloadAgents);
        } else {
            unloadAgents();
        }

        &#x2F;&#x2F; Close live documents
        _closeDocuments();

        if (_server) {
            &#x2F;&#x2F; Stop listening for requests when disconnected
            _server.stop();

            &#x2F;&#x2F; Dispose server
            _server = null;
        }

        if (doCloseWindow &amp;&amp; connected) {
            closePromise = Inspector.Runtime.evaluate(&quot;window.open(&#39;&#39;, &#39;_self&#39;).close();&quot;);

            &#x2F;&#x2F; Add a timeout to continue cleanup if Inspector does not respond
            closePromise = Async.withTimeout(closePromise, 5000);
        } else {
            closePromise = new $.Deferred().resolve();
        }

        &#x2F;&#x2F; Disconnect WebSocket if connected
        closePromise.always(function () {
            if (Inspector.connected()) {
                Inspector.disconnect().always(deferred.resolve);
            } else {
                deferred.resolve();
            }
        });

        return deferred.promise();
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _docIsOutOfSync 
        <a class="anchor" href="#-_docIsOutOfSync" id="-_docIsOutOfSync"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Documents are considered to be out-of-sync if they are dirty and
 do not have &quot;update while editing&quot; support</p>
</div>
    
<dl>
    <dt>
        doc
        <span class="label label-info">Document</span>
    </dt>
    <dd></dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _docIsOutOfSync(doc) {
        var liveDoc = _server &amp;&amp; _server.get(doc.file.fullPath),
            isLiveEditingEnabled = liveDoc &amp;&amp; liveDoc.isLiveEditingEnabled();

        return doc.isDirty &amp;&amp; !isLiveEditingEnabled;
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _enableAgents 
        <a class="anchor" href="#-_enableAgents" id="-_enableAgents"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _enableAgents() {
        &#x2F;&#x2F; enable agents in parallel
        return Async.doInParallel(
            getEnabledAgents(),
            function (name) {
                return _invokeAgentMethod(name, &quot;enable&quot;);
            },
            true
        );
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _getCurrentDocument 
        <a class="anchor" href="#-_getCurrentDocument" id="-_getCurrentDocument"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Get the current document from the document manager
_adds extension, url and root to the document</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _getCurrentDocument() {
        return DocumentManager.getCurrentDocument();
    }</code></pre></div><div class="member private public">

<span class="pull-right scope">
    Private
    Public API
</span>
    <h4>
        _getInitialDocFromCurrent 
        <a class="anchor" href="#-_getInitialDocFromCurrent" id="-_getInitialDocFromCurrent"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">jQuery.Promise</span></dt>
    <dd>A promise that is resolved with a full path to a file if one could been determined, or null if there was no suitable index file.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _getInitialDocFromCurrent() {
        var doc = _getCurrentDocument(),
            refPath,
            i;

        &#x2F;&#x2F; Is the currently opened document already a file we can use for Live Development?
        if (doc) {
            refPath = doc.file.fullPath;
            if (LiveDevelopmentUtils.isStaticHtmlFileExt(refPath) || LiveDevelopmentUtils.isServerHtmlFileExt(refPath)) {
                return new $.Deferred().resolve(doc);
            }
        }

        var result = new $.Deferred();

        var baseUrl = ProjectManager.getBaseUrl(),
            hasOwnServerForLiveDevelopment = (baseUrl &amp;&amp; baseUrl.length);

        ProjectManager.getAllFiles().done(function (allFiles) {
            var projectRoot = ProjectManager.getProjectRoot().fullPath,
                containingFolder,
                indexFileFound = false,
                stillInProjectTree = true;

            if (refPath) {
                containingFolder = FileUtils.getDirectoryPath(refPath);
            } else {
                containingFolder = projectRoot;
            }

            var filteredFiltered = allFiles.filter(function (item) {
                var parent = FileUtils.getParentPath(item.fullPath);

                return (containingFolder.indexOf(parent) === 0);
            });

            var filterIndexFile = function (fileInfo) {
                if (fileInfo.fullPath.indexOf(containingFolder) === 0) {
                    if (FileUtils.getFilenameWithoutExtension(fileInfo.name) === &quot;index&quot;) {
                        if (hasOwnServerForLiveDevelopment) {
                            if ((LiveDevelopmentUtils.isServerHtmlFileExt(fileInfo.name)) ||
                                    (LiveDevelopmentUtils.isStaticHtmlFileExt(fileInfo.name))) {
                                return true;
                            }
                        } else if (LiveDevelopmentUtils.isStaticHtmlFileExt(fileInfo.name)) {
                            return true;
                        }
                    } else {
                        return false;
                    }
                }
            };

            while (!indexFileFound &amp;&amp; stillInProjectTree) {
                i = _.findIndex(filteredFiltered, filterIndexFile);

                &#x2F;&#x2F; We found no good match
                if (i === -1) {
                    &#x2F;&#x2F; traverse the directory tree up one level
                    containingFolder = FileUtils.getParentPath(containingFolder);
                    &#x2F;&#x2F; Are we still inside the project?
                    if (containingFolder.indexOf(projectRoot) === -1) {
                        stillInProjectTree = false;
                    }
                } else {
                    indexFileFound = true;
                }
            }

            if (i !== -1) {
                DocumentManager.getDocumentForPath(filteredFiltered[i].fullPath).then(result.resolve, result.resolve);
                return;
            }

            result.resolve(null);
        });

        return result.promise();
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _handleLiveDocumentStatusChanged 
        <a class="anchor" href="#-_handleLiveDocumentStatusChanged" id="-_handleLiveDocumentStatusChanged"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        event
        <span class="label label-info">$.Event</span>
    </dt>
    <dd></dd>
    <dt>
        liveDocument
        <span class="label label-info">HTMLDocument,CSSDocument</span>
    </dt>
    <dd></dd>
    <dt>
        errors
        <span class="label label-info">Array.&lt;{token: SimpleNode,startPos: Pos,endPos: Pos}&gt;</span>
    </dt>
    <dd></dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _handleLiveDocumentStatusChanged(liveDocument) {
        var startLine,
            endLine,
            i,
            lineHandle,
            status = (liveDocument.errors.length) ? STATUS_SYNC_ERROR : STATUS_ACTIVE;

        _setStatus(status);

        if (!liveDocument.editor) {
            return;
        }

        &#x2F;&#x2F; Buffer addLineClass DOM changes in a CodeMirror operation
        liveDocument.editor._codeMirror.operation(function () {
            &#x2F;&#x2F; Remove existing errors before marking new ones
            _doClearErrors(liveDocument);

            liveDocument._errorLineHandles = liveDocument._errorLineHandles || [];

            liveDocument.errors.forEach(function (error) {
                startLine = error.startPos.line;
                endLine = error.endPos.line;

                for (i = startLine; i &lt; endLine + 1; i++) {
                    lineHandle = liveDocument.editor._codeMirror.addLineClass(i, &quot;wrap&quot;, SYNC_ERROR_CLASS);
                    liveDocument._errorLineHandles.push(lineHandle);
                }
            });
        });
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _invokeAgentMethod 
        <a class="anchor" href="#-_invokeAgentMethod" id="-_invokeAgentMethod"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        name
        <span class="label label-info">string</span>
    </dt>
    <dd>Agent name</dd>
    <dt>
        methodName
        <span class="label label-info">stirng</span>
    </dt>
    <dd>Method name to call on the agent</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _invokeAgentMethod(name, methodName) {
        var oneAgentPromise;

        if (agents[name] &amp;&amp; agents[name][methodName]) {
            oneAgentPromise = agents[name][methodName].call();
        }

        if (!oneAgentPromise) {
            oneAgentPromise = new $.Deferred().resolve().promise();
        } else {
            oneAgentPromise.fail(function () {
                console.error(methodName + &quot; failed on agent&quot;, name);
            });
        }

        return oneAgentPromise;
    }

    function getEnabledAgents() {
        var enabledAgents;

        &#x2F;&#x2F; Select agents to use
        if (exports.config.experimental) {
            &#x2F;&#x2F; load all agents
            enabledAgents = agents;
        } else {
            &#x2F;&#x2F; load only enabled agents
            enabledAgents = _enabledAgentNames;
        }

        return Object.keys(enabledAgents);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _makeTroubleshootingMessage 
        <a class="anchor" href="#-_makeTroubleshootingMessage" id="-_makeTroubleshootingMessage"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
    <dt>
        msg
        <span class="label label-info">string</span>
    </dt>
    <dd>Original message</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">string</span></dt>
    <dd>Original message plus link to troubleshooting page.</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _makeTroubleshootingMessage(msg) {
        return msg + &quot; &quot; + StringUtils.format(Strings.LIVE_DEVELOPMENT_TROUBLESHOOTING, brackets.config.troubleshoot_url);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _onConnect 
        <a class="anchor" href="#-_onConnect" id="-_onConnect"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Triggered by Inspector.connect</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _onConnect(event) {
        &#x2F;&#x2F; When the browser navigates away from the primary live document
        Inspector.Page.on(&quot;frameNavigated.livedev&quot;, _onFrameNavigated);

        &#x2F;&#x2F; When the Inspector WebSocket disconnects unexpectedely
        Inspector.on(&quot;disconnect.livedev&quot;, _onDisconnect);

        _waitForInterstitialPageLoad()
            .fail(function () {
                close();

                Dialogs.showModalDialog(
                    DefaultDialogs.DIALOG_ID_ERROR,
                    Strings.LIVE_DEVELOPMENT_ERROR_TITLE,
                    _makeTroubleshootingMessage(Strings.LIVE_DEV_LOADING_ERROR_MESSAGE)
                );
            })
            .done(_onInterstitialPageLoad);
    }

    function _showWrongDocError() {
        Dialogs.showModalDialog(
            DefaultDialogs.DIALOG_ID_ERROR,
            Strings.LIVE_DEVELOPMENT_ERROR_TITLE,
            _makeTroubleshootingMessage(Strings.LIVE_DEV_NEED_HTML_MESSAGE)
        );
        _openDeferred.reject();
    }

    function _showLiveDevServerNotReadyError() {
        Dialogs.showModalDialog(
            DefaultDialogs.DIALOG_ID_ERROR,
            Strings.LIVE_DEVELOPMENT_ERROR_TITLE,
            _makeTroubleshootingMessage(Strings.LIVE_DEV_SERVER_NOT_READY_MESSAGE)
        );
        _openDeferred.reject();
    }

    function _openInterstitialPage() {
        var browserStarted  = false,
            retryCount      = 0;

        &#x2F;&#x2F; Open the live browser if the connection fails, retry 3 times
        Inspector.connectToURL(launcherUrl).fail(function onConnectFail(err) {
            if (err === &quot;CANCEL&quot;) {
                _openDeferred.reject(err);
                return;
            }

            if (retryCount &gt; 3) {
                _setStatus(STATUS_ERROR);

                var dialogPromise = Dialogs.showModalDialog(
                    DefaultDialogs.DIALOG_ID_LIVE_DEVELOPMENT,
                    Strings.LIVE_DEVELOPMENT_RELAUNCH_TITLE,
                    _makeTroubleshootingMessage(Strings.LIVE_DEVELOPMENT_ERROR_MESSAGE),
                    [
                        {
                            className: Dialogs.DIALOG_BTN_CLASS_LEFT,
                            id:        Dialogs.DIALOG_BTN_CANCEL,
                            text:      Strings.CANCEL
                        },
                        {
                            className: Dialogs.DIALOG_BTN_CLASS_PRIMARY,
                            id:        Dialogs.DIALOG_BTN_OK,
                            text:      Strings.RELAUNCH_CHROME
                        }
                    ]
                );

                dialogPromise.done(function (id) {
                    if (id === Dialogs.DIALOG_BTN_OK) {
                        &#x2F;&#x2F; User has chosen to reload Chrome, quit the running instance
                        _setStatus(STATUS_INACTIVE);
                        _close()
                            .done(function () {
                                browserStarted = false;
                                &#x2F;&#x2F; Continue to use _openDeferred
                                open(true);
                            })
                            .fail(function (err) {
                                &#x2F;&#x2F; Report error?
                                _setStatus(STATUS_ERROR);
                                browserStarted = false;
                                _openDeferred.reject(&quot;CLOSE_LIVE_BROWSER&quot;);
                            });
                    } else {
                        _close()
                            .done(function () {
                                browserStarted = false;
                                _openDeferred.reject(&quot;CANCEL&quot;);
                            })
                            .fail(function (err) {
                                &#x2F;&#x2F; Report error?
                                _setStatus(STATUS_ERROR);
                                browserStarted = false;
                                _openDeferred.reject(&quot;CLOSE_LIVE_BROWSER&quot;);
                            });
                    }
                });

                return;
            }
            retryCount++;

            if (!browserStarted &amp;&amp; exports.status !== STATUS_ERROR) {
                NativeApp.openLiveBrowser(
                    launcherUrl,
                    true        &#x2F;&#x2F; enable remote debugging
                )
                    .done(function () {
                        browserStarted = true;
                    })
                    .fail(function (err) {
                        var message;

                        _setStatus(STATUS_ERROR);
                        if (err === FileSystemError.NOT_FOUND) {
                            message = Strings.ERROR_CANT_FIND_CHROME;
                        } else {
                            message = StringUtils.format(Strings.ERROR_LAUNCHING_BROWSER, err);
                        }

                        Dialogs.showModalDialog(
                            DefaultDialogs.DIALOG_ID_ERROR,
                            Strings.ERROR_LAUNCHING_BROWSER_TITLE,
                            _makeTroubleshootingMessage(message)
                        );

                        _openDeferred.reject(&quot;OPEN_LIVE_BROWSER&quot;);
                    });
            }

            if (exports.status !== STATUS_ERROR) {
                window.setTimeout(function retryConnect() {
                    Inspector.connectToURL(launcherUrl).fail(onConnectFail);
                }, 3000);
            }
        });
    }

    &#x2F;&#x2F; helper function that actually does the launch once we are sure we have
    &#x2F;&#x2F; a doc and the server for that doc is up and running.
    function _doLaunchAfterServerReady(initialDoc) {
        &#x2F;&#x2F; update status
        _setStatus(STATUS_CONNECTING);
        _createLiveDocumentForFrame(initialDoc);

        &#x2F;&#x2F; start listening for requests
        _server.start();

        &#x2F;&#x2F; Install a one-time event handler when connected to the launcher page
        Inspector.one(&quot;connect&quot;, _onConnect);

        &#x2F;&#x2F; open browser to the interstitial page to prepare for loading agents
        _openInterstitialPage();

        &#x2F;&#x2F; Once all agents loaded (see _onInterstitialPageLoad()), begin Live Highlighting for preprocessor documents
        _openDeferred.done(function () {
            &#x2F;&#x2F; Setup activeEditorChange event listener so that we can track cursor positions in
            &#x2F;&#x2F; CSS preprocessor files and perform live preview highlighting on all elements with
            &#x2F;&#x2F; the current selector in the preprocessor file.
            EditorManager.on(&quot;activeEditorChange&quot;, onActiveEditorChange);

            &#x2F;&#x2F; Explicitly trigger onActiveEditorChange so that live preview highlighting
            &#x2F;&#x2F; can be set up for the preprocessor files.
            onActiveEditorChange(null, EditorManager.getActiveEditor(), null);
        });
    }

    function _prepareServer(doc) {
        var deferred = new $.Deferred(),
            showBaseUrlPrompt = false;

        _server = LiveDevServerManager.getServer(doc.file.fullPath);

        &#x2F;&#x2F; Optionally prompt for a base URL if no server was found but the
        &#x2F;&#x2F; file is a known server file extension
        showBaseUrlPrompt = !exports.config.experimental &amp;&amp; !_server &amp;&amp;
            LiveDevelopmentUtils.isServerHtmlFileExt(doc.file.fullPath);

        if (showBaseUrlPrompt) {
            &#x2F;&#x2F; Prompt for a base URL
            PreferencesDialogs.showProjectPreferencesDialog(&quot;&quot;, Strings.LIVE_DEV_NEED_BASEURL_MESSAGE)
                .done(function (id) {
                    if (id === Dialogs.DIALOG_BTN_OK &amp;&amp; ProjectManager.getBaseUrl()) {
                        &#x2F;&#x2F; If base url is specifed, then re-invoke _prepareServer() to continue
                        _prepareServer(doc).then(deferred.resolve, deferred.reject);
                    } else {
                        deferred.reject();
                    }
                });
        } else if (_server) {
            &#x2F;&#x2F; Startup the server
            var readyPromise = _server.readyToServe();
            if (!readyPromise) {
                _showLiveDevServerNotReadyError();
                deferred.reject();
            } else {
                readyPromise.then(deferred.resolve, function () {
                    _showLiveDevServerNotReadyError();
                    deferred.reject();
                });
            }
        } else {
            &#x2F;&#x2F; No server found
            deferred.reject();
        }

        return deferred.promise();
    }

    function getCurrentProjectServerConfig() {
        return {
            baseUrl: ProjectManager.getBaseUrl(),
            pathResolver: ProjectManager.makeProjectRelativeIfPossible,
            root: ProjectManager.getProjectRoot().fullPath
        };
    }

    function _createUserServer() {
        return new UserServer(getCurrentProjectServerConfig());
    }

    function _createFileServer() {
        return new FileServer(getCurrentProjectServerConfig());
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _onDirtyFlagChange 
        <a class="anchor" href="#-_onDirtyFlagChange" id="-_onDirtyFlagChange"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Triggered by a change in dirty flag from the DocumentManager</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _onDirtyFlagChange(event, doc) {
        if (doc &amp;&amp; Inspector.connected() &amp;&amp;
                _server &amp;&amp; agents.network &amp;&amp; agents.network.wasURLRequested(_server.pathToUrl(doc.file.fullPath))) {
            &#x2F;&#x2F; Set status to out of sync if dirty. Otherwise, set it to active status.
            _setStatus(_docIsOutOfSync(doc) ? STATUS_OUT_OF_SYNC : STATUS_ACTIVE);
        }
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _onDisconnect 
        <a class="anchor" href="#-_onDisconnect" id="-_onDisconnect"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _onDisconnect(event) {
        _close(false, &quot;closed_unknown_reason&quot;);
    }

    function _onDetached(event, res) {
        var closeReason;

        if (res &amp;&amp; res.reason) {
            &#x2F;&#x2F; Get the explanation from res.reason, e.g. &quot;replaced_with_devtools&quot;, &quot;target_closed&quot;, &quot;canceled_by_user&quot;
            &#x2F;&#x2F; Examples taken from https:&#x2F;&#x2F;chromiumcodereview.appspot.com&#x2F;10947037&#x2F;patch&#x2F;12001&#x2F;13004
            &#x2F;&#x2F; However, the link refers to the Chrome Extension API, it may not apply 100% to the Inspector API
            &#x2F;&#x2F; Prefix with &quot;detached_&quot; to create a quasi-namespace for Chrome&#39;s reasons
            closeReason = &quot;detached_&quot; + res.reason;
        }

        _close(false, closeReason);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _onDocumentSaved 
        <a class="anchor" href="#-_onDocumentSaved" id="-_onDocumentSaved"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Triggered by a documentSaved event from DocumentManager.</p>
</div>
    
<dl>
    <dt>
        event
        <span class="label label-info">$.Event</span>
    </dt>
    <dd></dd>
    <dt>
        doc
        <span class="label label-info">Document</span>
    </dt>
    <dd></dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _onDocumentSaved(event, doc) {
        if (!Inspector.connected() || !_server) {
            return;
        }

        var absolutePath            = doc.file.fullPath,
            liveDocument            = absolutePath &amp;&amp; _server.get(absolutePath),
            liveEditingEnabled      = liveDocument &amp;&amp; liveDocument.isLiveEditingEnabled  &amp;&amp; liveDocument.isLiveEditingEnabled();

        &#x2F;&#x2F; Skip reload if the saved document has live editing enabled
        if (liveEditingEnabled) {
            return;
        }

        var documentUrl     = _server.pathToUrl(absolutePath),
            wasRequested    = agents.network &amp;&amp; agents.network.wasURLRequested(documentUrl);

        if (wasRequested) {
            reload();
        }
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _onError 
        <a class="anchor" href="#-_onError" id="-_onError"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Triggered by Inspector.error</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _onError(event, error, msgData) {
        var message;

        &#x2F;&#x2F; Sometimes error.message is undefined
        if (!error.message) {
            console.warn(&quot;Expected a non-empty string in error.message, got this instead:&quot;, error.message);
            message = JSON.stringify(error);
        } else {
            message = error.message;
        }

        &#x2F;&#x2F; Remove &quot;Uncaught&quot; from the beginning to avoid the inspector popping up
        if (message &amp;&amp; message.substr(0, 8) === &quot;Uncaught&quot;) {
            message = message.substr(9);
        }

        &#x2F;&#x2F; Additional information, like exactly which parameter could not be processed.
        var data = error.data;
        if (Array.isArray(data)) {
            message += &quot;\n&quot; + data.join(&quot;\n&quot;);
        }

        &#x2F;&#x2F; Show the message, but include the error object for further information (e.g. error code)
        console.error(message, error, msgData);
    }

    function _styleSheetAdded(event, url) {
        var path = _server &amp;&amp; _server.urlToPath(url),
            exists = !!_relatedDocuments[url];

        &#x2F;&#x2F; path may be null if loading an external stylesheet.
        &#x2F;&#x2F; Also, the stylesheet may already exist and be reported as added twice
        &#x2F;&#x2F; due to Chrome reporting added&#x2F;removed events after incremental changes
        &#x2F;&#x2F; are pushed to the browser
        if (!path || exists) {
            return;
        }

        var docPromise = DocumentManager.getDocumentForPath(path);

        docPromise.done(function (doc) {
            if ((_classForDocument(doc) === CSSDocument ||
                    _classForDocument(doc) === CSSPreprocessorDocument) &amp;&amp;
                    (!_liveDocument || (doc !== _liveDocument.doc))) {
                &#x2F;&#x2F; The doc may already have an editor (e.g. starting live preview from an css file),
                &#x2F;&#x2F; so pass the editor if any
                var liveDoc = _createDocument(doc, doc._masterEditor);
                if (liveDoc) {
                    _server.add(liveDoc);
                    _relatedDocuments[doc.url] = liveDoc;

                    liveDoc.on(&quot;deleted.livedev&quot;, function (event, liveDoc) {
                        _closeRelatedDocument(liveDoc);
                    });
                }
            }
        });
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _onFileChanged 
        <a class="anchor" href="#-_onFileChanged" id="-_onFileChanged"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _onFileChanged() {
        var doc = _getCurrentDocument();

        if (!doc || !Inspector.connected()) {
            return;
        }

        &#x2F;&#x2F; close the current session and begin a new session if the current
        &#x2F;&#x2F; document changes to an HTML document that was not loaded yet
        var docUrl = _server &amp;&amp; _server.pathToUrl(doc.file.fullPath),
            wasRequested = agents.network &amp;&amp; agents.network.wasURLRequested(docUrl),
            isViewable = exports.config.experimental || (_server &amp;&amp; _server.canServe(doc.file.fullPath));

        if (!wasRequested &amp;&amp; isViewable) {
            &#x2F;&#x2F; Update status
            _setStatus(STATUS_CONNECTING);

            &#x2F;&#x2F; clear live doc and related docs
            _closeDocuments();

            &#x2F;&#x2F; create new live doc
            _createLiveDocumentForFrame(doc);

            &#x2F;&#x2F; Navigate to the new page within this site. Agents must handle
            &#x2F;&#x2F; frameNavigated event to clear any saved state.
            Inspector.Page.navigate(docUrl).then(function () {
                _setStatus(STATUS_ACTIVE);
            }, function () {
                _close(false, &quot;closed_unknown_reason&quot;);
            });
        } else if (wasRequested) {
            &#x2F;&#x2F; Update highlight
            showHighlight();
        }
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _onInterstitialPageLoad 
        <a class="anchor" href="#-_onInterstitialPageLoad" id="-_onInterstitialPageLoad"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _onInterstitialPageLoad() {

        Inspector.Runtime.evaluate(&quot;window.navigator.userAgent&quot;, function (uaResponse) {
            Inspector.setUserAgent(uaResponse.result.value);
        });

        &#x2F;&#x2F; Domains for some agents must be enabled first before loading
        var enablePromise = Inspector.Page.enable().then(function () {
            return Inspector.DOM.enable().then(_enableAgents, _enableAgents);
        });

        enablePromise.done(function () {
            &#x2F;&#x2F; Some agents (e.g. DOMAgent and RemoteAgent) require us to
            &#x2F;&#x2F; navigate to the page first before loading can complete.
            &#x2F;&#x2F; To accomodate this, we load all agents and navigate in
            &#x2F;&#x2F; parallel.

            &#x2F;&#x2F; resolve&#x2F;reject the open() promise after agents complete
            loadAgents().then(_openDeferred.resolve, _openDeferred.reject);

            _getInitialDocFromCurrent().done(function (doc) {
                if (doc &amp;&amp; _liveDocument) {
                    if (doc !== _liveDocument.doc) {
                        _createLiveDocumentForFrame(doc);
                    }

                    &#x2F;&#x2F; Navigate from interstitial to the document
                    &#x2F;&#x2F; Fires a frameNavigated event
                    if (_server) {
                        Inspector.Page.navigate(_server.pathToUrl(doc.file.fullPath));
                    } else {
                        console.error(&quot;LiveDevelopment._onInterstitialPageLoad(): No server active&quot;);
                    }
                } else {
                    &#x2F;&#x2F; Unlikely that we would get to this state where
                    &#x2F;&#x2F; a connection is in process but there is no current
                    &#x2F;&#x2F; document
                    close();
                }
            });
        });
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _setStatus 
        <a class="anchor" href="#-_setStatus" id="-_setStatus"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Update the status. Triggers a statusChange event.</p>
</div>
    
<dl>
    <dt>
        status
        <span class="label label-info">number</span>
    </dt>
    <dd>new status</dd>
    <dt>
        closeReason
        <span class="label label-nullable">nullable</span>
        <span class="label label-info">string</span>
    </dt>
    <dd>Optional string key suffix to display to user when closing the live development connection (see LIVE_DEV_* keys)</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _setStatus(status, closeReason) {
        &#x2F;&#x2F; Don&#39;t send a notification when the status didn&#39;t actually change
        if (status === exports.status) {
            return;
        }

        exports.status = status;

        var reason = status === STATUS_INACTIVE ? closeReason : null;
        exports.trigger(&quot;statusChange&quot;, status, reason);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>
        _waitForInterstitialPageLoad 
        <a class="anchor" href="#-_waitForInterstitialPageLoad" id="-_waitForInterstitialPageLoad"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">jQuery.Promise</span></dt>
    <dd>Resolves once page is loaded</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _waitForInterstitialPageLoad() {
        var deferred    = $.Deferred(),
            keepPolling = true,
            timer       = window.setTimeout(function () {
                keepPolling = false;
                deferred.reject();
            }, 10000); &#x2F;&#x2F; 10 seconds</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        cleanup 
        <a class="anchor" href="#-cleanup" id="-cleanup"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Finish closing the live development connection, including setting
the status accordingly.</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        function cleanup() {
            &#x2F;&#x2F; Need to do this in order to trigger the corresponding CloseLiveBrowser cleanups required on
            &#x2F;&#x2F; the native Mac side
            var closeDeferred = (brackets.platform === &quot;mac&quot;) ? NativeApp.closeLiveBrowser() : $.Deferred().resolve();
            closeDeferred.done(function () {
                _setStatus(STATUS_INACTIVE, reason || &quot;explicit_close&quot;);
                &#x2F;&#x2F; clean-up registered servers
                _regServers.forEach(function (server) {
                    LiveDevServerManager.removeServer(server);
                });
                _regServers = [];
                _closeDeferred.resolve();
            }).fail(function (err) {
                if (err) {
                    reason +=  &quot; (&quot; + err + &quot;)&quot;;
                }
                _setStatus(STATUS_INACTIVE, reason || &quot;explicit_close&quot;);
                _closeDeferred.resolve();
            });
        }

        if (_isPromisePending(_openDeferred)) {
            &#x2F;&#x2F; Reject calls to open if requests are still pending
            _openDeferred.reject();
        }

        if (exports.status === STATUS_INACTIVE) {
            &#x2F;&#x2F; Ignore close if status is inactive
            _closeDeferred.resolve();
        } else {
            _doInspectorDisconnect(doCloseWindow).always(cleanup);
        }

        return promise;
    }

    &#x2F;&#x2F; WebInspector Event: Page.frameNavigated
    function _onFrameNavigated(event, res) {
        &#x2F;&#x2F; res = {frame}
        var url = res.frame.url,
            baseUrl,
            baseUrlRegExp;

        &#x2F;&#x2F; Only check domain of root frame (with undefined parentId)
        if (res.frame.parentId) {
            return;
        }

        &#x2F;&#x2F; Any local file is OK
        if (url.match(&#x2F;^file:\&#x2F;\&#x2F;&#x2F;i) || !_server) {
            return;
        }

        &#x2F;&#x2F; Need base url to build reg exp
        baseUrl = _server.getBaseUrl();
        if (!baseUrl) {
            return;
        }

        &#x2F;&#x2F; Test that url is within site
        baseUrlRegExp = new RegExp(&quot;^&quot; + StringUtils.regexEscape(baseUrl), &quot;i&quot;);
        if (!url.match(baseUrlRegExp)) {
            &#x2F;&#x2F; No longer in site, so terminate live dev, but don&#39;t close browser window
            _close(false, &quot;navigated_away&quot;);
        }
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        close 
        <a class="anchor" href="#-close" id="-close"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Close the connection and the associated window asynchronously</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">jQuery.Promise</span></dt>
    <dd>Resolves once the connection is closed</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function close() {
        return _close(true);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        disableAgent 
        <a class="anchor" href="#-disableAgent" id="-disableAgent"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Disable an agent. Takes effect next time a connection is made. Does not affect
 current live development sessions.</p>
<p> @param {string} name of agent to disable</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function disableAgent(name) {
        if (_enabledAgentNames.hasOwnProperty(name)) {
            delete _enabledAgentNames[name];
        }
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        enableAgent 
        <a class="anchor" href="#-enableAgent" id="-enableAgent"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Enable an agent. Takes effect next time a connection is made. Does not affect
 current live development sessions.</p>
<p> @param {string} name of agent to enable</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function enableAgent(name) {
        if (agents.hasOwnProperty(name) &amp;&amp; !_enabledAgentNames.hasOwnProperty(name)) {
            _enabledAgentNames[name] = true;
        }
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        hideHighlight 
        <a class="anchor" href="#-hideHighlight" id="-hideHighlight"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Hide any active highlighting</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function hideHighlight() {
        if (Inspector.connected() &amp;&amp; agents.highlight) {
            agents.highlight.hide();
        }
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        init 
        <a class="anchor" href="#-init" id="-init"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Initialize the LiveDevelopment Session</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function init(theConfig) {
        exports.config = theConfig;

        Inspector.on(&quot;error&quot;, _onError);
        Inspector.Inspector.on(&quot;detached&quot;, _onDetached);

        &#x2F;&#x2F; Only listen for styleSheetAdded
        &#x2F;&#x2F; We may get interim added&#x2F;removed events when pushing incremental updates
        CSSAgent.on(&quot;styleSheetAdded.livedev&quot;, _styleSheetAdded);

        MainViewManager
            .on(&quot;currentFileChange&quot;, _onFileChanged);
        DocumentManager
            .on(&quot;documentSaved&quot;, _onDocumentSaved)
            .on(&quot;dirtyFlagChange&quot;, _onDirtyFlagChange);
        ProjectManager
            .on(&quot;beforeProjectClose beforeAppClose&quot;, close);

        &#x2F;&#x2F; Initialize exports.status
        _setStatus(STATUS_INACTIVE);
    }

    function _getServer() {
        return _server;
    }

    function getServerBaseUrl() {
        return _server &amp;&amp; _server.getBaseUrl();
    }


    EventDispatcher.makeEventDispatcher(exports);

    &#x2F;&#x2F; For unit testing
    exports.launcherUrl               = launcherUrl;
    exports._getServer                = _getServer;
    exports._getInitialDocFromCurrent = _getInitialDocFromCurrent;

    &#x2F;&#x2F; Export public functions
    exports.agents              = agents;
    exports.open                = open;
    exports.close               = close;
    exports.reconnect           = reconnect;
    exports.reload              = reload;
    exports.enableAgent         = enableAgent;
    exports.disableAgent        = disableAgent;
    exports.getLiveDocForPath   = getLiveDocForPath;
    exports.showHighlight       = showHighlight;
    exports.hideHighlight       = hideHighlight;
    exports.redrawHighlight     = redrawHighlight;
    exports.init                = init;
    exports.getCurrentProjectServerConfig = getCurrentProjectServerConfig;
    exports.getServerBaseUrl    = getServerBaseUrl;
});</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        loadAgents 
        <a class="anchor" href="#-loadAgents" id="-loadAgents"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Load the agents</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function loadAgents() {
        &#x2F;&#x2F; If we&#39;re already loading agents return same promise
        if (_loadAgentsPromise) {
            return _loadAgentsPromise;
        }

        var result = new $.Deferred(),
            allAgentsPromise;

        _loadAgentsPromise = result.promise();

        _setStatus(STATUS_LOADING_AGENTS);

        &#x2F;&#x2F; load agents in parallel
        allAgentsPromise = Async.doInParallel(
            getEnabledAgents(),
            function (name) {
                return _invokeAgentMethod(name, &quot;load&quot;).done(function () {
                    _loadedAgentNames.push(name);
                });
            },
            true
        );

        &#x2F;&#x2F; wrap agent loading with a timeout
        allAgentsPromise = Async.withTimeout(allAgentsPromise, 10000);

        allAgentsPromise.done(function () {
            var doc = (_liveDocument) ? _liveDocument.doc : null;

            if (doc) {
                var status = STATUS_ACTIVE;

                if (_docIsOutOfSync(doc)) {
                    status = STATUS_OUT_OF_SYNC;
                }

                _setStatus(status);
                result.resolve();
            } else {
                result.reject();
            }
        });

        allAgentsPromise.fail(result.reject);

        _loadAgentsPromise
            .fail(function () {
                &#x2F;&#x2F; show error loading live dev dialog
                _setStatus(STATUS_ERROR);

                Dialogs.showModalDialog(
                    Dialogs.DIALOG_ID_ERROR,
                    Strings.LIVE_DEVELOPMENT_ERROR_TITLE,
                    _makeTroubleshootingMessage(Strings.LIVE_DEV_LOADING_ERROR_MESSAGE)
                );
            })
            .always(function () {
                _loadAgentsPromise = null;
            });

        return _loadAgentsPromise;
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        onActiveEditorChange 
        <a class="anchor" href="#-onActiveEditorChange" id="-onActiveEditorChange"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>If the current editor is for a CSS preprocessor file, then add it to the style sheet
so that we can track cursor positions in the editor to show live preview highlighting.
For normal CSS we only do highlighting from files we know for sure are referenced by the
current live preview document, but for preprocessors we just assume that any preprocessor
file you edit is probably related to the live preview.</p>
</div>
    
<dl>
    <dt>
        event
        <span class="label label-info">Event</span>
    </dt>
    <dd>(unused)</dd>
    <dt>
        current
        <span class="label label-info">Editor</span>
    </dt>
    <dd>Current editor</dd>
    <dt>
        previous
        <span class="label label-info">Editor</span>
    </dt>
    <dd>Previous editor</dd>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function onActiveEditorChange(event, current, previous) {
        if (previous &amp;&amp; previous.document &amp;&amp;
                CSSUtils.isCSSPreprocessorFile(previous.document.file.fullPath)) {
            var prevDocUrl = _server &amp;&amp; _server.pathToUrl(previous.document.file.fullPath);

            if (_relatedDocuments &amp;&amp; _relatedDocuments[prevDocUrl]) {
                _closeRelatedDocument(_relatedDocuments[prevDocUrl]);
            }
        }
        if (current &amp;&amp; current.document &amp;&amp;
                CSSUtils.isCSSPreprocessorFile(current.document.file.fullPath)) {
            var docUrl = _server &amp;&amp; _server.pathToUrl(current.document.file.fullPath);
            _styleSheetAdded(null, docUrl);
        }
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        open 
        <a class="anchor" href="#-open" id="-open"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Open the Connection and go live</p>
</div>
    
<dl>
    <dt>
        restart
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">boolean</span>
    </dt>
    <dd>true if relaunching and _openDeferred already exists</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">jQuery.Promise</span></dt>
    <dd>Resolves once live preview is open</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function open(restart) {
        &#x2F;&#x2F; If close() is still pending, wait for close to finish before opening
        if (_isPromisePending(_closeDeferred)) {
            return _closeDeferred.then(function () {
                return open(restart);
            });
        }

        if (!restart) {
            &#x2F;&#x2F; Return existing promise if it is still pending
            if (_isPromisePending(_openDeferred)) {
                return _openDeferred;
            } else {
                _openDeferred = new $.Deferred();
                _openDeferred.always(function () {
                    _openDeferred = null;
                });
            }
        }

        &#x2F;&#x2F; Register user defined server provider and keep handlers for further clean-up
        _regServers.push(LiveDevServerManager.registerServer({ create: _createUserServer }, 99));
        _regServers.push(LiveDevServerManager.registerServer({ create: _createFileServer }, 0));

        &#x2F;&#x2F; TODO: need to run _onFileChanged() after load if doc != currentDocument here? Maybe not, since activeEditorChange
        &#x2F;&#x2F; doesn&#39;t trigger it, while inline editors can still cause edits in doc other than currentDoc...
        _getInitialDocFromCurrent().done(function (doc) {
            var prepareServerPromise = (doc &amp;&amp; _prepareServer(doc)) || new $.Deferred().reject(),
                otherDocumentsInWorkingFiles;

            if (doc &amp;&amp; !doc._masterEditor) {
                otherDocumentsInWorkingFiles = MainViewManager.getWorkingSet(MainViewManager.ALL_PANES).length;
                MainViewManager.addToWorkingSet(MainViewManager.ACTIVE_PANE, doc.file);

                if (!otherDocumentsInWorkingFiles) {
                    MainViewManager._edit(MainViewManager.ACTIVE_PANE, doc);
                }
            }

            &#x2F;&#x2F; wait for server (StaticServer, Base URL or file:)
            prepareServerPromise
                .done(function () {
                    var reverseInspectPref = PreferencesManager.get(&quot;livedev.enableReverseInspect&quot;),
                        wsPort             = PreferencesManager.get(&quot;livedev.wsPort&quot;);
                        
                    if (wsPort &amp;&amp; reverseInspectPref) {
                        WebSocketTransport.createWebSocketServer(wsPort);
                    }
                    _doLaunchAfterServerReady(doc);
                })
                .fail(function () {
                    _showWrongDocError();
                });
        });

        return _openDeferred.promise();
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        pollInterstitialPage 
        <a class="anchor" href="#-pollInterstitialPage" id="-pollInterstitialPage"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Asynchronously check to see if the interstitial page has
finished loading; if not, check again until timing out.</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">        function pollInterstitialPage() {
            if (keepPolling &amp;&amp; Inspector.connected()) {
                Inspector.Runtime.evaluate(&quot;window.isBracketsLiveDevelopmentInterstitialPageLoaded&quot;, function (response) {
                    var result = response.result;

                    if (result.type === &quot;boolean&quot; &amp;&amp; result.value) {
                        window.clearTimeout(timer);
                        deferred.resolve();
                    } else {
                        window.setTimeout(pollInterstitialPage, 100);
                    }
                });
            } else {
                deferred.reject();
            }
        }

        pollInterstitialPage();
        return deferred.promise();
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        reconnect 
        <a class="anchor" href="#-reconnect" id="-reconnect"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Unload and reload agents</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">jQuery.Promise</span></dt>
    <dd>Resolves once the agents are loaded</dd>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function reconnect() {
        if (_loadAgentsPromise) {
            &#x2F;&#x2F; Agents are already loading, so don&#39;t unload
            return _loadAgentsPromise;
        }

        unloadAgents();

        &#x2F;&#x2F; Clear any existing related documents before we reload the agents.
        &#x2F;&#x2F; We need to recreate them for the reloaded document due to some
        &#x2F;&#x2F; desirable side-effects (see #7606). Eventually, we should simplify
        &#x2F;&#x2F; the way we get that behavior.
        _.forOwn(_relatedDocuments, function (relatedDoc) {
            _closeRelatedDocument(relatedDoc);
        });

        return loadAgents();
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        redrawHighlight 
        <a class="anchor" href="#-redrawHighlight" id="-redrawHighlight"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Redraw highlights *</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function redrawHighlight() {
        if (Inspector.connected() &amp;&amp; agents.highlight) {
            agents.highlight.redraw();
        }
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        reload 
        <a class="anchor" href="#-reload" id="-reload"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>reload the live preview</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function reload() {
        &#x2F;&#x2F; Unload and reload agents before reloading the page
        &#x2F;&#x2F; Some agents (e.g. DOMAgent and RemoteAgent) require us to
        &#x2F;&#x2F; navigate to the page first before loading can complete.
        &#x2F;&#x2F; To accomodate this, we load all agents (in reconnect())
        &#x2F;&#x2F; and navigate in parallel.
        reconnect();

        &#x2F;&#x2F; Reload HTML page
        Inspector.Page.reload();
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        showHighlight 
        <a class="anchor" href="#-showHighlight" id="-showHighlight"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Enable highlighting</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function showHighlight() {
        var doc = getLiveDocForEditor(EditorManager.getActiveEditor());

        if (doc &amp;&amp; doc.updateHighlight) {
            doc.updateHighlight();
        }
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        unloadAgents 
        <a class="anchor" href="#-unloadAgents" id="-unloadAgents"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Unload the agents</p>
</div>
    
<dl>
</dl><dl>
</dl><dl>
</dl><dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function unloadAgents() {
        _loadedAgentNames.forEach(function (name) {
            agents[name].unload();
        });
        _loadedAgentNames = [];
    }</code></pre></div>
</section>

        </div>
      </div>
    </div>

    <script type="text/javascript" src="../../../assets/js/prism.js"></script>
  </body>
</html>
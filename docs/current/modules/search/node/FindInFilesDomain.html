<!DOCTYPE html>
<html lang="en">
  <head>
    <title>FindInFilesDomain - Brackets API</title>
    <link rel="stylesheet" href="../../../assets/css/bootstrap.css">
    <link rel="stylesheet" href="../../../assets/css/typeahead.js-bootstrap.css">
    <link rel="stylesheet" href="../../../assets/css/font-awesome.css">
    <link rel="stylesheet" href="../../../assets/css/prism.css">
    <link rel="stylesheet" href="../../../assets/css/main.css">
    <!--[if IE 7]>
    <link rel="stylesheet" href="../assets/css/font-awesome-ie7.css">
    <![endif]-->
    <script type="text/javascript" src="../../../assets/js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../../../assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="../../../assets/js/typeahead.js"></script>
    <script type="text/javascript" src="../../../assets/js/main.js"></script>
    <script src="http://use.edgefonts.net/source-sans-pro:n3,i3,n4,i4;source-code-pro.js"></script>

    <!-- Control the Flash of Unstyled Text (or FOUT) -->
    <style type="text/css">
        .wf-loading h1, .wf-loading h2, .wf-loading h3, .wf-loading h4,
        .wf-loading h5, .wf-loading h6, .wf-loading p, .wf-loading a {
            visibility: hidden;
        }
    </style>
    
    <script>
      window.moduleLevel = "../../..";
    </script>
  </head>
  
  <body>
    <div class="row-fluid">
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="../../../index.html">Brackets API</a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li><a href="#dependencies">Dependencies</a></li>
                <li><a href="#variables">Variables</a></li>
                <li><a href="#functions">Functions</a></li>
                <li><a href="#classes">Classes</a></li>
              </ul>
            </div>
            <input class="typeahead" placeholder="Search..." type="text" >
          </div>
        </div>
      </div>    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="left-section">
            <h2 class="number-of-modules">Modules (176)</h2>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_"><i class="icon-folder-open"></i>[root]</a>
              </li>
            </ul>
            <ul id="package_" class="nav nav-list">
              <li><a href="../../../modules/brackets.html">brackets</a></li>
              <li><a href="../../../modules/dependencies.html">dependencies</a></li>
              <li><a href="../../../modules/main.html">main</a></li>
              <li><a href="../../../modules/strings.html">strings</a></li>
              <li><a href="../../../modules/xorigin.html">xorigin</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_command"><i class="icon-folder-open"></i>command</a>
              </li>
            </ul>
            <ul id="package_command" class="nav nav-list">
              <li><a href="../../../modules/command/CommandManager.html">CommandManager</a></li>
              <li><a href="../../../modules/command/Commands.html">Commands</a></li>
              <li><a href="../../../modules/command/DefaultMenus.html">DefaultMenus</a></li>
              <li><a href="../../../modules/command/KeyBindingManager.html">KeyBindingManager</a></li>
              <li><a href="../../../modules/command/Menus.html">Menus</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_document"><i class="icon-folder-open"></i>document</a>
              </li>
            </ul>
            <ul id="package_document" class="nav nav-list">
              <li><a href="../../../modules/document/ChangedDocumentTracker.html">ChangedDocumentTracker</a></li>
              <li><a href="../../../modules/document/Document.html">Document</a></li>
              <li><a href="../../../modules/document/DocumentCommandHandlers.html">DocumentCommandHandlers</a></li>
              <li><a href="../../../modules/document/DocumentManager.html">DocumentManager</a></li>
              <li><a href="../../../modules/document/InMemoryFile.html">InMemoryFile</a></li>
              <li><a href="../../../modules/document/TextRange.html">TextRange</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_editor"><i class="icon-folder-open"></i>editor</a>
              </li>
            </ul>
            <ul id="package_editor" class="nav nav-list">
              <li><a href="../../../modules/editor/CodeHintList.html">CodeHintList</a></li>
              <li><a href="../../../modules/editor/CodeHintManager.html">CodeHintManager</a></li>
              <li><a href="../../../modules/editor/CSSInlineEditor.html">CSSInlineEditor</a></li>
              <li><a href="../../../modules/editor/Editor.html">Editor</a></li>
              <li><a href="../../../modules/editor/EditorCommandHandlers.html">EditorCommandHandlers</a></li>
              <li><a href="../../../modules/editor/EditorManager.html">EditorManager</a></li>
              <li><a href="../../../modules/editor/EditorOptionHandlers.html">EditorOptionHandlers</a></li>
              <li><a href="../../../modules/editor/EditorStatusBar.html">EditorStatusBar</a></li>
              <li><a href="../../../modules/editor/ImageViewer.html">ImageViewer</a></li>
              <li><a href="../../../modules/editor/InlineTextEditor.html">InlineTextEditor</a></li>
              <li><a href="../../../modules/editor/InlineWidget.html">InlineWidget</a></li>
              <li><a href="../../../modules/editor/MultiRangeInlineEditor.html">MultiRangeInlineEditor</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_extensibility"><i class="icon-folder-open"></i>extensibility</a>
              </li>
            </ul>
            <ul id="package_extensibility" class="nav nav-list">
              <li><a href="../../../modules/extensibility/ExtensionManager.html">ExtensionManager</a></li>
              <li><a href="../../../modules/extensibility/ExtensionManagerDialog.html">ExtensionManagerDialog</a></li>
              <li><a href="../../../modules/extensibility/ExtensionManagerView.html">ExtensionManagerView</a></li>
              <li><a href="../../../modules/extensibility/ExtensionManagerViewModel.html">ExtensionManagerViewModel</a></li>
              <li><a href="../../../modules/extensibility/InstallExtensionDialog.html">InstallExtensionDialog</a></li>
              <li><a href="../../../modules/extensibility/Package.html">Package</a></li>
              <li><a href="../../../modules/extensibility/registry_utils.html">registry_utils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_file"><i class="icon-folder-open"></i>file</a>
              </li>
            </ul>
            <ul id="package_file" class="nav nav-list">
              <li><a href="../../../modules/file/FileUtils.html">FileUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem"><i class="icon-folder-open"></i>filesystem</a>
              </li>
            </ul>
            <ul id="package_filesystem" class="nav nav-list">
              <li><a href="../../../modules/filesystem/Directory.html">Directory</a></li>
              <li><a href="../../../modules/filesystem/File.html">File</a></li>
              <li><a href="../../../modules/filesystem/FileIndex.html">FileIndex</a></li>
              <li><a href="../../../modules/filesystem/FileSystem.html">FileSystem</a></li>
              <li><a href="../../../modules/filesystem/FileSystemEntry.html">FileSystemEntry</a></li>
              <li><a href="../../../modules/filesystem/FileSystemError.html">FileSystemError</a></li>
              <li><a href="../../../modules/filesystem/FileSystemStats.html">FileSystemStats</a></li>
              <li><a href="../../../modules/filesystem/WatchedRoot.html">WatchedRoot</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell"><i class="icon-folder-open"></i>filesystem&#x2F;impls&#x2F;appshell</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell" class="nav nav-list">
              <li><a href="../../../modules/filesystem/impls/appshell/AppshellFileSystem.html">AppshellFileSystem</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell_node"><i class="icon-folder-open"></i>filesystem&#x2F;impls&#x2F;appshell&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell_node" class="nav nav-list">
              <li><a href="../../../modules/filesystem/impls/appshell/node/FileWatcherDomain.html">FileWatcherDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_help"><i class="icon-folder-open"></i>help</a>
              </li>
            </ul>
            <ul id="package_help" class="nav nav-list">
              <li><a href="../../../modules/help/HelpCommandHandlers.html">HelpCommandHandlers</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_language"><i class="icon-folder-open"></i>language</a>
              </li>
            </ul>
            <ul id="package_language" class="nav nav-list">
              <li><a href="../../../modules/language/CodeInspection.html">CodeInspection</a></li>
              <li><a href="../../../modules/language/CSSUtils.html">CSSUtils</a></li>
              <li><a href="../../../modules/language/HTMLDOMDiff.html">HTMLDOMDiff</a></li>
              <li><a href="../../../modules/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../../modules/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
              <li><a href="../../../modules/language/HTMLTokenizer.html">HTMLTokenizer</a></li>
              <li><a href="../../../modules/language/HTMLUtils.html">HTMLUtils</a></li>
              <li><a href="../../../modules/language/JSONUtils.html">JSONUtils</a></li>
              <li><a href="../../../modules/language/JSUtils.html">JSUtils</a></li>
              <li><a href="../../../modules/language/LanguageManager.html">LanguageManager</a></li>
              <li><a href="../../../modules/language/XMLUtils.html">XMLUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Agents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Agents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Agents" class="nav nav-list">
              <li><a href="../../../modules/LiveDevelopment/Agents/ConsoleAgent.html">ConsoleAgent</a></li>
              <li><a href="../../../modules/LiveDevelopment/Agents/CSSAgent.html">CSSAgent</a></li>
              <li><a href="../../../modules/LiveDevelopment/Agents/DOMAgent.html">DOMAgent</a></li>
              <li><a href="../../../modules/LiveDevelopment/Agents/DOMHelpers.html">DOMHelpers</a></li>
              <li><a href="../../../modules/LiveDevelopment/Agents/DOMNode.html">DOMNode</a></li>
              <li><a href="../../../modules/LiveDevelopment/Agents/EditAgent.html">EditAgent</a></li>
              <li><a href="../../../modules/LiveDevelopment/Agents/GotoAgent.html">GotoAgent</a></li>
              <li><a href="../../../modules/LiveDevelopment/Agents/HighlightAgent.html">HighlightAgent</a></li>
              <li><a href="../../../modules/LiveDevelopment/Agents/NetworkAgent.html">NetworkAgent</a></li>
              <li><a href="../../../modules/LiveDevelopment/Agents/RemoteAgent.html">RemoteAgent</a></li>
              <li><a href="../../../modules/LiveDevelopment/Agents/RemoteFunctions.html">RemoteFunctions</a></li>
              <li><a href="../../../modules/LiveDevelopment/Agents/ScriptAgent.html">ScriptAgent</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Documents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Documents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Documents" class="nav nav-list">
              <li><a href="../../../modules/LiveDevelopment/Documents/CSSDocument.html">CSSDocument</a></li>
              <li><a href="../../../modules/LiveDevelopment/Documents/CSSPreprocessorDocument.html">CSSPreprocessorDocument</a></li>
              <li><a href="../../../modules/LiveDevelopment/Documents/HTMLDocument.html">HTMLDocument</a></li>
              <li><a href="../../../modules/LiveDevelopment/Documents/JSDocument.html">JSDocument</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Inspector"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Inspector</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Inspector" class="nav nav-list">
              <li><a href="../../../modules/LiveDevelopment/Inspector/Inspector.html">Inspector</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment"><i class="icon-folder-open"></i>LiveDevelopment</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment" class="nav nav-list">
              <li><a href="../../../modules/LiveDevelopment/LiveDevelopment.html">LiveDevelopment</a></li>
              <li><a href="../../../modules/LiveDevelopment/LiveDevelopmentUtils.html">LiveDevelopmentUtils</a></li>
              <li><a href="../../../modules/LiveDevelopment/LiveDevMultiBrowser.html">LiveDevMultiBrowser</a></li>
              <li><a href="../../../modules/LiveDevelopment/LiveDevServerManager.html">LiveDevServerManager</a></li>
              <li><a href="../../../modules/LiveDevelopment/main.html">main</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_documents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;documents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_documents" class="nav nav-list">
              <li><a href="../../../modules/LiveDevelopment/MultiBrowserImpl/documents/LiveCSSDocument.html">LiveCSSDocument</a></li>
              <li><a href="../../../modules/LiveDevelopment/MultiBrowserImpl/documents/LiveDocument.html">LiveDocument</a></li>
              <li><a href="../../../modules/LiveDevelopment/MultiBrowserImpl/documents/LiveHTMLDocument.html">LiveHTMLDocument</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_language"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;language</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_language" class="nav nav-list">
              <li><a href="../../../modules/LiveDevelopment/MultiBrowserImpl/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../../modules/LiveDevelopment/MultiBrowserImpl/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_launchers"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;launchers</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_launchers" class="nav nav-list">
              <li><a href="../../../modules/LiveDevelopment/MultiBrowserImpl/launchers/Launcher.html">Launcher</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_launchers_node"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;launchers&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_launchers_node" class="nav nav-list">
              <li><a href="../../../modules/LiveDevelopment/MultiBrowserImpl/launchers/node/LauncherDomain.html">LauncherDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_protocol"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;protocol</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_protocol" class="nav nav-list">
              <li><a href="../../../modules/LiveDevelopment/MultiBrowserImpl/protocol/LiveDevProtocol.html">LiveDevProtocol</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_protocol_remote"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;protocol&#x2F;remote</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_protocol_remote" class="nav nav-list">
              <li><a href="../../../modules/LiveDevelopment/MultiBrowserImpl/protocol/remote/DocumentObserver.html">DocumentObserver</a></li>
              <li><a href="../../../modules/LiveDevelopment/MultiBrowserImpl/protocol/remote/LiveDevProtocolRemote.html">LiveDevProtocolRemote</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_transports_node"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;transports&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_transports_node" class="nav nav-list">
              <li><a href="../../../modules/LiveDevelopment/MultiBrowserImpl/transports/node/NodeSocketTransportDomain.html">NodeSocketTransportDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_transports"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;transports</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_transports" class="nav nav-list">
              <li><a href="../../../modules/LiveDevelopment/MultiBrowserImpl/transports/NodeSocketTransport.html">NodeSocketTransport</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_MultiBrowserImpl_transports_remote"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;MultiBrowserImpl&#x2F;transports&#x2F;remote</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_MultiBrowserImpl_transports_remote" class="nav nav-list">
              <li><a href="../../../modules/LiveDevelopment/MultiBrowserImpl/transports/remote/NodeSocketTransportRemote.html">NodeSocketTransportRemote</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Servers"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Servers</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Servers" class="nav nav-list">
              <li><a href="../../../modules/LiveDevelopment/Servers/BaseServer.html">BaseServer</a></li>
              <li><a href="../../../modules/LiveDevelopment/Servers/FileServer.html">FileServer</a></li>
              <li><a href="../../../modules/LiveDevelopment/Servers/UserServer.html">UserServer</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_preferences"><i class="icon-folder-open"></i>preferences</a>
              </li>
            </ul>
            <ul id="package_preferences" class="nav nav-list">
              <li><a href="../../../modules/preferences/PreferencesBase.html">PreferencesBase</a></li>
              <li><a href="../../../modules/preferences/PreferencesDialogs.html">PreferencesDialogs</a></li>
              <li><a href="../../../modules/preferences/PreferencesImpl.html">PreferencesImpl</a></li>
              <li><a href="../../../modules/preferences/PreferencesManager.html">PreferencesManager</a></li>
              <li><a href="../../../modules/preferences/PreferenceStorage.html">PreferenceStorage</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_project"><i class="icon-folder-open"></i>project</a>
              </li>
            </ul>
            <ul id="package_project" class="nav nav-list">
              <li><a href="../../../modules/project/FileSyncManager.html">FileSyncManager</a></li>
              <li><a href="../../../modules/project/FileTreeView.html">FileTreeView</a></li>
              <li><a href="../../../modules/project/FileTreeViewModel.html">FileTreeViewModel</a></li>
              <li><a href="../../../modules/project/FileViewController.html">FileViewController</a></li>
              <li><a href="../../../modules/project/ProjectManager.html">ProjectManager</a></li>
              <li><a href="../../../modules/project/ProjectModel.html">ProjectModel</a></li>
              <li><a href="../../../modules/project/SidebarView.html">SidebarView</a></li>
              <li><a href="../../../modules/project/WorkingSetSort.html">WorkingSetSort</a></li>
              <li><a href="../../../modules/project/WorkingSetView.html">WorkingSetView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_search"><i class="icon-folder-open"></i>search</a>
              </li>
            </ul>
            <ul id="package_search" class="nav nav-list">
              <li><a href="../../../modules/search/FileFilters.html">FileFilters</a></li>
              <li><a href="../../../modules/search/FindBar.html">FindBar</a></li>
              <li><a href="../../../modules/search/FindInFiles.html">FindInFiles</a></li>
              <li><a href="../../../modules/search/FindInFilesUI.html">FindInFilesUI</a></li>
              <li><a href="../../../modules/search/FindReplace.html">FindReplace</a></li>
              <li><a href="../../../modules/search/FindUtils.html">FindUtils</a></li>
              <li><a href="../../../modules/search/QuickOpen.html">QuickOpen</a></li>
              <li><a href="../../../modules/search/QuickSearchField.html">QuickSearchField</a></li>
              <li><a href="../../../modules/search/ScrollTrackMarkers.html">ScrollTrackMarkers</a></li>
              <li><a href="../../../modules/search/SearchModel.html">SearchModel</a></li>
              <li><a href="../../../modules/search/SearchResultsView.html">SearchResultsView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_search_node"><i class="icon-folder-open"></i>search&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_search_node" class="nav nav-list">
              <li><a href="../../../modules/search/node/FindInFilesDomain.html">FindInFilesDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_utils"><i class="icon-folder-open"></i>utils</a>
              </li>
            </ul>
            <ul id="package_utils" class="nav nav-list">
              <li><a href="../../../modules/utils/AnimationUtils.html">AnimationUtils</a></li>
              <li><a href="../../../modules/utils/AppInit.html">AppInit</a></li>
              <li><a href="../../../modules/utils/Async.html">Async</a></li>
              <li><a href="../../../modules/utils/BuildInfoUtils.html">BuildInfoUtils</a></li>
              <li><a href="../../../modules/utils/ColorUtils.html">ColorUtils</a></li>
              <li><a href="../../../modules/utils/Compatibility.html">Compatibility</a></li>
              <li><a href="../../../modules/utils/DeprecationWarning.html">DeprecationWarning</a></li>
              <li><a href="../../../modules/utils/DragAndDrop.html">DragAndDrop</a></li>
              <li><a href="../../../modules/utils/DropdownEventHandler.html">DropdownEventHandler</a></li>
              <li><a href="../../../modules/utils/EventDispatcher.html">EventDispatcher</a></li>
              <li><a href="../../../modules/utils/ExtensionLoader.html">ExtensionLoader</a></li>
              <li><a href="../../../modules/utils/ExtensionUtils.html">ExtensionUtils</a></li>
              <li><a href="../../../modules/utils/Global.html">Global</a></li>
              <li><a href="../../../modules/utils/HealthLogger.html">HealthLogger</a></li>
              <li><a href="../../../modules/utils/KeyEvent.html">KeyEvent</a></li>
              <li><a href="../../../modules/utils/LocalizationUtils.html">LocalizationUtils</a></li>
              <li><a href="../../../modules/utils/NativeApp.html">NativeApp</a></li>
              <li><a href="../../../modules/utils/NodeConnection.html">NodeConnection</a></li>
              <li><a href="../../../modules/utils/NodeDomain.html">NodeDomain</a></li>
              <li><a href="../../../modules/utils/PerfUtils.html">PerfUtils</a></li>
              <li><a href="../../../modules/utils/Resizer.html">Resizer</a></li>
              <li><a href="../../../modules/utils/ShellAPI.html">ShellAPI</a></li>
              <li><a href="../../../modules/utils/StringMatch.html">StringMatch</a></li>
              <li><a href="../../../modules/utils/StringUtils.html">StringUtils</a></li>
              <li><a href="../../../modules/utils/TokenUtils.html">TokenUtils</a></li>
              <li><a href="../../../modules/utils/UpdateNotification.html">UpdateNotification</a></li>
              <li><a href="../../../modules/utils/UrlParams.html">UrlParams</a></li>
              <li><a href="../../../modules/utils/ValidationUtils.html">ValidationUtils</a></li>
              <li><a href="../../../modules/utils/ViewUtils.html">ViewUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_view"><i class="icon-folder-open"></i>view</a>
              </li>
            </ul>
            <ul id="package_view" class="nav nav-list">
              <li><a href="../../../modules/view/MainViewFactory.html">MainViewFactory</a></li>
              <li><a href="../../../modules/view/MainViewManager.html">MainViewManager</a></li>
              <li><a href="../../../modules/view/Pane.html">Pane</a></li>
              <li><a href="../../../modules/view/PanelManager.html">PanelManager</a></li>
              <li><a href="../../../modules/view/ThemeManager.html">ThemeManager</a></li>
              <li><a href="../../../modules/view/ThemeSettings.html">ThemeSettings</a></li>
              <li><a href="../../../modules/view/ThemeView.html">ThemeView</a></li>
              <li><a href="../../../modules/view/ViewCommandHandlers.html">ViewCommandHandlers</a></li>
              <li><a href="../../../modules/view/ViewStateManager.html">ViewStateManager</a></li>
              <li><a href="../../../modules/view/WorkspaceManager.html">WorkspaceManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_widgets"><i class="icon-folder-open"></i>widgets</a>
              </li>
            </ul>
            <ul id="package_widgets" class="nav nav-list">
              <li><a href="../../../modules/widgets/bootstrap-alerts.html">bootstrap-alerts</a></li>
              <li><a href="../../../modules/widgets/bootstrap-button.html">bootstrap-button</a></li>
              <li><a href="../../../modules/widgets/bootstrap-dropdown.html">bootstrap-dropdown</a></li>
              <li><a href="../../../modules/widgets/bootstrap-modal.html">bootstrap-modal</a></li>
              <li><a href="../../../modules/widgets/bootstrap-popover.html">bootstrap-popover</a></li>
              <li><a href="../../../modules/widgets/bootstrap-scrollspy.html">bootstrap-scrollspy</a></li>
              <li><a href="../../../modules/widgets/bootstrap-tab.html">bootstrap-tab</a></li>
              <li><a href="../../../modules/widgets/bootstrap-tooltip.html">bootstrap-tooltip</a></li>
              <li><a href="../../../modules/widgets/bootstrap-twipsy-mod.html">bootstrap-twipsy-mod</a></li>
              <li><a href="../../../modules/widgets/DefaultDialogs.html">DefaultDialogs</a></li>
              <li><a href="../../../modules/widgets/Dialogs.html">Dialogs</a></li>
              <li><a href="../../../modules/widgets/DropdownButton.html">DropdownButton</a></li>
              <li><a href="../../../modules/widgets/ModalBar.html">ModalBar</a></li>
              <li><a href="../../../modules/widgets/PopUpManager.html">PopUpManager</a></li>
              <li><a href="../../../modules/widgets/StatusBar.html">StatusBar</a></li>
            </ul>
          </div>
        </div>
        <div class="module span9">
<h1>FindInFilesDomain</h1>


<section class="description">
    <h3>Description</h3>
    
    <div></div>
    
</section>

<section id="dependencies">
    <h3>Dependencies</h3>

    <ul class="nav nav-list">
        <li><a href="..&#x2F;..&#x2F;../modules/fs.html">fs</a></li>
    </ul>

</section>

<section id="functions">

    <h3>Functions 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>    </h3>

<div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        addFilesToCache 
        <a class="anchor" href="#-addFilesToCache" id="-addFilesToCache"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Adds the list of given files to the project cache. However the files will not be
read at this time. We just delete the project cache entry which will trigger a fetch on search.</p>
</div>
    
<dl>
    <dt>
        updateObject
        <span class="label label-info">Object</span>
    </dt>
    <dd></dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function addFilesToCache(updateObject) {
        var fileList = updateObject.fileList || [],
            filesInSearchScope = updateObject.filesInSearchScope || [],
            i = 0,
            changedFilesAlreadyInList = [],
            newFiles = [];
        for (i = 0; i &lt; fileList.length; i++) {
            &#x2F;&#x2F; We just add a null entry indicating the precense of the file in the project list.
            &#x2F;&#x2F; The file will be later read when required.
            projectCache[fileList[i]] = null;
        }

        &#x2F;&#x2F;Now update the search scope
        function isInChangedFileList(path) {
            return (filesInSearchScope.indexOf(path) !== -1) ? true : false;
        }
        changedFilesAlreadyInList = files ? files.filter(isInChangedFileList) : [];
        function isNotAlreadyInList(path) {
            return (changedFilesAlreadyInList.indexOf(path) === -1) ? true : false;
        }
        newFiles = changedFilesAlreadyInList.filter(isNotAlreadyInList);
        files.push.apply(files, newFiles);
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        clearProjectCache 
        <a class="anchor" href="#-clearProjectCache" id="-clearProjectCache"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Clears the cached file contents of the project</p>
</div>
    
<dl>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function clearProjectCache() {
        projectCache = [];
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        countNumMatches 
        <a class="anchor" href="#-countNumMatches" id="-countNumMatches"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Counts the number of matches matching the queryExpr in the given contents</p>
</div>
    
<dl>
    <dt>
        contents
        <span class="label label-info">String</span>
    </dt>
    <dd>The contents to search on</dd>
    <dt>
        queryExpr
        <span class="label label-info">Object</span>
    </dt>
    <dd></dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">number</span>
</dt>
    <dd>number of matches</dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function countNumMatches(contents, queryExpr) {
        if (!contents) {
            return 0;
        }
        var matches = contents.match(queryExpr);
        return matches ? matches.length : 0;
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        doSearch 
        <a class="anchor" href="#-doSearch" id="-doSearch"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Do a search with the searchObject context and return the results</p>
</div>
    
<dl>
    <dt>
        searchObject
        <span class="label label-info">Object</span>
    </dt>
    <dd></dd>
    <dt>
        nextPages
        <span class="label label-info">boolean</span>
    </dt>
    <dd>set to true if to indicate that next page of an existing page is being fetched</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">Object</span>
</dt>
    <dd>search results</dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function doSearch(searchObject, nextPages) {

        savedSearchObject = searchObject;
        if (!files) {
            console.log(&quot;no file object found&quot;);
            return {};
        }
        results = {};
        numMatches = 0;
        numFiles = 0;
        foundMaximum = false;
        if (!nextPages) {
            exceedsMaximum = false;
            evaluatedMatches = 0;
        }
        var queryObject = parseQueryInfo(searchObject.queryInfo);
        if (searchObject.files) {
            files = searchObject.files;
        }
        if (searchObject.getAllResults) {
            searchObject.maxResultsToReturn = MAX_TOTAL_RESULTS;
        }
        doSearchInFiles(files, queryObject.queryExpr, searchObject.startFileIndex, searchObject.maxResultsToReturn);
        if (crawlComplete &amp;&amp; !nextPages) {
            numMatches = getNumMatches(files, queryObject.queryExpr);
        }
        var send_object = {
            &quot;results&quot;:  results,
            &quot;foundMaximum&quot;:  foundMaximum,
            &quot;exceedsMaximum&quot;:  exceedsMaximum
        };

        if (!nextPages) {
            send_object.numMatches = numMatches;
            send_object.numFiles = numFiles;
        }

        if (searchObject.getAllResults) {
            send_object.allResultsAvailable = true;
        }
        return send_object;
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        doSearchInFiles 
        <a class="anchor" href="#-doSearchInFiles" id="-doSearchInFiles"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Search in the list of files given and populate the results</p>
</div>
    
<dl>
    <dt>
        fileList
        <span class="label label-info">array</span>
    </dt>
    <dd>array of file paths</dd>
    <dt>
        queryExpr
        <span class="label label-info">Object</span>
    </dt>
    <dd></dd>
    <dt>
        startFileIndex
        <span class="label label-info">number</span>
    </dt>
    <dd>the start index of the array from which the search has to be done</dd>
    <dt>
        maxResultsToReturn
        <span class="label label-info">number</span>
    </dt>
    <dd>the maximum number of results to return in this search</dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function doSearchInFiles(fileList, queryExpr, startFileIndex, maxResultsToReturn) {
        var i;
        if (fileList.length === 0) {
            console.log(&#39;no files found&#39;);
            return;

        } else {
            startFileIndex = startFileIndex || 0;
            for (i = startFileIndex; i &lt; fileList.length &amp;&amp; !foundMaximum; i++) {
                doSearchInOneFile(fileList[i], getFileContentsForFile(fileList[i]), queryExpr, maxResultsToReturn);
            }
            lastSearchedIndex = i;
        }
    }

    &#x2F;&#x2F; Copied from StringUtils.js
    function regexEscape(str) {
        return str.replace(&#x2F;([.?*+\^$\[\]\\(){}|\-])&#x2F;g, &quot;\\$1&quot;);
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        doSearchInOneFile 
        <a class="anchor" href="#-doSearchInOneFile" id="-doSearchInOneFile"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Finds search results in the given file and adds them to &#39;results&#39;</p>
</div>
    
<dl>
    <dt>
        filepath
        <span class="label label-info">string</span>
    </dt>
    <dd></dd>
    <dt>
        text
        <span class="label label-info">string</span>
    </dt>
    <dd>contents of the file</dd>
    <dt>
        queryExpr
        <span class="label label-info">Object</span>
    </dt>
    <dd></dd>
    <dt>
        maxResultsToReturn
        <span class="label label-info">number</span>
    </dt>
    <dd>the maximum of results that should be returned in the current search.</dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function doSearchInOneFile(filepath, text, queryExpr, maxResultsToReturn) {
        var matches = getSearchMatches(text, queryExpr);
        setResults(filepath, {matches: matches}, maxResultsToReturn);
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        documentChanged 
        <a class="anchor" href="#-documentChanged" id="-documentChanged"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Notification function on document changed, we update the cache with the contents</p>
</div>
    
<dl>
    <dt>
        updateObject
        <span class="label label-info">Object</span>
    </dt>
    <dd></dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function documentChanged(updateObject) {
        projectCache[updateObject.filePath] = updateObject.docContents;
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        fileCrawler 
        <a class="anchor" href="#-fileCrawler" id="-fileCrawler"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Crawls through the files in the project ans stores them in cache. Since that could take a while
we do it in batches so that node wont be blocked.</p>
</div>
    
<dl>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function fileCrawler() {
        if (!files || (files &amp;&amp; files.length === 0)) {
            setTimeout(fileCrawler, 1000);
            return;
        }
        var contents = &quot;&quot;;
        if (currentCrawlIndex &lt; files.length) {
            contents = getFileContentsForFile(files[currentCrawlIndex]);
            if (contents) {
                cacheSize += contents.length;
            }
            currentCrawlIndex++;
        }
        if (currentCrawlIndex &lt; files.length) {
            crawlComplete = false;
            setImmediate(fileCrawler);
        } else {
            crawlComplete = true;
            if (!crawlEventSent) {
                crawlEventSent = true;
                _domainManager.emitEvent(&quot;FindInFiles&quot;, &quot;crawlComplete&quot;, [files.length, cacheSize]);
            }
            setTimeout(fileCrawler, 1000);
        }
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getAllResults 
        <a class="anchor" href="#-getAllResults" id="-getAllResults"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Gets all the results for the saved search query if present or empty search results</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">Object</span>
</dt>
    <dd>The results object</dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getAllResults() {
        var send_object = {
            &quot;results&quot;:  {},
            &quot;numMatches&quot;: 0,
            &quot;foundMaximum&quot;:  foundMaximum,
            &quot;exceedsMaximum&quot;:  exceedsMaximum
        };
        if (!savedSearchObject) {
            return send_object;
        }
        savedSearchObject.startFileIndex = 0;
        savedSearchObject.getAllResults = true;
        return doSearch(savedSearchObject);
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getFileContentsForFile 
        <a class="anchor" href="#-getFileContentsForFile" id="-getFileContentsForFile"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Get the contents of a file from cache given the path. Also adds the file contents to cache from disk if not cached.
Will not read/cache files greater than MAX_FILE_SIZE_TO_INDEX in size.</p>
</div>
    
<dl>
    <dt>
        filePath
        <span class="label label-info">string</span>
    </dt>
    <dd>full file path</dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">string</span>
</dt>
    <dd>contents or null if no contents</dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getFileContentsForFile(filePath) {
        if (projectCache[filePath] || projectCache[filePath] === &quot;&quot;) {
            return projectCache[filePath];
        }
        try {
            if (getFilesizeInBytes(filePath) &lt;= MAX_FILE_SIZE_TO_INDEX) {
                projectCache[filePath] = fs.readFileSync(filePath, &#39;utf8&#39;);
            } else {
                projectCache[filePath] = &quot;&quot;;
            }
        } catch (ex) {
            console.log(ex);
            projectCache[filePath] = null;
        }
        return projectCache[filePath];
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getFilesizeInBytes 
        <a class="anchor" href="#-getFilesizeInBytes" id="-getFilesizeInBytes"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Gets the file size in bytes.</p>
</div>
    
<dl>
    <dt>
        fileName
        <span class="label label-info">string</span>
    </dt>
    <dd>The name of the file to get the size</dd>
</dl><dl>
</dl>
<dl>
        <dt>returns</dt>
        <dd>{Number} the file size in bytes</dd>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getFilesizeInBytes(fileName) {
        try {
            var stats = fs.statSync(fileName);
            return stats.size || 0;
        } catch (ex) {
            console.log(ex);
            return 0;
        }
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getNextPage 
        <a class="anchor" href="#-getNextPage" id="-getNextPage"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Gets the next page of results of the ongoing search</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: <span class="label label-info">Object</span>
</dt>
    <dd>search results</dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getNextPage() {
        var send_object = {
            &quot;results&quot;:  {},
            &quot;numMatches&quot;: 0,
            &quot;foundMaximum&quot;:  foundMaximum,
            &quot;exceedsMaximum&quot;:  exceedsMaximum
        };
        if (!savedSearchObject) {
            return send_object;
        }
        savedSearchObject.startFileIndex = lastSearchedIndex;
        return doSearch(savedSearchObject, true);
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getNumMatches 
        <a class="anchor" href="#-getNumMatches" id="-getNumMatches"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Get the total number of matches from all the files in fileList</p>
</div>
    
<dl>
    <dt>
        fileList
        <span class="label label-info">array</span>
    </dt>
    <dd>file path array</dd>
    <dt>
        queryExpr
        <span class="label label-info">Object</span>
    </dt>
    <dd></dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">Number</span>
</dt>
    <dd>total number of matches</dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getNumMatches(fileList, queryExpr) {
        var i,
            matches = 0;
        for (i = 0; i &lt; fileList.length; i++) {
            var temp = countNumMatches(getFileContentsForFile(fileList[i]), queryExpr);
            if (temp) {
                numFiles++;
                matches += temp;
            }
            if (matches &gt; MAX_TOTAL_RESULTS) {
                exceedsMaximum = true;
                break;
            }
        }
        return matches;
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        getSearchMatches 
        <a class="anchor" href="#-getSearchMatches" id="-getSearchMatches"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Searches through the contents and returns an array of matches</p>
</div>
    
<dl>
    <dt>
        contents
        <span class="label label-info">string</span>
    </dt>
    <dd></dd>
    <dt>
        queryExpr
        <span class="label label-info">RegExp</span>
    </dt>
    <dd></dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">!Array.&lt;{start: {line:number,ch:number},end: {line:number,ch:number},line: string}&gt;</span>
</dt>
    <dd></dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getSearchMatches(contents, queryExpr) {
        if (!contents) {
            return;
        }
        &#x2F;&#x2F; Quick exit if not found or if we hit the limit
        if (foundMaximum || contents.search(queryExpr) === -1) {
            return [];
        }

        var match, lineNum, line, ch, totalMatchLength, matchedLines, numMatchedLines, lastLineLength, endCh,
            padding, leftPadding, rightPadding, highlightOffset, highlightEndCh,
            lines   = contents.split(&quot;\n&quot;),
            matches = [];

        while ((match = queryExpr.exec(contents)) !== null) {
            lineNum          = offsetToLineNum(lines, match.index);
            line             = lines[lineNum];
            ch               = match.index - contents.lastIndexOf(&quot;\n&quot;, match.index) - 1;  &#x2F;&#x2F; 0-based index
            matchedLines     = match[0].split(&quot;\n&quot;);
            numMatchedLines  = matchedLines.length;
            totalMatchLength = match[0].length;
            lastLineLength   = matchedLines[matchedLines.length - 1].length;
            endCh            = (numMatchedLines === 1 ? ch + totalMatchLength : lastLineLength);
            highlightEndCh   = (numMatchedLines === 1 ? endCh : line.length);
            highlightOffset  = 0;

            if (highlightEndCh &lt;= MAX_DISPLAY_LENGTH) {
                &#x2F;&#x2F; Don&#39;t store more than 200 chars per line
                line = line.substr(0, Math.min(MAX_DISPLAY_LENGTH, line.length));
            } else if (totalMatchLength &gt; MAX_DISPLAY_LENGTH) {
                &#x2F;&#x2F; impossible to display the whole match
                line = line.substr(ch, ch + MAX_DISPLAY_LENGTH);
                highlightOffset = ch;
            } else {
                &#x2F;&#x2F; Try to have both beginning and end of match displayed
                padding = MAX_DISPLAY_LENGTH - totalMatchLength;
                rightPadding = Math.floor(Math.min(padding &#x2F; 2, line.length - highlightEndCh));
                leftPadding = Math.ceil(padding - rightPadding);
                highlightOffset = ch - leftPadding;
                line = line.substring(highlightOffset, highlightEndCh + rightPadding);
            }

            matches.push({
                start:       {line: lineNum, ch: ch},
                end:         {line: lineNum + numMatchedLines - 1, ch: endCh},

                highlightOffset: highlightOffset,

                &#x2F;&#x2F; Note that the following offsets from the beginning of the file are *not* updated if the search
                &#x2F;&#x2F; results change. These are currently only used for multi-file replacement, and we always
                &#x2F;&#x2F; abort the replace (by shutting the results panel) if we detect any result changes, so we don&#39;t
                &#x2F;&#x2F; need to keep them up to date. Eventually, we should either get rid of the need for these (by
                &#x2F;&#x2F; doing everything in terms of line&#x2F;ch offsets, though that will require re-splitting files when
                &#x2F;&#x2F; doing a replace) or properly update them.
                startOffset: match.index,
                endOffset:   match.index + totalMatchLength,

                line:        line,
                result:      match,
                isChecked:   true
            });

            &#x2F;&#x2F; We have the max hits in just this 1 file. Stop searching this file.
            &#x2F;&#x2F; This fixed issue #1829 where code hangs on too many hits.
            &#x2F;&#x2F; Adds one over MAX_RESULTS_IN_A_FILE in order to know if the search has exceeded
            &#x2F;&#x2F; or is equal to MAX_RESULTS_IN_A_FILE. Additional result removed in SearchModel
            if (matches.length &gt; MAX_RESULTS_IN_A_FILE) {
                queryExpr.lastIndex = 0;
                break;
            }

            &#x2F;&#x2F; Pathological regexps like &#x2F;^&#x2F; return 0-length matches. Ensure we make progress anyway
            if (totalMatchLength === 0) {
                queryExpr.lastIndex++;
            }
        }

        return matches;
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>
        init 
        <a class="anchor" href="#-init" id="-init"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Initialize the test domain with commands and events related to find in files.</p>
</div>
    
<dl>
    <dt>
        domainManager
        <span class="label label-info">DomainManager</span>
    </dt>
    <dd>The DomainManager for the find in files domain "FindInFiles"</dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function init(domainManager) {
        if (!domainManager.hasDomain(&quot;FindInFiles&quot;)) {
            domainManager.registerDomain(&quot;FindInFiles&quot;, {major: 0, minor: 1});
        }
        _domainManager = domainManager;
        domainManager.registerCommand(
            &quot;FindInFiles&quot;,       &#x2F;&#x2F; domain name
            &quot;doSearch&quot;,    &#x2F;&#x2F; command name
            doSearch,   &#x2F;&#x2F; command handler function
            false,          &#x2F;&#x2F; this command is synchronous in Node
            &quot;Searches in project files and returns matches&quot;,
            [{name: &quot;searchObject&quot;, &#x2F;&#x2F; parameters
                type: &quot;object&quot;,
                description: &quot;Object containing search data&quot;}],
            [{name: &quot;searchResults&quot;, &#x2F;&#x2F; return values
                type: &quot;object&quot;,
                description: &quot;Object containing results of the search&quot;}]
        );
        domainManager.registerCommand(
            &quot;FindInFiles&quot;,       &#x2F;&#x2F; domain name
            &quot;nextPage&quot;,    &#x2F;&#x2F; command name
            getNextPage,   &#x2F;&#x2F; command handler function
            false,          &#x2F;&#x2F; this command is synchronous in Node
            &quot;get the next page of reults&quot;,
            [],
            [{name: &quot;searchResults&quot;, &#x2F;&#x2F; return values
                type: &quot;object&quot;,
                description: &quot;Object containing results of the search&quot;}]
        );
        domainManager.registerCommand(
            &quot;FindInFiles&quot;,       &#x2F;&#x2F; domain name
            &quot;getAllResults&quot;,    &#x2F;&#x2F; command name
            getAllResults,   &#x2F;&#x2F; command handler function
            false,          &#x2F;&#x2F; this command is synchronous in Node
            &quot;get the next page of reults&quot;,
            [],
            [{name: &quot;searchResults&quot;, &#x2F;&#x2F; return values
                type: &quot;object&quot;,
                description: &quot;Object containing all results of the search&quot;}]
        );
        domainManager.registerCommand(
            &quot;FindInFiles&quot;,       &#x2F;&#x2F; domain name
            &quot;collapseResults&quot;,    &#x2F;&#x2F; command name
            setCollapseResults,   &#x2F;&#x2F; command handler function
            false,          &#x2F;&#x2F; this command is synchronous in Node
            &quot;get the next page of reults&quot;,
            [{name: &quot;collapse&quot;, &#x2F;&#x2F; return values
                type: &quot;boolean&quot;,
                description: &quot;true to collapse&quot;}],
            []
        );
        domainManager.registerCommand(
            &quot;FindInFiles&quot;,       &#x2F;&#x2F; domain name
            &quot;filesChanged&quot;,    &#x2F;&#x2F; command name
            addFilesToCache,   &#x2F;&#x2F; command handler function
            false,          &#x2F;&#x2F; this command is synchronous in Node
            &quot;files in the project has been changed, update cache&quot;,
            [{name: &quot;updateObject&quot;, &#x2F;&#x2F; parameters
                type: &quot;object&quot;,
                description: &quot;Object containing list of changed files&quot;}],
            []
        );
        domainManager.registerCommand(
            &quot;FindInFiles&quot;,       &#x2F;&#x2F; domain name
            &quot;documentChanged&quot;,    &#x2F;&#x2F; command name
            documentChanged,   &#x2F;&#x2F; command handler function
            false,          &#x2F;&#x2F; this command is synchronous in Node
            &quot;informs that the document changed and updates the cache&quot;,
            [{name: &quot;updateObject&quot;, &#x2F;&#x2F; parameters
                type: &quot;object&quot;,
                description: &quot;update with the contents of the object&quot;}],
            []
        );
        domainManager.registerCommand(
            &quot;FindInFiles&quot;,       &#x2F;&#x2F; domain name
            &quot;filesRemoved&quot;,    &#x2F;&#x2F; command name
            removeFilesFromCache,   &#x2F;&#x2F; command handler function
            false,          &#x2F;&#x2F; this command is synchronous in Node
            &quot;Searches in project files and returns matches&quot;,
            [{name: &quot;updateObject&quot;, &#x2F;&#x2F; parameters
                type: &quot;object&quot;,
                description: &quot;Object containing list of removed files&quot;}],
            []
        );
        domainManager.registerCommand(
            &quot;FindInFiles&quot;,       &#x2F;&#x2F; domain name
            &quot;initCache&quot;,    &#x2F;&#x2F; command name
            initCache,   &#x2F;&#x2F; command handler function
            false,          &#x2F;&#x2F; this command is synchronous in Node
            &quot;Caches the project for find in files in node&quot;,
            [{name: &quot;fileList&quot;, &#x2F;&#x2F; parameters
                type: &quot;Array&quot;,
                description: &quot;List of all project files - Path only&quot;}],
            []
        );
        domainManager.registerEvent(
            &quot;FindInFiles&quot;,     &#x2F;&#x2F; domain name
            &quot;crawlComplete&quot;,   &#x2F;&#x2F; event name
            [
                {
                    name: &quot;numFiles&quot;,
                    type: &quot;number&quot;,
                    description: &quot;number of files cached&quot;
                },
                {
                    name: &quot;cacheSize&quot;,
                    type: &quot;number&quot;,
                    description: &quot;The size of the file cache epressesd as string length of files&quot;
                }
            ]
        );
        setTimeout(fileCrawler, 5000);
    }

    exports.init = init;

}());</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        initCache 
        <a class="anchor" href="#-initCache" id="-initCache"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Init for project, resets the old project cache, and sets the crawler function to
restart the file crawl</p>
</div>
    
<dl>
    <dt>
        fileList
        <span class="label label-info">array</span>
    </dt>
    <dd>an array of files</dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function initCache(fileList) {
        files = fileList;
        currentCrawlIndex = 0;
        cacheSize = 0;
        clearProjectCache();
        crawlEventSent = false;
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        offsetToLineNum 
        <a class="anchor" href="#-offsetToLineNum" id="-offsetToLineNum"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Copied from StringUtils.js
Returns a line number corresponding to an offset in some text. The text can
be specified as a single string or as an array of strings that correspond to
the lines of the string.</p>
<p>Specify the text in lines when repeatedly calling the function on the same
text in a loop. Use getLines() to divide the text into lines, then repeatedly call
this function to compute a line number from the offset.</p>
</div>
    
<dl>
    <dt>
        textOrLines
        <span class="label label-info">string,Array.&lt;string&gt;</span>
    </dt>
    <dd>- string or array of lines from which to compute the line number from the offset</dd>
    <dt>
        offset
        <span class="label label-info">number</span>
    </dt>
    <dd></dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">number</span>
</dt>
    <dd>line number</dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function offsetToLineNum(textOrLines, offset) {
        if (Array.isArray(textOrLines)) {
            var lines = textOrLines,
                total = 0,
                line;
            for (line = 0; line &lt; lines.length; line++) {
                if (total &lt; offset) {
                    &#x2F;&#x2F; add 1 per line since &#x2F;n were removed by splitting, but they needed to
                    &#x2F;&#x2F; contribute to the total offset count
                    total += lines[line].length + 1;
                } else if (total === offset) {
                    return line;
                } else {
                    return line - 1;
                }
            }

            &#x2F;&#x2F; if offset is NOT over the total then offset is in the last line
            if (offset &lt;= total) {
                return line - 1;
            } else {
                return undefined;
            }
        } else {
            return textOrLines.substr(0, offset).split(&quot;\n&quot;).length - 1;
        }
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        parseQueryInfo 
        <a class="anchor" href="#-parseQueryInfo" id="-parseQueryInfo"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Parses the given query into a regexp, and returns whether it was valid or not.</p>
</div>
    
<dl>
    <dt>
        queryInfo
        <span class="label label-info">{query: string,caseSensitive: boolean,isRegexp: boolean}</span>
    </dt>
    <dd></dd>
</dl><dl>
    <dt>Returns: <span class="label label-info">{queryExpr: RegExp,valid: boolean,empty: boolean,error: string}</span>
</dt>
    <dd>queryExpr - the regexp representing the query valid - set to true if query is a nonempty string or a valid regexp. empty - set to true if query was empty. error - set to an error string if valid is false and query is nonempty.</dd>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function parseQueryInfo(queryInfo) {
        var queryExpr;

        &#x2F;&#x2F; TODO: only major difference between this one and the one in FindReplace is that
        &#x2F;&#x2F; this always returns a regexp even for simple strings. Reconcile.
        if (!queryInfo || !queryInfo.query) {
            return {empty: true};
        }

        &#x2F;&#x2F; For now, treat all matches as multiline (i.e. ^&#x2F;$ match on every line, not the whole
        &#x2F;&#x2F; document). This is consistent with how single-file find works. Eventually we should add
        &#x2F;&#x2F; an option for this.
        var flags = &quot;gm&quot;;
        if (!queryInfo.isCaseSensitive) {
            flags += &quot;i&quot;;
        }

        &#x2F;&#x2F; Is it a (non-blank) regex?
        if (queryInfo.isRegexp) {
            try {
                queryExpr = new RegExp(queryInfo.query, flags);
            } catch (e) {
                return {valid: false, error: e.message};
            }
        } else {
            &#x2F;&#x2F; Query is a plain string. Turn it into a regexp
            queryExpr = new RegExp(regexEscape(queryInfo.query), flags);
        }
        return {valid: true, queryExpr: queryExpr};
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        removeFilesFromCache 
        <a class="anchor" href="#-removeFilesFromCache" id="-removeFilesFromCache"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Remove the list of given files from the project cache</p>
</div>
    
<dl>
    <dt>
        updateObject
        <span class="label label-info">Object</span>
    </dt>
    <dd></dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function removeFilesFromCache(updateObject) {
        var fileList = updateObject.fileList || [],
            filesInSearchScope = updateObject.filesInSearchScope || [],
            i = 0;
        for (i = 0; i &lt; fileList.length; i++) {
            delete projectCache[fileList[i]];
        }
        function isNotInRemovedFilesList(path) {
            return (filesInSearchScope.indexOf(path) === -1) ? true : false;
        }
        files = files ? files.filter(isNotInRemovedFilesList) : files;
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        setCollapseResults 
        <a class="anchor" href="#-setCollapseResults" id="-setCollapseResults"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Sets if the results should be collapsed</p>
</div>
    
<dl>
    <dt>
        collapse
        <span class="label label-info">boolean</span>
    </dt>
    <dd>true to collapse</dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function setCollapseResults(collapse) {
        collapseResults = collapse;
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>
        setResults 
        <a class="anchor" href="#-setResults" id="-setResults"><span class="icon-link"></span></a>
    </h4>

    
    <div class="description"><p>Sets the list of matches for the given path, removing the previous match info, if any, and updating
the total match count. Note that for the count to remain accurate, the previous match info must not have
been mutated since it was set.</p>
</div>
    
<dl>
    <dt>
        fullpath
        <span class="label label-info">string</span>
    </dt>
    <dd>Full path to the file containing the matches.</dd>
    <dt>
        resultInfo
        <span class="label label-non-nullable">non-nullable</span>
        <span class="label label-info">{matches: Object, collapsed: boolean=}</span>
    </dt>
    <dd>Info for the matches to set: matches - Array of matches, in the format returned by FindInFiles.getSearchMatches() collapsed - Optional: whether the results should be collapsed in the UI (default false).</dd>
</dl><dl>
</dl>
<dl>
<dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function setResults(fullpath, resultInfo, maxResultsToReturn) {
        if (results[fullpath]) {
            numMatches -= results[fullpath].matches.length;
            delete results[fullpath];
        }

        if (foundMaximum || !resultInfo || !resultInfo.matches || !resultInfo.matches.length) {
            return;
        }

        &#x2F;&#x2F; Make sure that the optional `collapsed` property is explicitly set to either true or false,
        &#x2F;&#x2F; to avoid logic issues later with comparing values.
        resultInfo.collapsed = collapseResults;

        results[fullpath] = resultInfo;
        numMatches += resultInfo.matches.length;
        evaluatedMatches += resultInfo.matches.length;
        maxResultsToReturn = maxResultsToReturn || MAX_RESULTS_TO_RETURN;
        if (numMatches &gt;= maxResultsToReturn || evaluatedMatches &gt; MAX_TOTAL_RESULTS) {
            foundMaximum = true;
        }
    }</code></pre></div>
</section>

        </div>
      </div>
    </div>

    <script type="text/javascript" src="../../../assets/js/prism.js"></script>
  </body>
</html>